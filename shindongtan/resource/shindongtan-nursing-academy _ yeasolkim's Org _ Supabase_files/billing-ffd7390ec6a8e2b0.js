!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0267e6b7-f7a2-498c-9347-14ae29fb491a",e._sentryDebugIdIdentifier="sentry-dbid-0267e6b7-f7a2-498c-9347-14ae29fb491a")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9522],{3073:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(23983).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},5179:(e,t,a)=>{"use strict";a.d(t,{$:()=>i});var n=a(80251),s=a(73969),r=a(40807);async function l(e){let{projectRef:t,orgSlug:a,reasons:n,message:s,exitAction:l}=e,{data:i,error:o}=await (0,r.bE)("/platform/feedback/downgrade",{body:{...void 0!==t&&{projectRef:t},...void 0!==a&&{orgSlug:a},reasons:n,additionalFeedback:s,exitAction:l}});return o&&(0,r.H4)(o),i}let i=function(){let{onError:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.n)(e=>l(e),{async onError(t,a,n){void 0===e?s.oR.error("Failed to submit exit survey: ".concat(t.message)):e(t,a,n)},...t})}},6878:e=>{var t=Date.now;e.exports=function(e){var a=0,n=0;return function(){var s=t(),r=16-(s-n);if(n=s,r>0){if(++a>=800)return arguments[0]}else a=0;return e.apply(void 0,arguments)}}},9359:(e,t,a)=>{"use strict";a.d(t,{YX:()=>d,_4:()=>c,gI:()=>o,ge:()=>i,lB:()=>l});var n=a(80263),s=a(53239),r=a(51859);let l=e=>{let{children:t,header:a,footer:s}=e;return(0,n.jsxs)(i,{"data-sentry-element":"FormPanelContainer","data-sentry-component":"FormPanel","data-sentry-source-file":"FormPanel.tsx",children:[a&&(0,n.jsx)(o,{children:a}),(0,n.jsx)(d,{className:"divide-y","data-sentry-element":"FormPanelContent","data-sentry-source-file":"FormPanel.tsx",children:t}),s&&(0,n.jsx)(c,{children:s})]})},i=(0,s.forwardRef)((e,t)=>{let{children:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("bg-surface-100 border overflow-hidden rounded-md shadow max-w-full",s.className),children:a})});i.displayName=i.displayName;let o=(0,s.forwardRef)((e,t)=>{let{children:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("border-default border-b px-8 py-4",s.className),children:a})});o.displayName=o.displayName;let d=(0,s.forwardRef)((e,t)=>{let{children:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("divide-border flex flex-col gap-0",s.className),children:a})});d.displayName=d.displayName;let c=(0,s.forwardRef)((e,t)=>{let{children:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("border-t",s.className),children:a})});c.displayName=c.displayName},10585:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(80263),s=a(55866);let r=e=>{let{resourceText:t,isFullPage:a=!1}=e,r=()=>(0,n.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200","data-sentry-component":"NoPermissionMessage","data-sentry-source-file":"NoPermission.tsx",children:(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(s.A,{size:20,"data-sentry-element":"AlertCircle","data-sentry-source-file":"NoPermission.tsx"})}),(0,n.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return a?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)("div",{className:"w-[550px]",children:(0,n.jsx)(r,{})})}):(0,n.jsx)(r,{})}},16826:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(23983).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},16988:(e,t,a)=>{"use strict";a.d(t,{A:()=>g});var n=a(80263),s=a(53239),r=a(14484),l=a(19480),i=a(29660),o=a(42889),d=a(21514),c=a(16865),u=a(51527),m=a(51859),p=a(71126),x=a(3891);function h(e){let{autoComplete:t,autoFocus:a,className:h,inputClassName:g,iconContainerClassName:f,copy:y,defaultValue:v,descriptionText:j,disabled:b,error:w,icon:N,id:C="",name:S="",inputRef:_,label:A,afterLabel:k,beforeLabel:I,labelOptional:E,layout:P,onChange:M,onBlur:D,onCopy:L,placeholder:z,type:F="text",value:T,style:R,reveal:B=!1,actions:O,size:U="medium",borderless:G=!1,validation:H,...q}=e,[V,$]=(0,s.useState)("Copy"),[W,Y]=(0,s.useState)(!0),J=(0,c.A)("input"),{formContextOnChange:K,values:Q,errors:X,handleBlur:Z,touched:ee,fieldLevelValidation:et}=(0,x.x)();Q&&!T&&(T=Q[C||S]),w||(X&&!w&&(w=X[C||S]),w=ee&&ee[C]?w:void 0),(0,s.useEffect)(()=>{H&&et(C,H(T))},[]);let ea=["peer/input",J.base];return w&&ea.push(J.variants.error),w||ea.push(J.variants.standard),U&&ea.push(J.size[U]),N&&ea.push(J.with_icon),b&&ea.push(J.disabled),g&&ea.push(g),(0,n.jsx)(l.H,{label:A,afterLabel:k,beforeLabel:I,labelOptional:E,layout:P,id:C,error:w,descriptionText:j,style:R,size:U,className:h,"data-sentry-element":"FormLayout","data-sentry-component":"Input","data-sentry-source-file":"Input.tsx",children:(0,n.jsxs)("div",{className:J.container,children:[(0,n.jsx)("input",{"data-size":U,autoComplete:t,autoFocus:a,defaultValue:v,disabled:b,id:C,name:S,onChange:function(e){M&&M(e),K&&K(e),H&&et(C,H(e.target.value))},onBlur:function(e){Z&&setTimeout(()=>{Z(e)},100),D&&D(e)},onCopy:L,placeholder:z,ref:_,type:F,value:B&&W?d.ne:T,className:(0,m.cn)(ea),...q}),N&&(0,n.jsx)(o.A,{size:U,icon:N,className:f}),y||w||O?(0,n.jsxs)("div",{className:J.actions_container,children:[w&&(0,n.jsx)(i.A,{size:U}),y&&!(B&&W)?(0,n.jsx)(p.$,{size:"tiny",type:"default",icon:(0,n.jsx)(r.A,{}),onClick:()=>{var e;return e=T,void(0,u.l)(e,()=>{$("Copied"),setTimeout(()=>{$("Copy")},3e3),null==L||L()})},children:V}):null,B&&W?(0,n.jsx)(p.$,{size:"tiny",type:"default",onClick:function(){Y(!1)},children:"Reveal"}):null,O&&O]}):null]})})}h.TextArea=function(e){let{className:t,textAreaClassName:a,descriptionText:o,disabled:d,error:m,icon:h,id:g="",name:f="",label:y,afterLabel:v,beforeLabel:j,labelOptional:b,layout:w,onChange:N,onBlur:C,placeholder:S,value:_,style:A,rows:k=4,limit:I,size:E,borderless:P=!1,validation:M,copy:D=!1,onCopy:L,actions:z,...F}=e,[T,R]=(0,s.useState)(0),[B,O]=(0,s.useState)("Copy"),{formContextOnChange:U,values:G,errors:H,handleBlur:q,touched:V,fieldLevelValidation:$}=(0,x.x)();G&&!_&&(_=G[g||f]),m||(H&&!m&&(m=H[g||f]),m=V&&V[g||f]?m:void 0),(0,s.useEffect)(()=>{M&&$(g,M(_))},[]);let W=(0,c.A)("input"),Y=[W.base];return m&&Y.push(W.variants.error),m||Y.push(W.variants.standard),h&&Y.push(W.with_icon),E&&Y.push(W.size[E]),d&&Y.push(W.disabled),a&&Y.push(a),(0,n.jsx)(l.H,{className:t,label:y,afterLabel:v,beforeLabel:j,labelOptional:b,layout:w,id:g,error:m,descriptionText:o,style:A,size:E,"data-sentry-element":"FormLayout","data-sentry-component":"TextArea","data-sentry-source-file":"Input.tsx",children:(0,n.jsxs)("div",{className:W.container,children:[(0,n.jsx)("textarea",{disabled:d,id:g,name:f,rows:k,cols:100,placeholder:S,onChange:function(e){R(e.target.value.length),N&&N(e),U&&U(e),M&&$(g,M(e.target.value))},onBlur:function(e){q&&setTimeout(()=>{q(e)},100),C&&C(e)},onCopy:L,value:_,className:Y.join(" "),maxLength:I,...F}),D||m||z?(0,n.jsx)("div",{className:W.textarea_actions_container,children:(0,n.jsxs)("div",{className:W.textarea_actions_container_items,children:[m&&(0,n.jsx)(i.A,{size:E}),D&&(0,n.jsx)(p.$,{size:"tiny",type:"default",onClick:()=>{var e;return e=_,void(0,u.l)(e,()=>{O("Copied"),setTimeout(()=>{O("Copy")},3e3),null==L||L()})},icon:(0,n.jsx)(r.A,{}),children:B}),z&&z]})}):null]})})};let g=h},20081:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});let n={integrationsListWithOrg:e=>["organizations",e,"integrations"],integrationsList:()=>["organizations","integrations"],vercelProjectList:e=>["organizations",e,"vercel-projects"],vercelConnectionsList:e=>["organizations",e,"vercel-connections"],githubBranch:(e,t,a,n)=>["organizations",e,"branches",t,a,n],githubAuthorization:()=>["github-authorization"],githubRepositoriesList:()=>["github-repositories"],githubBranchesList:e=>["github-branches",e],githubConnectionsList:e=>["organizations",e,"github-connections"],vercelRedirect:e=>["vercel-redirect",e]}},22442:(e,t,a)=>{var n=a(19773),s=a(33312),r=a(22363);e.exports=function(e){return"string"==typeof e||!s(e)&&r(e)&&"[object String]"==n(e)}},22704:(e,t,a)=>{var n=a(74723);e.exports=a(6878)(n)},26928:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(23983).A)("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]])},29660:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(80263);a(53239);var s=a(16865),r=a(55866);let l={tiny:14,small:16,medium:20,large:24,xlarge:32};function i(e){let{style:t,size:a="medium"}=e,i=(0,s.A)("inputErrorIcon");return(0,n.jsx)("div",{className:i.base,style:t,"data-sentry-component":"InputErrorIcon","data-sentry-source-file":"InputErrorIcon.tsx",children:(0,n.jsx)(r.A,{size:l[a],strokeWidth:2,"data-sentry-element":"AlertCircle","data-sentry-source-file":"InputErrorIcon.tsx"})})}},30472:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>i});var n=a(80263),s=a(90709);a(53239);var r=a(16865);let l=e=>{let{open:t,children:a,className:r,...l}=e;return(0,n.jsx)(s.bL,{asChild:l.asChild,defaultOpen:l.defaultOpen,open:t,onOpenChange:l.onOpenChange,disabled:l.disabled,className:r,"data-sentry-element":"unknown","data-sentry-component":"Collapsible","data-sentry-source-file":"Collapsible.tsx",children:a})};l.Trigger=function(e){let{children:t,asChild:a}=e;return(0,n.jsx)(s.l9,{asChild:a,"data-sentry-element":"unknown","data-sentry-component":"Trigger","data-sentry-source-file":"Collapsible.tsx",children:t})},l.Content=function(e){let{asChild:t,children:a,className:l}=e,i=(0,r.A)("collapsible");return(0,n.jsx)(s.UC,{asChild:t,className:[i.content,l].join(" "),"data-sentry-element":"unknown","data-sentry-component":"Content","data-sentry-source-file":"Collapsible.tsx",children:a})};let i=l},30816:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>au});var n=a(80263),s=a(53239),r=a(19898),l=a(40402),i=a(55345),o=a(38944),d=a(34969),c=a(51859),u=a(60045),m=a(10585),p=a(77227),x=a(48914);let h=()=>{let{isSuccess:e,can:t}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions");return(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"InvoicesSection","data-sentry-source-file":"InvoicesSection.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"InvoicesSection.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12 pr-6",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Past Invoices"}),(0,n.jsx)("p",{className:"prose text-sm",children:"You get an invoice every time you change your plan or when your monthly billing cycle resets."})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"InvoicesSection.tsx",children:e&&!t?(0,n.jsx)(m.A,{resourceText:"view this organization's upcoming invoice"}):(0,n.jsx)(x.A,{})})]})};var g=a(53434),f=a.n(g),y=a(59153),v=a.n(y),j=a(48153),b=a(96457),w=a(88767),N=a(56947),C=a(40807),S=a(96480);async function _(e,t){let{orgSlug:a}=e;if(!a)throw Error("orgSlug is required");let{data:n,error:s}=await (0,C.Jt)("/platform/organizations/{slug}/billing/invoices/upcoming",{params:{path:{slug:a}},headers:{Version:"2"},signal:t});return s&&(0,C.H4)(s),n}let A=function(e){let{orgSlug:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,N.I)(S.x.orgUpcomingPreview(t),e=>{let{signal:a}=e;return _({orgSlug:t},a)},{enabled:a&&void 0!==t,...n})};var k=a(49443),I=a(89706),E=a(3828),P=a(53010),M=a(93079);let D={[M.Lb.MONTHLY_ACTIVE_USERS]:"/docs/guides/platform/manage-your-usage/monthly-active-users",[M.Lb.MONTHLY_ACTIVE_SSO_USERS]:"/docs/guides/platform/manage-your-usage/monthly-active-users-sso",[M.Lb.MONTHLY_ACTIVE_THIRD_PARTY_USERS]:"/docs/guides/platform/manage-your-usage/monthly-active-users-third-party",[M.Lb.AUTH_MFA_PHONE]:"/docs/guides/platform/manage-your-usage/advanced-mfa-phone",[M.Lb.EGRESS]:"/docs/guides/platform/manage-your-usage/egress",[M.Lb.FUNCTION_INVOCATIONS]:"/docs/guides/platform/manage-your-usage/edge-function-invocations",[M.Lb.STORAGE_SIZE]:"/docs/guides/platform/manage-your-usage/storage-size",[M.Lb.STORAGE_IMAGES_TRANSFORMED]:"/docs/guides/platform/manage-your-usage/storage-image-transformations",[M.Lb.REALTIME_MESSAGE_COUNT]:"/docs/guides/platform/manage-your-usage/realtime-messages",[M.Lb.REALTIME_PEAK_CONNECTIONS]:"/docs/guides/platform/manage-your-usage/realtime-peak-connections",[M.Lb.CUSTOM_DOMAIN]:"/docs/guides/platform/manage-your-usage/custom-domains",[M.Lb.IPV4]:"/docs/guides/platform/manage-your-usage/ipv4",[M.Lb.PITR_7]:"/docs/guides/platform/manage-your-usage/point-in-time-recovery",[M.Lb.PITR_14]:"/docs/guides/platform/manage-your-usage/point-in-time-recovery",[M.Lb.PITR_28]:"/docs/guides/platform/manage-your-usage/point-in-time-recovery",[M.Lb.DISK_SIZE_GB_HOURS_GP3]:"/docs/guides/platform/manage-your-usage/disk-size",[M.Lb.DISK_SIZE_GB_HOURS_IO2]:"/docs/guides/platform/manage-your-usage/disk-size",[M.Lb.DISK_IOPS_GP3]:"/docs/guides/platform/manage-your-usage/disk-iops",[M.Lb.DISK_IOPS_IO2]:"/docs/guides/platform/manage-your-usage/disk-iops",[M.Lb.DISK_THROUGHPUT_GP3]:"/docs/guides/platform/manage-your-usage/disk-throughput",[M.Lb.LOG_DRAIN]:"/docs/guides/platform/manage-your-usage/log-drains"};function L(e){let{amountBeforeDiscount:t,amount:a}=e;return t&&a<t?(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-foreground-light line-through mr-2",translate:"no",children:(0,k.vv)(t)}),(0,n.jsx)("span",{translate:"no",children:(0,k.vv)(a)})]}):(0,n.jsx)("span",{translate:"no",children:(0,k.vv)(a)})}function z(e){var t;let{computeItems:a,tooltip:s,title:r,computeCredits:l}=e,i=a.flatMap(e=>e.breakdown.map(t=>({...t,computeType:e.description,computeCosts:t.amount}))).sort((e,t)=>t.computeCosts-e.computeCosts),o=Math.max(0,a.reduce((e,t)=>e+t.amount_before_discount,0)),d=Math.max(0,a.reduce((e,t)=>{var a;return e+(null!=(a=t.amount)?a:0)},0)+(null!=(t=null==l?void 0:l.amount)?t:0));return a.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(I.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"UpcomingInvoice.tsx",children:[(0,n.jsxs)(I.nA,{className:"!py-2 px-0 flex items-center gap-1","data-sentry-element":"TableCell","data-sentry-source-file":"UpcomingInvoice.tsx",children:[(0,n.jsx)("span",{children:r}),(0,n.jsx)(P.I,{className:"max-w-sm","data-sentry-element":"InfoTooltip","data-sentry-source-file":"UpcomingInvoice.tsx",children:s})]}),(0,n.jsx)(I.nA,{className:"text-right py-2 px-0","data-sentry-element":"TableCell","data-sentry-source-file":"UpcomingInvoice.tsx",children:(0,n.jsx)(L,{amount:d,amountBeforeDiscount:o,"data-sentry-element":"InvoiceLineItemAmount","data-sentry-source-file":"UpcomingInvoice.tsx"})})]}),i.map(e=>(0,n.jsxs)(I.Hj,{className:"text-foreground-light text-xs",children:[(0,n.jsxs)(I.nA,{className:"!py-2 px-0 pl-6",children:[e.project_name," (",e.computeType," - ",e.usage," Hours)"]}),(0,n.jsx)(I.nA,{className:"!py-2 px-0 text-right",translate:"no",children:(0,k.vv)(e.computeCosts)})]},e.project_ref)),l&&(0,n.jsxs)(I.Hj,{className:"text-foreground-light text-xs",children:[(0,n.jsx)(I.nA,{className:"!py-2 px-0 pl-6",children:"Compute Credits"}),(0,n.jsx)(I.nA,{className:"!py-2 px-0 text-right",translate:"no",children:(0,k.vv)(l.amount)})]})]}):null}let F=e=>{var t,a,s,r,l,i,o;let{slug:d}=e,{data:c,error:u,isLoading:m,isError:p,isSuccess:x}=A({orgSlug:d}),h=(null==c||null==(t=c.lines)?void 0:t.filter(e=>{var t,a;return(null==(t=e.description)?void 0:t.toLowerCase().includes("compute"))&&e.breakdown&&(null==(a=e.breakdown)?void 0:a.length)>0}))||[],g=null!=(l=null==c||null==(a=c.lines)?void 0:a.find(e=>e.description.startsWith("Compute Credits")))?l:null,f=null==c||null==(s=c.lines)?void 0:s.find(e=>{var t;return null==(t=e.description)?void 0:t.toLowerCase().includes("plan")}),y=h.filter(e=>{var t,a;return!(null==(t=e.metadata)?void 0:t.is_branch)&&!(null==(a=e.metadata)?void 0:a.is_read_replica)}),w=h.filter(e=>{var t;return null==(t=e.metadata)?void 0:t.is_branch}),N=h.filter(e=>{var t;return null==(t=e.metadata)?void 0:t.is_read_replica}),C=(null==c||null==(r=c.lines)?void 0:r.filter(e=>{var t,a;return!(null==(t=e.description)?void 0:t.toLowerCase().includes("compute"))&&!(null==(a=e.description)?void 0:a.toLowerCase().includes("plan"))}))||[];return(0,n.jsxs)(n.Fragment,{children:[m&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),p&&(0,n.jsx)(j.A,{subject:"Failed to retrieve upcoming invoice",error:u}),x&&(0,n.jsx)("div",{children:(0,n.jsx)("div",{children:(0,n.jsxs)(I.XI,{className:"w-full text-sm",children:[(0,n.jsxs)(I.BF,{children:[(0,n.jsxs)(I.Hj,{children:[(0,n.jsx)(I.nA,{className:"!py-2 px-0",children:null==f?void 0:f.description}),(0,n.jsx)(I.nA,{className:"text-right py-2 px-0",children:null==f?"-":(0,n.jsx)(L,{amount:f.amount,amountBeforeDiscount:f.amount_before_discount})})]}),(0,n.jsx)(z,{computeItems:y,title:"Compute",computeCredits:g,tooltip:(0,n.jsxs)("p",{className:"prose text-xs",children:["The first project is covered by Compute Credits. Additional projects incur compute costs starting at ",(0,n.jsx)("span",{translate:"no",children:"$10"}),"/month, independent of activity. See"," ",(0,n.jsx)(v(),{href:"/docs/guides/platform/manage-your-usage/compute",target:"_blank",children:"docs"}),"."]})}),(0,n.jsx)(z,{title:"Replica Compute",computeItems:N,tooltip:(0,n.jsxs)("p",{className:"prose text-xs",children:["Each Read Replica is a dedicated database. You are charged for its resources: Compute, Disk Size, provisioned Disk IOPS, provisioned Disk Throughput, and IPv4. See"," ",(0,n.jsx)(v(),{href:"/docs/guides/platform/manage-your-usage/read-replicas",target:"_blank",children:"docs"}),"."]})}),w.length>0&&(0,n.jsxs)(I.Hj,{children:[(0,n.jsx)(I.nA,{className:"py-2 px-0",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{children:"Branching"}),(0,n.jsxs)(P.I,{className:"max-w-sm",children:[(0,n.jsx)("ul",{className:"ml-6 list-disc",children:w.flatMap(e=>e.breakdown).map(e=>(0,n.jsxs)("li",{children:[e.project_name," (",e.usage," Hours)"]},"branching-breakdown-".concat(e.project_ref)))}),(0,n.jsxs)("p",{className:"mt-2",children:["See"," ",(0,n.jsx)(v(),{className:"underline",href:"https://supabase.com/docs/guides/platform/manage-your-usage/branching",target:"_blank",children:"docs"})," ","on how billing for Branching works."]})]})]})}),(0,n.jsx)(I.nA,{className:"text-right py-2 px-0",children:(0,n.jsx)(L,{amount:w.reduce((e,t)=>e+t.amount,0),amountBeforeDiscount:w.reduce((e,t)=>{var a;return e+(null!=(a=t.amount_before_discount)?a:0)},0)})})]}),C.map(e=>{var t;return(0,n.jsxs)(I.Hj,{children:[(0,n.jsx)(I.nA,{className:"py-2 px-0",children:(0,n.jsxs)("div",{className:"gap-1 flex items-center",children:[(0,n.jsx)("span",{children:null!=(t=e.description)?t:"Unknown"}),(e.breakdown&&e.breakdown.length>0||null!=e.usage_metric)&&(0,n.jsxs)(P.I,{className:"max-w-sm",children:[e.unit_price_desc&&(0,n.jsxs)("p",{className:"mb-2",translate:"no",children:["Pricing: ",e.unit_price_desc]}),e.breakdown&&e.breakdown.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["Projects using ",e.description,":"]}),(0,n.jsx)("ul",{className:"ml-6 list-disc",children:e.breakdown.map(t=>(0,n.jsxs)("li",{children:[(0,n.jsx)(v(),{className:"underline",href:"/project/".concat(t.project_ref),target:"_blank",children:t.project_name})," ",e.usage_metric&&(0,n.jsxs)("span",{children:["(",(0,E.pK)(e.usage_metric,t)," ",(0,E.mX)(e.usage_metric),")"]})]},"".concat(e.description,"-breakdown-").concat(t.project_ref)))})]}),e.usage_metric&&null!=D[e.usage_metric]&&(0,n.jsxs)("p",{className:"mt-2",children:["See"," ",(0,n.jsx)(v(),{className:"underline",href:D[e.usage_metric],target:"_blank",children:"docs"})," ","on how billing for ",e.description," works and"," ",(0,n.jsx)(v(),{className:"underline",href:"/organization/".concat(d,"/usage"),children:"usage page"})," ","for a detailed breakdown."]})]})]})}),(0,n.jsx)(I.nA,{className:"text-right py-2 px-0",children:(0,n.jsx)(L,{amount:e.amount,amountBeforeDiscount:e.amount_before_discount})})]},e.description)})]}),(0,n.jsxs)(I.Gg,{children:[(0,n.jsxs)(I.Hj,{children:[(0,n.jsxs)(I.nA,{className:"font-medium py-2 px-0 flex items-center",children:[(0,n.jsx)("span",{className:"mr-2",children:"Current Costs"}),(0,n.jsx)(P.I,{children:"Costs accumulated from the beginning of the billing cycle up to now."})]}),(0,n.jsx)(I.nA,{className:"text-right font-medium py-2 px-0",translate:"no",children:null!=(i=(0,k.vv)(null==c?void 0:c.amount_total))?i:"-"})]}),(0,n.jsxs)(I.Hj,{children:[(0,n.jsxs)(I.nA,{className:"font-medium py-2 px-0 flex items-center",children:[(0,n.jsx)("span",{className:"mr-2",children:"Projected Costs"}),(0,n.jsx)(P.I,{className:"max-w-xs",children:"Projected costs at the end of the billing cycle. Includes predictable costs for Compute Hours, IPv4, Custom Domain and Point-In-Time-Recovery, but no costs for metrics like MAU, storage or function invocations. Final amounts may vary depending on your usage."})]}),(0,n.jsx)(I.nA,{className:"text-right font-medium py-2 px-0",translate:"no",children:null!=(o=(0,k.vv)(null==c?void 0:c.amount_projected))?o:"-"})]})]})]})})})]})},T=()=>{var e,t;let{slug:a}=(0,r.g)(),{isSuccess:s,can:d}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),{data:c,error:x,isLoading:h,isError:g}=(0,i.j5)({orgSlug:a},{enabled:d}),y=(0,o.x)("billing:invoices"),N=f().unix(null!=(e=null==c?void 0:c.current_period_start)?e:0).utc(),C=f().unix(null!=(t=null==c?void 0:c.current_period_end)?t:0).utc(),S=C.diff(f()(),"days"),_=C.diff(N,"days");return(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"BillingBreakdown","data-sentry-source-file":"BillingBreakdown.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"BillingBreakdown.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12 pr-6",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Upcoming Invoice"}),(0,n.jsx)("div",{className:"py-2",children:(0,n.jsx)(w.A,{type:"horizontal",value:_-S,max:_,barClass:"bg-foreground",labelBottom:"".concat(N.format("MMMM DD")," - ").concat(C.format("MMMM DD")),bgClass:"bg-surface-300",labelBottomClass:"!text-foreground-light p-1 m-0",labelTop:c?"".concat(S," ").concat(1===S?"day":"days"," left"):"",labelTopClass:"p-1 m-0","data-sentry-element":"SparkBar","data-sentry-source-file":"BillingBreakdown.tsx"})}),(0,n.jsxs)("p",{className:"prose text-sm",children:["Your upcoming invoice (excluding credits) will continue to update until the end of your billing cycle on ",C.format("MMMM DD"),". For a more detailed breakdown, visit the ",(0,n.jsx)(v(),{href:"/org/".concat(a,"/usage"),"data-sentry-element":"Link","data-sentry-source-file":"BillingBreakdown.tsx",children:"usage page."})]}),(0,n.jsx)("br",{}),(0,n.jsx)("p",{className:"text-sm text-foreground-light mt-4",children:"Add-on changes or new projects may take up to an hour to appear."})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"BillingBreakdown.tsx",children:s&&!d?(0,n.jsx)(m.A,{resourceText:"view this organization's upcoming invoice"}):(0,n.jsxs)(n.Fragment,{children:[h&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),g&&(0,n.jsx)(j.A,{subject:"Failed to retrieve subscription",error:x}),y&&(0,n.jsx)(F,{slug:a})]})})]})};var R=a(73969),B=a(66352),O=a(79918);async function U(e,t){let{slug:a}=e;if(!a)throw Error("slug is required");let{data:n,error:s}=await (0,C.Jt)("/platform/organizations/{slug}/customer",{params:{path:{slug:a}},signal:t});return s&&(0,C.H4)(s),n}let G=function(e){let{slug:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,p.SE)(u.aG.BILLING_READ,"stripe.customer");return(0,N.I)(O.O.customerProfile(t),e=>{let{signal:a}=e;return U({slug:t},a)},{enabled:a&&s&&void 0!==t,...n})};var H=a(32144),q=a(80251);async function V(e){let{slug:t,address:a,billing_name:n}=e;if(!t)return console.error("Slug is required");let{data:s,error:r}=await (0,C.yJ)("/platform/organizations/{slug}/customer",{params:{path:{slug:t}},body:{address:null!=a?a:void 0,billing_name:n}});if(r)throw(0,C.H4)(r);return s}let $=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,H.jE)();return(0,q.n)(e=>V(e),{async onSuccess(t,a,s){let{address:r,slug:l,billing_name:i}=a;n.setQueriesData(O.O.customerProfile(l),e=>e?{...e,billing_name:i,address:r}:e),await (null==e?void 0:e(t,a,s))},async onError(e,a,n){void 0===t?R.oR.error("Failed to update customer profile: ".concat(e.message)):t(e,a,n)},...a})};async function W(e,t){let{slug:a}=e;if(!a)throw Error("slug is required");let{data:n,error:s}=await (0,C.Jt)("/platform/organizations/{slug}/tax-ids",{params:{path:{slug:a}},signal:t});if(s)throw(0,C.H4)(s);return n.tax_id}let Y=function(e){let{slug:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,p.SE)(u.aG.BILLING_READ,"stripe.tax_ids");return(0,N.I)(O.O.taxId(t),e=>{let{signal:a}=e;return W({slug:t},a)},{enabled:a&&void 0!==t&&s,...n})};async function J(e){let{slug:t,taxId:a}=e;if(!t)throw Error("Slug is required");if(null!=a){let{data:e,error:n}=await (0,C.yJ)("/platform/organizations/{slug}/tax-ids",{params:{path:{slug:t}},body:{type:a.type,value:a.value,country:a.country}});return n&&(0,C.H4)(n),e}{let{data:e,error:a}=await (0,C.yH)("/platform/organizations/{slug}/tax-ids",{params:{path:{slug:t}},headers:{Version:"2"}});return a&&(0,C.H4)(a),e}}let K=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,H.jE)();return(0,q.n)(e=>J(e),{async onSuccess(t,a,s){let{slug:r}=a;n.setQueryData(O.O.taxId(r),t.tax_id),await (null==e?void 0:e(t,a,s))},async onError(e,a,n){void 0===t?R.oR.error("Failed to update tax id: ".concat(e.message)):t(e,a,n)},...a})};var Q=a(76948),X=a(57980),Z=a(71126),ee=a(44870),et=a(1794),ea=a(42005);let en=()=>{let{slug:e}=(0,r.g)(),t=(0,d.a)(),{isSuccess:a,can:i}=(0,p.hl)(u.aG.BILLING_READ,"stripe.customer"),o=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.customer"),{data:c,error:x,isLoading:h,isSuccess:g}=G({slug:e},{enabled:i}),{data:f,error:y,isLoading:v,isSuccess:w}=Y({slug:e}),N=(0,s.useMemo)(()=>{var e;return{...null==c?void 0:c.address,billing_name:null==c?void 0:c.billing_name,tax_id_type:null==f?void 0:f.type,tax_id_value:null==f?void 0:f.value,tax_id_name:f&&(null==(e=et.X.find(e=>e.type===f.type&&e.countryIso2===f.country))?void 0:e.name)||""}},[c,f]),{mutateAsync:C}=$(),{mutateAsync:S}=K(),[_,A]=(0,s.useState)(!1),{form:k,handleSubmit:I,handleReset:E,isDirty:P}=(0,ea.x)({initialCustomerData:N,onCustomerDataChange:async t=>{A(!0);try{await C({slug:e,address:t.address,billing_name:t.billing_name}),await S({slug:e,taxId:t.tax_id}),R.oR.success("Successfully updated billing data"),A(!1)}catch(e){R.oR.error("Failed updating billing data: ".concat(e.message)),A(!1)}}}),M=!P||!o||_;return(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"BillingCustomerData","data-sentry-source-file":"BillingCustomerData.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"BillingCustomerData.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12 pr-3",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Billing Address & Tax ID"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"This will be reflected in every upcoming invoice, past invoices are not affected"})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"BillingCustomerData.tsx",children:(null==t?void 0:t.managed_by)!==void 0&&(null==t?void 0:t.managed_by)!=="supabase"?(0,n.jsx)(B.A,{partner:null==t?void 0:t.managed_by,resource:"Billing Addresses",cta:{installationId:null==t?void 0:t.partner_id}}):a&&!i?(0,n.jsx)(m.A,{resourceText:"view this organization's billing address"}):(0,n.jsxs)(n.Fragment,{children:[(h||v)&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),(x||y)&&(0,n.jsx)(j.A,{subject:"Failed to retrieve organization customer profile",error:x||y}),g&&w&&(0,n.jsx)(Q.Zp,{children:(0,n.jsx)(X.lV,{...k,children:(0,n.jsxs)("form",{onSubmit:k.handleSubmit(I),children:[(0,n.jsx)(ee.M,{className:"p-8",form:k,disabled:!o}),(0,n.jsxs)(Q.wL,{className:"border-t justify-end px-8",children:[!o&&(0,n.jsx)("span",{className:"text-sm text-foreground-lighter mr-auto",children:"You need additional permissions to manage this organization's billing address"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(Z.$,{type:"default",onClick:E,disabled:M,children:"Cancel"}),(0,n.jsx)(Z.$,{type:"primary",htmlType:"submit",disabled:M,loading:_,children:"Save"})]})]})]})})})]})})]})};var es=a(32981),er=a(87494),el=a(39353),ei=a(95268),eo=a(9359),ed=a(78036),ec=a(82951),eu=a(24794),em=a(84377),ep=a(34962);let ex="org-billing-email",eh=el.z.object({billingEmail:el.z.string().email("Please provide a valid email address").optional(),additionalBillingEmails:el.z.string().email({message:"invalid_email"}).array().default([])}),eg=()=>{var e,t;let{slug:a}=(0,r.g)(),i=(0,d.a)(),{name:o,billing_email:c}=null!=i?i:{},x=(0,p.SE)(u.aG.UPDATE,"organizations"),{isSuccess:h,can:g}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),{data:f,isLoading:y}=G({slug:a},{enabled:g}),v=(0,er.mN)({resolver:(0,es.u)(eh),defaultValues:{billingEmail:null!=c?c:"",additionalBillingEmails:null!=(e=null==f?void 0:f.additional_emails)?e:[]}}),{additionalBillingEmails:j}=v.watch(),{errors:b}=v.formState,w=null!=(t=b.additionalBillingEmails)?t:[],{mutate:N,isLoading:C}=(0,ec.N)(),S=async e=>x?a?o?void N({slug:a,name:o,billing_email:e.billingEmail,additional_billing_emails:e.additionalBillingEmails},{onSuccess:()=>{R.oR.success("Successfully saved settings"),v.reset(e)}}):console.error("Organization name is required"):console.error("Slug is required"):R.oR.error("You do not have the required permissions to update this organization");return(0,s.useEffect)(()=>{if(f){var e;v.reset({billingEmail:null!=c?c:"",additionalBillingEmails:null!=(e=f.additional_emails)?e:[]})}},[f]),(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"BillingEmail","data-sentry-source-file":"BillingEmail.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"BillingEmail.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Email Recipient"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"All billing correspondence will go to this email"})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"BillingEmail.tsx",children:h&&!g?(0,n.jsx)(m.A,{resourceText:"view this organization's email recipients"}):(0,n.jsx)(X.lV,{...v,children:(0,n.jsx)("form",{id:ex,onSubmit:v.handleSubmit(S),children:(0,n.jsx)(eo.lB,{footer:(0,n.jsx)("div",{className:"flex py-4 px-8",children:(0,n.jsx)(ei.I,{form:ex,isSubmitting:C,hasChanges:v.formState.isDirty,handleReset:v.reset,disabled:!x,helper:x?void 0:"You need additional permissions to update billing emails"})}),children:(0,n.jsx)(ed.y9,{children:(0,n.jsxs)(ed.DE,{fullWidth:!0,loading:y,children:[(0,n.jsx)(X.zB,{control:v.control,name:"billingEmail",render:e=>{let{field:t}=e;return(0,n.jsxs)(em.M,{label:"Email address",children:[(0,n.jsx)(X.MJ,{children:(0,n.jsx)(eu.p,{type:"email",...t,placeholder:"Email",disabled:!x})}),(0,n.jsx)(X.C5,{})]})}}),(0,n.jsx)(X.zB,{control:v.control,name:"additionalBillingEmails",render:e=>{let{field:t}=e;return(0,n.jsxs)(em.M,{hideMessage:!0,label:(0,n.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,n.jsx)("span",{children:"Additional emails"}),(0,n.jsx)(P.I,{side:"bottom",children:"These email addresses will be CC'd in automated invoice or payment failure emails. Payment receipts will still only go to the primary billing address."})]}),children:[(0,n.jsx)(X.MJ,{children:(0,n.jsxs)(ep.xf,{values:t.value,onValuesChange:t.onChange,children:[(0,n.jsx)(ep.hw,{deletableBadge:!0,showIcon:!1,mode:"inline-combobox",label:"Add additional recipients",badgeLimit:"wrap"}),(0,n.jsx)(ep.sD,{children:(0,n.jsx)(ep.DG,{creatable:!0})})]})}),Array.isArray(w)&&w.length>0&&(0,n.jsx)("div",{className:"flex flex-col gap-y-1 mt-2",children:w.map((e,t)=>(0,n.jsxs)("p",{className:"text-sm text-destructive",children:['"',j[t],'" is not a valid email address']},"email-error-".concat(t)))})]})}})]})})})})})})]})};var ef=a(77877),ey=a(796),ev=a(24074),ej=a.n(ev),eb=a(74725),ew=a(64036),eN=a(56028),eC=a(12532);let eS=(0,eN.BX)({panelKey:void 0,setPanelKey:e=>{eS.panelKey=e}}),e_=e=>(0,eC.s)(eS,e);var eA=a(66644),ek=a(55685),eI=a(80125),eE=a(76191),eP=a(59156);async function eM(e){let{slug:t,tier:a,paymentMethod:n}=e;if(!t)throw Error("slug is required");if(!a)throw Error("tier is required");let s={tier:a};void 0!==n&&(s.payment_method=n);let{error:r,data:l}=await (0,C.yJ)("/platform/organizations/{slug}/billing/subscription",{body:{payment_method:s.payment_method,tier:s.tier},params:{path:{slug:t}}});return r&&(0,C.H4)(r),l}let eD=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,H.jE)();return(0,q.n)(e=>eM(e),{async onSuccess(t,a,s){let{slug:r}=a;!t.pending_payment_intent_secret&&(await new Promise(e=>setTimeout(e,2e3)),await Promise.all([n.invalidateQueries(eP.s.orgSubscription(r)),n.invalidateQueries(eP.s.orgPlans(r)),n.invalidateQueries(eE.E.orgUsage(r)),n.invalidateQueries(S.x.orgUpcomingPreview(r)),n.invalidateQueries(O.O.detail(r)),n.invalidateQueries(O.O.list())]),a.paymentMethod&&n.setQueriesData(O.O.paymentMethods(r),e=>e?{...e,defaultPaymentMethodId:a.paymentMethod,data:e.data.map(e=>({...e,is_default:e.id===a.paymentMethod}))}:e)),await (null==e?void 0:e(t,a,s))},async onError(e,a,n){void 0===t?R.oR.error(e.message,{dismissible:!0,duration:1e4}):t(e,a,n)},...a})};var eL=a(41728),ez=a(35212),eF=a(30472),eT=a(66915);let eR=[{name:"Spend cap enabled",value:"on",imageUrl:"".concat(ew.o2,"/img/spend-cap-on.png"),imageUrlLight:"".concat(ew.o2,"/img/spend-cap-on--light.png")},{name:"Spend cap disabled",value:"off",imageUrl:"".concat(ew.o2,"/img/spend-cap-off.png"),imageUrlLight:"".concat(ew.o2,"/img/spend-cap-off--light.png")}],eB=()=>{var e;let{slug:t}=(0,r.g)(),{resolvedTheme:a}=(0,ey.D)(),[l,o]=(0,s.useState)(!1),[d,m]=(0,s.useState)(),x=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.subscriptions"),h=e_(),g="costControl"===h.panelKey,f=()=>h.setPanelKey(void 0),{data:y,isLoading:j}=(0,i.j5)({orgSlug:t}),{mutate:b,isLoading:w}=eD({onSuccess:()=>{R.oR.success("Successfully ".concat(S?"enabled":"disabled"," spend cap")),f()},onError:e=>{R.oR.error("Failed to toggle spend cap: ".concat(e.message))}}),N=(null==y||null==(e=y.plan)?void 0:e.id)==="free",C=!(null==y?void 0:y.usage_billing_enabled),S=!C&&"on"===d,_=d!==(C?"on":"off");(0,s.useEffect)(()=>{g&&void 0!==y&&m(C?"on":"off")},[g,j,y,C]);let A=async()=>{if(!t)return console.error("Org slug is required");b({slug:t,tier:"on"===d?ew.V$.PRO:ew.V$.PAYG})};return(0,n.jsx)(ez.Ay,{size:"large",loading:j||w,disabled:N||j||!_||w||!x,visible:g,onCancel:f,onConfirm:A,header:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h4",{children:"Spend cap"}),(0,n.jsx)(Z.$,{asChild:!0,type:"default",icon:(0,n.jsx)(ef.A,{strokeWidth:1.5}),children:(0,n.jsx)(v(),{href:"https://supabase.com/docs/guides/platform/cost-control#spend-cap",target:"_blank",rel:"noreferrer",children:"About spend cap"})})]}),tooltip:x?void 0:"You do not have permission to update spend cap","data-sentry-element":"SidePanel","data-sentry-component":"SpendCapSidePanel","data-sentry-source-file":"SpendCapSidePanel.tsx",children:(0,n.jsx)(ez.Ay.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"SpendCapSidePanel.tsx",children:(0,n.jsxs)("div",{className:"py-6 space-y-4",children:[(0,n.jsx)("p",{className:"text-sm",children:"Use the spend cap to manage project usage and costs, and control whether the project can exceed the included quota allowance of any billed line item in a billing cycle"}),(0,n.jsxs)(eF.Ay,{open:l,onOpenChange:o,"data-sentry-element":"Collapsible","data-sentry-source-file":"SpendCapSidePanel.tsx",children:[(0,n.jsx)(eF.Ay.Trigger,{asChild:!0,"data-sentry-element":"unknown","data-sentry-source-file":"SpendCapSidePanel.tsx",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,n.jsx)(eT.A,{strokeWidth:1.5,size:16,className:l?"rotate-90":"","data-sentry-element":"ChevronRight","data-sentry-source-file":"SpendCapSidePanel.tsx"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"How are each resource charged after exceeding the included quota?"})]})}),(0,n.jsx)(eF.Ay.Content,{asChild:!0,"data-sentry-element":"unknown","data-sentry-source-file":"SpendCapSidePanel.tsx",children:(0,n.jsx)(eI.A,{className:"mt-4",head:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eI.A.th,{children:(0,n.jsx)("p",{className:"text-xs",children:"Item"})}),(0,n.jsx)(eI.A.th,{children:(0,n.jsx)("p",{className:"text-xs",children:"Rate"})})]}),body:["database","auth","storage","realtime","edge_functions"].map(e=>{let t=eL.z[e],a=t.features.filter(e=>e.usage_based);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eI.A.tr,{children:[(0,n.jsx)(eI.A.td,{children:(0,n.jsx)("p",{className:"text-xs text-foreground",children:t.title})}),(0,n.jsx)(eI.A.td,{children:null})]},e),a.map(e=>(0,n.jsxs)(eI.A.tr,{children:[(0,n.jsx)(eI.A.td,{children:(0,n.jsx)("p",{className:"text-xs pl-4",children:e.title})}),(0,n.jsx)(eI.A.td,{children:(0,n.jsx)("p",{className:"text-xs pl-4",children:e.plans.pro})})]},e.title))]})}),"data-sentry-element":"Table","data-sentry-source-file":"SpendCapSidePanel.tsx"})})]}),N&&(0,n.jsx)(eA.F,{withIcon:!0,variant:"info",title:"Toggling of the spend cap is only available on the Pro Plan",actions:(0,n.jsx)(Z.$,{type:"default",onClick:()=>h.setPanelKey("subscriptionPlan"),children:"View available plans"}),children:"Upgrade your plan to disable the spend cap"}),(0,n.jsx)("div",{className:"!mt-8 pb-4",children:(0,n.jsx)("div",{className:"flex gap-3",children:eR.map(e=>{let t=d===e.value;return(0,n.jsxs)("div",{className:(0,c.cn)("col-span-4 group space-y-1",N&&"opacity-75"),onClick:()=>!N&&m(e.value),children:[(0,n.jsx)(ej(),{alt:"Spend Cap",className:(0,c.cn)("relative rounded-xl transition border bg-no-repeat bg-center bg-cover w-[160px] h-[96px]",t?"border-foreground":"border-foreground-muted opacity-50 group-hover:border-foreground-lighter group-hover:opacity-100",!N&&"cursor-pointer",!N&&!t&&"group-hover:border-foreground-light"),width:160,height:96,src:(null==a?void 0:a.includes("dark"))?e.imageUrl:e.imageUrlLight}),(0,n.jsx)("p",{className:(0,c.cn)("text-sm transition",!N&&"group-hover:text-foreground",t?"text-foreground":"text-foreground-light"),children:e.name})]},e.value)})})}),"on"===d?(0,n.jsx)(eA.F,{withIcon:!0,variant:"warning",title:"Your projects could become unresponsive or enter read only mode",children:"Exceeding the included quota allowance with spend cap enabled can cause your projects to become unresponsive or enter read only mode."}):(0,n.jsx)(eA.F,{withIcon:!0,variant:"info",title:"Charges apply for usage beyond included quota allowance",children:"Your projects will always remain responsive and active, and charges only apply when exceeding the included quota limit."}),_&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-sm",children:"on"===d?"Upon clicking confirm, spend cap will be enabled for your organization and you will no longer be charged any extra for usage.":"Upon clicking confirm, spend cap will be disabled for your organization and you will be charged for any usage beyond the included quota."}),(0,n.jsx)("p",{className:"text-sm",children:"Toggling spend cap triggers an invoice and there might be prorated charges for any usage beyond the Pro Plans quota during this billing cycle."})]})]})})})},eO=e=>{var t;let{}=e,{slug:a}=(0,r.g)(),{resolvedTheme:s}=(0,ey.D)(),{isSuccess:o,can:d}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),c=e_(),x=(0,eb._)("disableProjectCreationAndUpdate"),{data:h,error:g,isLoading:f,isSuccess:y,isError:w}=(0,i.j5)({orgSlug:a},{enabled:d}),N=null==h?void 0:h.plan,C=null!=(t=null==h?void 0:h.usage_billing_enabled)&&t,S=!x&&!["team","enterprise"].includes((null==N?void 0:N.id)||"");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"CostControl.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"CostControl.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-6 top-12",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Cost Control"}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light m-0",children:["Allow scaling beyond your plan's"," ",(0,n.jsx)(v(),{href:"/org/".concat(a,"/usage"),className:"text-green-900 transition hover:text-green-1000","data-sentry-element":"Link","data-sentry-source-file":"CostControl.tsx",children:"included quota"}),"."]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"More information"}),(0,n.jsx)("div",{children:(0,n.jsx)(v(),{href:"https://supabase.com/docs/guides/platform/cost-control#spend-cap",target:"_blank",rel:"noreferrer","data-sentry-element":"Link","data-sentry-source-file":"CostControl.tsx",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2 opacity-50 hover:opacity-100 transition",children:[(0,n.jsx)("p",{className:"text-sm m-0",children:"Spend cap"}),(0,n.jsx)(ef.A,{size:16,strokeWidth:1.5,"data-sentry-element":"ExternalLink","data-sentry-source-file":"CostControl.tsx"})]})})})]})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"CostControl.tsx",children:o&&!d?(0,n.jsx)(m.A,{resourceText:"update this organization's cost control"}):(0,n.jsxs)(n.Fragment,{children:[f&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),w&&(0,n.jsx)(j.A,{subject:"Failed to retrieve subscription",error:g}),y&&(0,n.jsxs)("div",{className:"space-y-6",children:[["team","enterprise"].includes((null==N?void 0:N.id)||"")?(0,n.jsxs)(eA.F,{withIcon:!0,variant:"info",title:"You will be charged for any additional usage on the ".concat((null==N?void 0:N.name)||""," plan"),children:[(null==N?void 0:N.name)||""," plan requires you to have spend cap off at all times. Your projects will never become unresponsive. Only when your"," ",(0,n.jsx)(v(),{href:"/org/".concat(a,"/usage"),className:"text-green-900 transition hover:text-green-1000",children:"included usage"})," ","is exceeded will you be charged for any additional usage."]}):(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"If you need to go beyond the included quota, simply switch off your spend cap to pay for additional usage."}),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"rounded-md bg-surface-200 w-[160px] h-[96px] shadow",children:(0,n.jsx)(ej(),{alt:"Spend Cap",width:160,height:96,src:C?"".concat(ew.o2,"/img/spend-cap-off").concat((null==s?void 0:s.includes("dark"))?"":"--light",".png?v=3"):"".concat(ew.o2,"/img/spend-cap-on").concat((null==s?void 0:s.includes("dark"))?"":"--light",".png?v=3")})})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"mb-1",children:["Spend cap is ",C?"disabled":"enabled"]}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:C?(0,n.jsx)("span",{children:"You will be charged for usage beyond the included quota."}):(0,n.jsx)("span",{children:"You won't be charged any extra for usage. However, your projects could become unresponsive or enter read only mode if you exceed the included quota."})}),(0,n.jsx)(ek.A,{projectUpdateDisabled:x,children:(0,n.jsx)(Z.$,{type:"default",className:"mt-4 pointer-events-auto",disabled:!S,onClick:()=>c.setPanelKey("costControl"),children:"Change spend cap"})})]})]})]})]})})]}),(0,n.jsx)(eB,{"data-sentry-element":"SpendCapSidePanel","data-sentry-source-file":"CostControl.tsx"})]})};var eU=a(26090),eG=a(25344),eH=a(24781),eq=a(55866),eV=a(3073),e$=a(41370);async function eW(e){let{payment_method_id:t,amount:a,slug:n,hcaptchaToken:s}=e;if(!t)throw Error("Payment method id required");if(!s)throw Error("Captcha not submitted");if(!n)throw Error("Slug is required");let{data:r,error:l}=await (0,C.bE)("/platform/organizations/{slug}/billing/credits/top-up",{params:{path:{slug:n}},body:{payment_method_id:t,amount:a,hcaptcha_token:s}});return l&&(0,C.H4)(l),r}let eY=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,q.n)(e=>eW(e),{async onSuccess(t,a,n){await (null==e?void 0:e(t,a,n))},async onError(e,a,n){void 0===t?R.oR.error("Failed to top up credits: ".concat(e.message)):t(e,a,n)},...a})};var eJ=a(79394),eK=a(82758),eQ=a(70324),eX=a(67920);async function eZ(e){let{slug:t,hcaptchaToken:a}=e,{data:n,error:s}=await (0,C.bE)("/platform/organizations/{slug}/payments/setup-intent",{params:{path:{slug:t}},body:{hcaptchaToken:a}});return s&&(0,C.H4)(s),n}let e0=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,q.n)(e=>eZ(e),{async onSuccess(t,a,n){await (null==e?void 0:e(t,a,n))},async onError(e,a,n){void 0===t?R.oR.error("Failed to setup intent: ".concat(e.message)):t(e,a,n)},...a})};async function e1(e){let{slug:t,paymentMethodId:a}=e;if(!t)throw Error("Slug is required");let{data:n,error:s}=await (0,C.yJ)("/platform/organizations/{slug}/payments/default",{body:{payment_method_id:a},params:{path:{slug:t}}});if(s)throw(0,C.H4)(s);return n}let e2=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,H.jE)();return(0,q.n)(e=>e1(e),{async onSuccess(t,a,s){let{slug:r,paymentMethodId:l}=a;n.setQueriesData(O.O.paymentMethods(r),e=>e?{...e,defaultPaymentMethodId:l,data:e.data.map(e=>({...e,is_default:e.id===l}))}:e),await (null==e?void 0:e(t,a,s))},async onError(e,a,n){void 0===t?R.oR.error("Failed to mark payment method as default: ".concat(e.message)):t(e,a,n)},...a})};var e4=a(9093),e3=a(97380);let e5=e=>{var t;let{returnUrl:a,onCancel:r,onConfirm:l,showSetDefaultCheckbox:i=!1,autoMarkAsDefaultPaymentMethod:o=!1}=e,c=(0,eG.useStripe)(),u=(0,eG.useElements)(),m=(0,d.a)(),[p,x]=(0,s.useState)(!1),[h,g]=(0,s.useState)(i),f=(0,H.jE)(),{mutateAsync:y}=e2(),v=async e=>{if(e.preventDefault(),!c||!u)return void console.error("Stripe.js has not loaded");x(!0),void 0!==document&&document.body.classList.add("!pointer-events-auto");let{error:t,setupIntent:n}=await c.confirmSetup({elements:u,redirect:"if_required",confirmParams:{return_url:a}});if(t){var s;x(!1),R.oR.error(null!=(s=null==t?void 0:t.message)?s:" Failed to save card details")}else{if((h||o)&&m&&"string"==typeof(null==n?void 0:n.payment_method))try{await y({slug:m.slug,paymentMethodId:n.payment_method}),await f.invalidateQueries(O.O.paymentMethods(m.slug)),f.setQueriesData(O.O.paymentMethods(m.slug),e=>e?{...e,defaultPaymentMethodId:n.payment_method,data:e.data.map(e=>({...e,is_default:e.id===n.payment_method}))}:e)}catch(e){R.oR.error("Failed to set payment method as default")}else m&&await f.invalidateQueries(O.O.paymentMethods(m.slug));x(!1),l()}void 0!==document&&document.body.classList.remove("!pointer-events-auto")};return(0,n.jsxs)("div",{"data-sentry-component":"AddPaymentMethodForm","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:[(0,n.jsxs)(eX.A.Content,{className:"transition ".concat(p?"pointer-events-none opacity-75":"opacity-100"),"data-sentry-element":"unknown","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:[(0,n.jsx)(eG.PaymentElement,{className:"[.p-LinkAutofillPrompt]:pt-0",options:{defaultValues:{billingDetails:{email:null!=(t=null==m?void 0:m.billing_email)?t:""}}},"data-sentry-element":"PaymentElement","data-sentry-source-file":"AddPaymentMethodForm.tsx"}),i&&(0,n.jsxs)("div",{className:"flex items-center gap-x-2 mt-4 mb-2",children:[(0,n.jsx)(e4.S,{id:"save-as-default",checked:h,onCheckedChange:e=>{"boolean"==typeof e&&g(e)}}),(0,n.jsx)(e3.J,{htmlFor:"save-as-default",className:"text-foreground-light",children:"Save as default payment method"})]})]}),(0,n.jsx)(eX.A.Separator,{"data-sentry-element":"unknown","data-sentry-source-file":"AddPaymentMethodForm.tsx"}),(0,n.jsxs)(eX.A.Content,{className:"flex items-center space-x-2","data-sentry-element":"unknown","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:[(0,n.jsx)(Z.$,{htmlType:"button",size:"small",type:"default",onClick:r,block:!0,disabled:p,"data-sentry-element":"Button","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:"Cancel"}),(0,n.jsx)(Z.$,{block:!0,htmlType:"button",size:"small",type:"primary",loading:p,disabled:p,onClick:v,"data-sentry-element":"Button","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:"Add payment method"})]})]})};var e8=a(50920);let e6=(0,eH.c)(ew.WS),e9=e=>{let{visible:t,returnUrl:a,onCancel:r,onConfirm:l,showSetDefaultCheckbox:i,autoMarkAsDefaultPaymentMethod:o}=e,{resolvedTheme:c}=(0,ey.D)(),[u,m]=(0,s.useState)(),p=(0,d.a)(),x=(0,eJ.F)(),[h,g]=(0,s.useState)(null),[f,y]=(0,s.useState)(null),{mutate:v}=e0({onSuccess:e=>{m(e)},onError:e=>{R.oR.error("Failed to setup intent: ".concat(e.message))}}),j=(0,s.useCallback)(e=>{y(e)},[]);(0,s.useEffect)(()=>{let e=async e=>{let t=null==p?void 0:p.slug;return t?e?void(m(void 0),v({slug:t,hcaptchaToken:e})):console.error("HCaptcha token required"):console.error("Slug is required")};(async()=>{if(t&&f&&x){let t=h;try{if(!t){var a;let e=await f.execute({async:!0});t=null!=(a=null==e?void 0:e.response)?a:null}}catch(e){return}await e(null!=t?t:void 0),b()}})()},[t,f,x]);let b=()=>{g(null),null==f||f.resetCaptcha()},w={clientSecret:u?u.client_secret:"",appearance:(0,e8.D)(c)},N=()=>(m(void 0),r());return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eU.A,{ref:j,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onOpen:()=>{void 0!==document&&document.body.classList.add("!pointer-events-auto")},onClose:()=>{N(),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onVerify:e=>{g(e),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onExpire:()=>{g(null)},"data-sentry-element":"HCaptcha","data-sentry-source-file":"AddNewPaymentMethodModal.tsx"}),(0,n.jsx)(eX.A,{hideFooter:!0,size:"medium",visible:t&&void 0!==u,header:"Add new payment method",onCancel:N,className:"PAYMENT","data-sentry-element":"Modal","data-sentry-source-file":"AddNewPaymentMethodModal.tsx",children:(0,n.jsx)(eG.Elements,{stripe:e6,options:w,"data-sentry-element":"Elements","data-sentry-source-file":"AddNewPaymentMethodModal.tsx",children:(0,n.jsx)(e5,{returnUrl:a,onCancel:N,onConfirm:()=>(m(void 0),l()),showSetDefaultCheckbox:i,autoMarkAsDefaultPaymentMethod:o,"data-sentry-element":"AddPaymentMethodForm","data-sentry-source-file":"AddNewPaymentMethodModal.tsx"})})})]})};async function e7(e,t){let{slug:a}=e;if(!a)throw Error("slug is required");let{data:n,error:s}=await (0,C.Jt)("/platform/organizations/{slug}/payments",{params:{path:{slug:a}},headers:{Version:"2"},signal:t});return s&&(0,C.H4)(s),n}let te=function(e){let{slug:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,p.SE)(u.aG.BILLING_READ,"stripe.payment_methods");return(0,N.I)(O.O.paymentMethods(t),e=>{let{signal:a}=e;return e7({slug:t},a)},{enabled:a&&void 0!==t&&s,...n})};var tt=a(51194);let ta=(0,a(23983).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var tn=a(66345),ts=a(26104),tr=a(97884),tl=a(49655);let ti=(0,eH.c)(ew.WS),to=(0,s.forwardRef)(function(e,t){var a;let{selectedPaymentMethod:r,onSelectPaymentMethod:l,layout:i="vertical",createPaymentMethodInline:o=!1,readOnly:c}=e,m=(0,d.a)(),x=null==m?void 0:m.slug,[h,g]=(0,s.useState)(!1),f=(0,eJ.F)(),[y,v]=(0,s.useState)(null),[j,b]=(0,s.useState)(null),[w,N]=(0,s.useState)(void 0),{resolvedTheme:C}=(0,ey.D)(),S=(0,s.useRef)(null),[_,A]=(0,s.useState)(null),{data:I,isLoading:E,refetch:P}=te({slug:x}),M=(0,s.useCallback)(e=>{b(e)},[]),{mutate:D,isLoading:L}=e0({onSuccess:e=>{N(e)},onError:e=>{R.oR.error("Failed to setup intent: ".concat(e.message))}});(0,s.useEffect)(()=>{(null==I?void 0:I.data)&&0===I.data.length&&null==_&&A(!0)},[I]),(0,s.useEffect)(()=>{let e=async e=>{let t=null==m?void 0:m.slug;return t?e?void(N(void 0),D({slug:t,hcaptchaToken:e})):console.error("HCaptcha token required"):console.error("Slug is required")};(async()=>{if(_&&o&&j&&f){let a=y;try{if(!a){var t;let e=await j.execute({async:!0});a=null!=(t=null==e?void 0:e.response)?t:null}}catch(e){return}await e(null!=a?a:void 0),z()}})()},[o,j,f,_]);let z=()=>{v(null),null==j||j.resetCaptcha()},F=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.payment_methods"),T=(0,s.useMemo)(()=>({clientSecret:w?w.client_secret:"",appearance:(0,e8.D)(C),paymentMethodCreation:"manual"}),[w,C]);(0,s.useEffect)(()=>{if((null==I?void 0:I.data)&&I.data.length>0){let e=I.data.some(e=>e.id===r);if(!r||!e){let e=I.data.find(e=>e.is_default);void 0!==e?l(e.id):l(I.data[0].id)}}},[r,I,l]);let B=async()=>{var e;return _||null!=I&&I.data&&0===I.data.length?null==(e=S.current)?void 0:e.createPaymentMethod():{id:r}};return(0,s.useImperativeHandle)(t,()=>({createPaymentMethod:B})),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eU.A,{ref:M,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onOpen:()=>{void 0!==document&&document.body.classList.add("!pointer-events-auto")},onClose:()=>{N(void 0),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onVerify:e=>{v(e),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onExpire:()=>{v(null)}}),(0,n.jsxs)("div",{children:[E?(0,n.jsxs)("div",{className:"flex items-center px-4 py-2 space-x-4 border rounded-md border-strong bg-surface-200",children:[(0,n.jsx)(tt.A,{className:"animate-spin",size:14}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Retrieving payment methods"})]}):(null==I?void 0:I.data.length)!==0||o?(null==I?void 0:I.data)&&(null==I?void 0:I.data.length)>0&&!_?(0,n.jsxs)(ts.A,{layout:i,label:"Payment method",value:r,onChange:l,className:"flex items-center",children:[null==I?void 0:I.data.map(e=>{let t="•••• •••• •••• ".concat(e.card.last4);return(0,n.jsx)(ts.A.Option,{label:t,value:e.id,addOnBefore:()=>(0,n.jsx)("img",{alt:"Credit Card Brand",src:"".concat(ew.o2,"/img/payment-methods/").concat(e.card.brand.replace(" ","-").toLowerCase(),".png"),width:"32"}),children:(0,n.jsx)("div",{children:t})},e.id)}),(0,n.jsxs)("div",{className:"flex items-center px-3 py-2 space-x-2 transition cursor-pointer group hover:bg-surface-300",onClick:()=>{o?A(!0):g(!0)},children:[(0,n.jsx)(tn.A,{size:16}),(0,n.jsx)("p",{className:"transition text-foreground-light group-hover:text-foreground",children:"Add new payment method"})]})]}):null:(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border border-dashed rounded-md bg-alternative",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4 text-foreground-light",children:[(0,n.jsx)(eq.A,{size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm",children:"No payment methods"})]}),(0,n.jsx)(e$.G,{type:"default",disabled:!F,icon:(0,n.jsx)(ta,{}),onClick:()=>{o?A(!0):g(!0)},htmlType:"button",tooltip:{content:{side:"bottom",text:F?void 0:(0,n.jsx)("div",{className:"w-48 text-center",children:(0,n.jsx)("span",{children:"You need additional permissions to add new payment methods to this organization"})})}},children:"Add new"})]}),ti&&w&&(0,n.jsx)(eG.Elements,{stripe:ti,options:T,children:(0,n.jsx)(tr.S,{ref:S,email:null!=(a=null==m?void 0:m.billing_email)?a:void 0,readOnly:c})}),L&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(tl.A,{className:"h-10"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(tl.A,{className:"h-10"}),(0,n.jsx)(tl.A,{className:"h-10"})]}),(0,n.jsx)(tl.A,{className:"h-10"})]})]}),(0,n.jsx)(e9,{visible:h,returnUrl:"".concat((0,k.AP)(),"/org/").concat(null==m?void 0:m.slug,"/billing?panel=subscriptionPlan&source=paymentMethod"),onCancel:()=>g(!1),autoMarkAsDefaultPaymentMethod:!0,onConfirm:async()=>{var e;g(!1),R.oR.success("Successfully added new payment method");let{data:t}=await P();(null==t||null==(e=t.data)?void 0:e.length)&&l((null==t?void 0:t.data.reduce((e,t)=>e.created>t.created?e:t,t.data[0])).id)}})]})});to.displayName="PaymentMethodSelection";var td=a(23307);let tc=(0,eH.c)(ew.WS),tu=el.z.object({amount:el.z.coerce.number().gte(100,"Amount must be between $100 - $999.").lte(999,"Amount must be between $100 - $999.").int("Amount must be a whole number."),paymentMethod:el.z.string()}),tm=e=>{let{slug:t}=e,{resolvedTheme:a}=(0,ey.D)(),r=(0,H.jE)(),l=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.subscriptions"),i=(0,p.Lh)(),{mutateAsync:o,isLoading:d,error:c}=eY({}),m=(0,er.mN)({resolver:(0,es.u)(tu),defaultValues:{amount:100,paymentMethod:""}}),[x,h]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1),y=(0,eJ.F)(),[j,b]=(0,s.useState)(null),[w,N]=(0,s.useState)(null),C=(0,s.useCallback)(e=>{N(e)},[]),S=()=>{b(null),null==w||w.resetCaptcha()},_=async()=>{if(x&&w&&y){let t=j;try{if(!t){var e;let a=await w.execute({async:!0});t=null!=(e=null==a?void 0:a.response)?e:null,b(t)}}catch(e){}return t}};(0,s.useEffect)(()=>{_()},[x,w,y]);let[A,k]=(0,s.useState)(""),[I,E]=(0,s.useState)(),P=async e=>{let{amount:a,paymentMethod:n}=e;E(void 0);let s=await _();await o({slug:t,amount:a,payment_method_id:n,hcaptchaToken:s},{onSuccess:e=>{"succeeded"===e.status?z():k(e.payment_intent_secret||""),S()}})},M=(0,s.useMemo)(()=>({clientSecret:A,appearance:(0,e8.D)(a)}),[A,a]),D=e=>{h(e),e||(N(null),E(void 0),k(""))},L=e=>{var t;k(""),E(e),(null==(t=e.paymentIntent)?void 0:t.status)==="succeeded"&&z()},z=async()=>{D(!1),await r.invalidateQueries(eP.s.orgSubscription(t)),R.oR.success("Successfully topped up balance. It may take a minute to reflect in your account.")};return(0,n.jsx)("div",{className:"flex items-center justify-end py-4 px-8","data-sentry-component":"CreditTopUp","data-sentry-source-file":"CreditTopUp.tsx",children:(0,n.jsxs)(eK.lG,{open:x,onOpenChange:e=>D(e),"data-sentry-element":"Dialog","data-sentry-source-file":"CreditTopUp.tsx",children:[(0,n.jsx)(eK.zM,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"CreditTopUp.tsx",children:(0,n.jsx)(e$.G,{type:"default",className:"pointer-events-auto",disabled:!l||!i,tooltip:{content:{side:"bottom",text:i&&!l?"You need additional permissions to top up credits":void 0}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"CreditTopUp.tsx",children:"Top Up"})}),(0,n.jsxs)(eK.Cf,{onInteractOutside:e=>e.preventDefault(),"data-sentry-element":"DialogContent","data-sentry-source-file":"CreditTopUp.tsx",children:[(0,n.jsx)(eU.A,{ref:C,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onOpen:()=>{void 0!==document&&document.body.classList.add("!pointer-events-auto")},onClose:()=>{void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onVerify:e=>{b(e),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onExpire:()=>{b(null)},"data-sentry-element":"HCaptcha","data-sentry-source-file":"CreditTopUp.tsx"}),(0,n.jsxs)(eK.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"CreditTopUp.tsx",children:[(0,n.jsx)(eK.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"CreditTopUp.tsx",children:"Top Up Credits"}),(0,n.jsx)(eK.rr,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"CreditTopUp.tsx",children:"On successful payment, an invoice will be issued and you'll be granted credits. Credits will be applied to future invoices only and are not refundable. The topped up credits do not expire."})]}),(0,n.jsx)(eK.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"CreditTopUp.tsx"}),(0,n.jsx)(X.lV,{...m,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"CreditTopUp.tsx",children:(0,n.jsxs)("form",{id:"credit-top-up",onSubmit:m.handleSubmit(P),children:[(0,n.jsxs)(eK.OO,{className:"flex flex-col gap-2","data-sentry-element":"DialogSection","data-sentry-source-file":"CreditTopUp.tsx",children:[(0,n.jsx)(X.zB,{control:m.control,name:"amount",render:e=>{let{field:t}=e;return(0,n.jsx)(em.M,{label:"Amount (USD)",className:"gap-1",children:(0,n.jsx)(eu.p,{...t,type:"number",placeholder:"100"})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreditTopUp.tsx"}),(0,n.jsx)(X.zB,{control:m.control,name:"paymentMethod",render:()=>(0,n.jsx)(to,{createPaymentMethodInline:!1,onSelectPaymentMethod:e=>m.setValue("paymentMethod",e),selectedPaymentMethod:m.getValues("paymentMethod"),readOnly:d||g}),"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreditTopUp.tsx"}),(0,n.jsxs)("p",{className:"prose text-sm",children:["For larger discounted credit packages, please"," ",(0,n.jsx)(v(),{href:"/support/new?slug=".concat(t,"&subject=").concat(encodeURIComponent("I would like to inquire about larger credit packages"),"&category=").concat(u.S.SALES_ENQUIRY),target:"_blank","data-sentry-element":"Link","data-sentry-source-file":"CreditTopUp.tsx",children:"reach out."})]}),I&&I.error&&(0,n.jsxs)(eQ.Fc,{variant:"destructive",children:[(0,n.jsx)(eq.A,{className:"h-4 w-4"}),(0,n.jsx)(eQ.XL,{children:"Error confirming payment"}),(0,n.jsx)(eQ.TN,{children:I.error.message})]}),(null==I?void 0:I.paymentIntent)&&"processing"===I.paymentIntent.status&&(0,n.jsxs)(eQ.Fc,{variant:"default",children:[(0,n.jsx)(eV.A,{className:"h-4 w-4"}),(0,n.jsx)(eQ.XL,{children:"Payment processing"}),(0,n.jsx)(eQ.TN,{children:"Your payment is processing and we are waiting for a confirmation from your card issuer. If the payment goes through you'll automatically be credited. Please check back later."})]}),c&&(0,n.jsxs)(eQ.Fc,{variant:"destructive",children:[(0,n.jsx)(eq.A,{className:"h-4 w-4"}),(0,n.jsx)(eQ.XL,{children:"Error topping up balance"}),(0,n.jsx)(eQ.TN,{children:c.message})]})]}),!(null==I?void 0:I.paymentIntent)&&(0,n.jsx)(eK.Es,{children:(0,n.jsx)(Z.$,{htmlType:"submit",type:"primary",loading:d||g,children:"Top Up"})})]})}),tc&&A&&(0,n.jsx)(eG.Elements,{stripe:tc,options:M,children:(0,n.jsx)(td.i,{paymentIntentSecret:A,onPaymentIntentConfirm:e=>L(e),onLoadingChange:e=>f(e)})})]})]})})},tp=()=>{var e;let{slug:t}=(0,r.g)(),{isSuccess:a,can:s}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),{data:o,error:d,isLoading:c,isError:x,isSuccess:h}=(0,i.j5)({orgSlug:t},{enabled:s}),g=(null!=(e=null==o?void 0:o.customer_balance)?e:0)/100,f=g<0,y=g>0,v=f&&0!==g?g.toFixed(2).toString().replace("-",""):g.toFixed(2);return(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"CreditBalance","data-sentry-source-file":"CreditBalance.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"CreditBalance.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12 pr-3",children:[(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Credit Balance"})}),(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"Credits will be applied to future invoices, before charging your payment method. If your credit balance runs out, your default payment method will be charged."})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"CreditBalance.tsx",children:a&&!s?(0,n.jsx)(m.A,{resourceText:"view this organization's credits"}):(0,n.jsx)(eo.lB,{footer:(0,n.jsx)(tm,{slug:t}),children:(0,n.jsx)(ed.y9,{children:(0,n.jsxs)(ed.DE,{fullWidth:!0,loading:c,children:[x&&(0,n.jsx)(j.A,{subject:"Failed to retrieve organization customer profile",error:d}),h&&(0,n.jsxs)("div",{className:"flex w-full justify-between items-center",children:[(0,n.jsx)("span",{children:"Balance"}),(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[y&&(0,n.jsx)("h4",{className:"opacity-50",children:"-"}),(0,n.jsx)("h4",{className:"opacity-50",children:"$"}),(0,n.jsx)("h2",{className:"text-2xl relative",children:v}),f&&(0,n.jsx)("h4",{className:"opacity-50",children:"/credits"})]})]})]})})})})]})},tx=e=>{var t,a;let{selectedPaymentMethod:s,onClose:l}=e,{slug:i}=(0,r.g)(),{mutate:o,isLoading:d}=e2({onSuccess:()=>{R.oR.success("Successfully changed payment method to the card ending with ".concat(s.card.last4)),l()},onError:e=>{R.oR.error("Failed to change payment method: ".concat(e.message))}}),c=async()=>i?s?void o({slug:i,paymentMethodId:s.id}):console.error("Card ID is required"):console.error("Slug is required");return(0,n.jsx)(eX.A,{visible:void 0!==s,size:"medium",header:"Confirm to use payment method ending with ".concat(null==s||null==(t=s.card)?void 0:t.last4),onCancel:()=>l(),customFooter:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(Z.$,{type:"default",disabled:d,onClick:()=>l(),children:"Cancel"}),(0,n.jsx)(Z.$,{type:"primary",disabled:d,loading:d,onClick:c,children:"Confirm"})]}),"data-sentry-element":"Modal","data-sentry-component":"ChangePaymentMethodModal","data-sentry-source-file":"ChangePaymentMethodModal.tsx",children:(0,n.jsx)(eX.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"ChangePaymentMethodModal.tsx",children:(0,n.jsxs)("p",{className:"text-sm",children:["Upon clicking confirm, all future charges will be deducted from the card ending with"," ",null==s||null==(a=s.card)?void 0:a.last4,". There are no immediate charges."]})})})};var th=a(16826),tg=a(93511),tf=a(65863),ty=a(74115);let tv=e=>{var t,a,s,r;let{paymentMethod:l,canUpdatePaymentMethods:i=!0,paymentMethodType:o,subscriptionPlan:d,paymentMethodCount:c,setSelectedMethodForUse:u,setSelectedMethodToDelete:m}=e,p=l.is_default,x=!l.is_default||"free"===d&&1===c,h=null!=(s=null==(t=l.card)?void 0:t.exp_year)?s:0,g=null!=(r=null==(a=l.card)?void 0:a.exp_month)?r:0,f=new Date().getMonth()+1,y=new Date().getFullYear();return l.card?(0,n.jsxs)("div",{className:"flex items-center justify-between gap-8","data-sentry-component":"CreditCard","data-sentry-source-file":"CreditCard.tsx",children:[(0,n.jsxs)("div",{className:"flex items-center gap-8",children:[(0,n.jsx)("img",{alt:"Credit card brand",src:"".concat(ew.o2,"/img/payment-methods/").concat(l.card.brand.replace(" ","-").toLowerCase(),".png"),width:"32"}),(0,n.jsxs)("p",{className:"prose text-sm font-mono",children:["**** **** **** ",l.card.last4]}),(0,n.jsxs)("p",{className:"text-sm tabular-nums",children:["Expires: ",l.card.exp_month,"/",l.card.exp_year]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[h===y&&g===f&&(0,n.jsx)(tf.E,{variant:"warning",children:"Expiring soon"}),(h<y||h===y&&g<f)&&(0,n.jsx)(tf.E,{variant:"destructive",children:"Expired"}),p&&(0,n.jsx)(tf.E,{variant:"brand",children:"Active"}),i&&(0,n.jsxs)(ty.rI,{children:[(0,n.jsx)(ty.ty,{asChild:!0,children:(0,n.jsx)(Z.$,{type:"outline",className:"hover:border-muted px-1",icon:(0,n.jsx)(th.A,{}),"aria-label":"More options"})}),(0,n.jsxs)(ty.SQ,{align:"end",className:"w-36",children:["card"===o&&!p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ty._2,{onClick:()=>null==u?void 0:u(l),children:(0,n.jsx)("p",{children:"Use this card"})},"make-default"),(0,n.jsx)(ty.mB,{})]}),(0,n.jsx)(tg.x,{disabled:!x,className:"!pointer-events-auto",onClick:()=>null==m?void 0:m(l),tooltip:{content:{side:"left",text:x?void 0:"Unable to delete a card that is currently active"}},children:(0,n.jsx)("p",{children:"Delete card"})},"delete-method")]})]})]})]},l.id):null};async function tj(e){let{slug:t,cardId:a}=e,{data:n,error:s}=await (0,C.yH)("/platform/organizations/{slug}/payments",{body:{card_id:a},params:{path:{slug:t}}});return s&&(0,C.H4)(s),n}let tb=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,H.jE)();return(0,q.n)(e=>tj(e),{async onSuccess(t,a,s){let{slug:r}=a;await n.invalidateQueries(O.O.paymentMethods(r)),await (null==e?void 0:e(t,a,s))},async onError(e,a,n){void 0===t?R.oR.error("Failed to delete payment method: ".concat(e.message)):t(e,a,n)},...a})};var tw=a(10406);let tN=e=>{var t;let{selectedPaymentMethod:a,onClose:s}=e,{slug:l}=(0,r.g)(),{mutate:i,isLoading:o}=tb({onSuccess:()=>{var e;R.oR.success("Successfully removed payment method ending with ".concat(null==a||null==(e=a.card)?void 0:e.last4)),s()}}),d=async()=>l?a?void i({slug:l,cardId:a.id}):console.error("Card ID is required"):console.error("Slug is required");return(0,n.jsx)(eX.A,{visible:void 0!==a,size:"medium",header:"Confirm to delete payment method ending with ".concat(null==a||null==(t=a.card)?void 0:t.last4),onCancel:()=>s(),customFooter:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(Z.$,{type:"default",disabled:o,onClick:()=>s(),children:"Cancel"}),(0,n.jsx)(Z.$,{type:"primary",disabled:o,loading:o,onClick:d,children:"Confirm"})]}),"data-sentry-element":"Modal","data-sentry-component":"DeletePaymentMethodModal","data-sentry-source-file":"DeletePaymentMethodModal.tsx",children:(0,n.jsx)(eX.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"DeletePaymentMethodModal.tsx",children:(0,n.jsx)(tw.Z,{type:"default",title:"This will permanently delete your payment method.",description:"You can re-add the payment method any time.","data-sentry-element":"Admonition","data-sentry-source-file":"DeletePaymentMethodModal.tsx"})})})},tC=()=>{var e,t,a;let{slug:o}=(0,r.g)(),c=(0,d.a)(),[x,h]=(0,s.useState)(),[g,f]=(0,s.useState)(),[y,w]=(0,s.useState)(!1),{data:N}=(0,i.j5)({orgSlug:o}),{data:C,error:S,isLoading:_,isError:A,isSuccess:I}=te({slug:o}),{isSuccess:E,can:P}=(0,p.hl)(u.aG.BILLING_READ,"stripe.payment_methods"),M=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.payment_methods");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"PaymentMethods.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"PaymentMethods.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Payment Methods"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light mb-2 pr-4 m-0",children:"Payments for your subscription are made using the default card."})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"PaymentMethods.tsx",children:(null==c?void 0:c.managed_by)!==void 0&&(null==c?void 0:c.managed_by)!=="supabase"?(0,n.jsx)(B.A,{partner:null==c?void 0:c.managed_by,resource:"Payment Methods",cta:{installationId:null==c?void 0:c.partner_id}}):E&&!P?(0,n.jsx)(m.A,{resourceText:"view this organization's payment methods"}):(0,n.jsxs)(n.Fragment,{children:[_&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),A&&(0,n.jsx)(j.A,{subject:"Failed to retrieve payment methods",error:S}),I&&(0,n.jsxs)(n.Fragment,{children:[(null==N?void 0:N.payment_method_type)==="invoice"&&(0,n.jsx)(eA.F,{withIcon:!0,variant:"info",title:"Payment is currently by invoice",actions:[(0,n.jsx)(Z.$,{asChild:!0,type:"default",children:(0,n.jsx)(v(),{href:"/support/new?category=billing&subject=Request%20to%20change%20payment%20method",target:"_blank",rel:"noreferrer",className:"ml-3",children:"Contact support"})},"payment-method-support")],children:"You get a monthly invoice and payment link via email. To change your payment method, please contact us via our support form."}),(0,n.jsx)(eo.lB,{footer:(0,n.jsxs)("div",{className:"flex items-center justify-between py-4 px-8",children:[M?(0,n.jsx)("div",{}):(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"You need additional permissions to manage payment methods"}),(0,n.jsx)(Z.$,{type:"default",icon:(0,n.jsx)(tn.A,{}),disabled:!M,onClick:()=>w(!0),children:"Add new card"})]}),children:(0,n.jsx)(ed.y9,{children:(0,n.jsx)(ed.DE,{fullWidth:!0,loading:!1,children:(null!=(a=null==C||null==(e=C.data)?void 0:e.length)?a:0)===0?(0,n.jsxs)("div",{className:"flex items-center gap-2 opacity-50",children:[(0,n.jsx)(ta,{size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm",children:"No payment methods"})]}):(0,n.jsx)("div",{className:"space-y-3",children:null==C||null==(t=C.data)?void 0:t.map(e=>{var t;return(0,n.jsx)(tv,{paymentMethod:e,canUpdatePaymentMethods:M,paymentMethodType:null==N?void 0:N.payment_method_type,setSelectedMethodForUse:h,setSelectedMethodToDelete:f,paymentMethodCount:null!=(t=null==C?void 0:C.data.length)?t:0,subscriptionPlan:null==N?void 0:N.plan.id},e.id)})})})})})]})]})})]}),(0,n.jsx)(e9,{visible:y,returnUrl:"".concat((0,k.AP)(),"/org/").concat(o,"/billing"),onCancel:()=>w(!1),onConfirm:()=>{w(!1),R.oR.success("Successfully added new payment method")},showSetDefaultCheckbox:!0,"data-sentry-element":"AddNewPaymentMethodModal","data-sentry-source-file":"PaymentMethods.tsx"}),(0,n.jsx)(tx,{selectedPaymentMethod:x,onClose:()=>h(void 0),"data-sentry-element":"ChangePaymentMethodModal","data-sentry-source-file":"PaymentMethods.tsx"}),(0,n.jsx)(tN,{selectedPaymentMethod:g,onClose:()=>f(void 0),"data-sentry-element":"DeletePaymentMethodModal","data-sentry-source-file":"PaymentMethods.tsx"})]})};var tS=a(24602),t_=a(33312),tA=a.n(t_),tk=a(44679),tI=a(47504),tE=a(99592),tP=a(92230);async function tM(e){let{organizationSlug:t,tier:a}=e;if(!t)throw Error("organizationSlug is required");if(!a)throw Error("tier is required");let{data:n,error:s}=await (0,C.bE)("/platform/organizations/{slug}/billing/subscription/preview",{params:{path:{slug:t}},body:{tier:a},headers:{Version:"2"}});return s&&(0,C.H4)(s),n}let tD=function(e){let{organizationSlug:t,tier:a}=e,{enabled:n=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,N.I)(O.O.subscriptionPreview(t,a),()=>tM({organizationSlug:t,tier:a}),{enabled:n&&void 0!==t&&void 0!==a,...s,retry:(e,t)=>("object"!=typeof t||null===t||!("code"in t)||400!==t.code)&&e<3})};async function tL(e,t){var a;let{slug:n}=e;if(!n)throw Error("Organization slug is required");let{data:s,error:r}=await (0,C.Jt)("/platform/organizations/{slug}",{params:{path:{slug:n}},signal:t});return r&&(0,C.H4)(r),{...s,billing_email:null!=(a=s.billing_email)?a:"Unknown",managed_by:s.slug.startsWith("vercel_icfg_")?"vercel-marketplace":"supabase",partner_id:s.slug.startsWith("vercel_")?s.slug.replace("vercel_",""):void 0}}let tz=function(e){let{slug:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,N.I)(O.O.detail(t),e=>{let{signal:a}=e;return tL({slug:t},a)},{enabled:a&&void 0!==t,...n,staleTime:18e5})};var tF=a(84438);async function tT(e,t){let{orgSlug:a}=e;if(!a)throw Error("orgSlug is required");let{error:n,data:s}=await (0,C.Jt)("/platform/organizations/{slug}/billing/plans",{params:{path:{slug:a}},signal:t});return n&&(0,C.H4)(n),s}let tR=function(e){let{orgSlug:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,p.SE)(u.aG.BILLING_READ,"stripe.subscriptions");return(0,N.I)(eP.s.orgPlans(t),e=>{let{signal:a}=e;return tT({orgSlug:t},a)},{enabled:a&&void 0!==t&&s,...n})};var tB=a(64652),tO=a(72990),tU=a(72486),tG=a(26928);let tH=e=>{let{projectAddon:t}=e,a=t.addons.find(e=>"compute_instance"===e.type),s=t.addons.filter(e=>!["log_drain","auth_mfa_phone"].includes(e.type)).map(e=>"compute_instance"===e.type?"".concat(e.variant.name," Compute Instance"):e.variant.name);return(0,n.jsxs)("li",{className:"list-disc ml-6","data-sentry-component":"ProjectDowngradeListItem","data-sentry-source-file":"DowngradeModal.tsx",children:[t.name,": ",s.join(", ")," will be removed.",a?(0,n.jsxs)(n.Fragment,{children:[" ","Project will also ",(0,n.jsx)("span",{className:"font-bold",children:"need to be restarted"})," due to change in compute instance"]}):""]})},tq=e=>{var t;let{visible:a,subscription:r,onClose:l,onConfirm:i,projects:o}=e,d=(0,s.useMemo)(()=>tO.vw.find(e=>"tier_free"===e.id),[]),c=(null==r?void 0:r.project_addons.flatMap(e=>{let t=e.addons.filter(e=>"ci_micro"!==e.variant.identifier);return t.length?{...e,addons:t}:[]}))||[],u=o.some(e=>"micro"===e.infra_compute_size);return(0,n.jsx)(eX.A,{size:"large",alignFooter:"right",variant:"warning",visible:a,onCancel:l,onConfirm:i,header:"Confirm to downgrade to ".concat(null==d?void 0:d.name," plan"),"data-sentry-element":"Modal","data-sentry-component":"DowngradeModal","data-sentry-source-file":"DowngradeModal.tsx",children:(0,n.jsxs)(eX.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"DowngradeModal.tsx",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(tw.Z,{type:"warning",title:"Downgrading to the Free Plan will lead to reductions in your organization's quota",description:"If you're already past the limits of the Free Plan, your projects could become unresponsive or enter read only mode.","data-sentry-element":"Admonition","data-sentry-source-file":"DowngradeModal.tsx"}),((null!=(t=c.length)?t:0)>0||u)&&(0,n.jsx)(tw.Z,{type:"warning",title:"Projects affected by the downgrade",children:(0,n.jsxs)("ul",{className:"space-y-1 max-h-[100px] overflow-y-auto",children:[c.map(e=>(0,n.jsx)(tH,{projectAddon:e},e.ref)),o.filter(e=>"micro"===e.infra_compute_size).map(e=>(0,n.jsxs)("li",{className:"list-disc ml-6",children:[e.name,": Compute will be downgraded. Project will also"," ",(0,n.jsx)("span",{className:"font-bold",children:"need to be restarted"}),"."]},e.ref))]})})]}),(0,n.jsxs)("ul",{className:"mt-4 space-y-5 text-sm",children:[(0,n.jsxs)("li",{className:"flex items-center gap-3",children:[(0,n.jsx)(tU.A,{size:18,"data-sentry-element":"PauseCircle","data-sentry-source-file":"DowngradeModal.tsx"}),(0,n.jsx)("span",{children:"Projects will be paused after a week of inactivity"})]}),(0,n.jsxs)("li",{className:"flex items-center gap-3 mb-2",children:[(0,n.jsx)(tG.A,{size:18,"data-sentry-element":"MinusCircle","data-sentry-source-file":"DowngradeModal.tsx"}),(0,n.jsx)("span",{children:"Add ons from all projects under this organization will be removed."})]}),(0,n.jsx)("li",{className:"flex gap-3",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("strong",{children:["Before you downgrade to the ",null==d?void 0:d.name," plan, consider:"]}),(0,n.jsxs)("ul",{className:"space-y-2 mt-2",children:[(0,n.jsx)("li",{className:"list-disc ml-6 text-foreground-light",children:"Your projects no longer require their respective add ons."}),(0,n.jsxs)("li",{className:"list-disc ml-6 text-foreground-light",children:["Your resource consumption are well within the ",null==d?void 0:d.name," plan's quota."]}),(0,n.jsx)("li",{className:"list-disc ml-6 text-foreground-light",children:"Alternatively, you may also transfer projects across organizations."})]})]})})]}),(null==r?void 0:r.billing_via_partner)===!0&&"fly"===r.billing_partner&&(0,n.jsx)("p",{className:"mt-4 text-sm",children:"Your organization will be downgraded at the end of your current billing cycle."})]})})},tV=e=>{let{plan:t,isCurrentPlan:a,billingPartner:s}=e,r=(0,d.a)(),l=null==r?void 0:r.slug,i=(0,tO.DW)(t,s),o=null==r?void 0:r.plan.name,{mutate:u}=(0,tB.h)();return(0,n.jsxs)("div",{className:(0,c.cn)("grid grid-cols-1 md:grid-cols-3 border rounded-md bg-studio","py-4 col-span-12 justify-between gap-x-8"),"data-sentry-component":"EnterpriseCard","data-sentry-source-file":"EnterpriseCard.tsx",children:[(0,n.jsxs)("div",{className:"flex flex-col justify-center px-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("p",{className:(0,c.cn)("text-brand text-sm uppercase"),children:t.name}),a?(0,n.jsx)("div",{className:"text-xs bg-surface-300 text-foreground-light rounded px-2 py-0.5",children:"Current plan"}):t.nameBadge?(0,n.jsx)("div",{className:"text-xs bg-surface-200 text-brand rounded px-2 py-0.5",children:t.nameBadge}):null]}),(0,n.jsx)("p",{className:"text-sm mt-2 mb-4",children:t.description}),(0,n.jsx)(Z.$,{block:!0,asChild:!0,type:"default",size:"tiny",onClick:()=>u({action:"studio_pricing_plan_cta_clicked",properties:{selectedPlan:"Enterprise",currentPlan:o},groups:{organization:null!=l?l:"Unknown"}}),"data-sentry-element":"Button","data-sentry-source-file":"EnterpriseCard.tsx",children:(0,n.jsx)("a",{href:t.href,className:"hidden md:block",target:"_blank",children:t.cta})})]}),(0,n.jsxs)("div",{className:"flex flex-col justify-center col-span-2 px-4 md:px-0",children:[(0,n.jsx)("ul",{role:"list",className:"text-xs text-foreground-light md:grid md:grid-cols-2 md:gap-x-10",children:i.map(e=>(0,n.jsxs)("li",{className:"flex items-center py-2 first:mt-0",children:[(0,n.jsx)(tk.A,{className:"text-brand h-4 w-4","aria-hidden":"true",strokeWidth:3}),(0,n.jsx)("span",{className:"text-foreground mb-0 ml-3 ",children:"string"==typeof e?e:e[0]})]},"string"==typeof e?e:e[0]))}),(0,n.jsx)(Z.$,{block:!0,asChild:!0,type:"default",size:"tiny",onClick:()=>u({action:"studio_pricing_plan_cta_clicked",properties:{selectedPlan:"Enterprise",currentPlan:o},groups:{organization:null!=l?l:"Unknown"}}),"data-sentry-element":"Button","data-sentry-source-file":"EnterpriseCard.tsx",children:(0,n.jsx)("a",{href:t.href,className:"visible md:hidden mt-8",target:"_blank",children:t.cta})})]})]},t.id)};var t$=a(75588),tW=a(5179),tY=a(16988);let tJ=e=>{let{visible:t,projects:a,onClose:l}=e,{slug:i}=(0,r.g)(),[o,d]=(0,s.useState)(""),[u,m]=(0,s.useState)([]),p=(0,eb._)("disableProjectCreationAndUpdate"),{mutate:x,isLoading:h}=eD({onError:e=>{R.oR.error("Failed to downgrade project: ".concat(e.message))}}),{mutateAsync:g,isLoading:f}=(0,tW.$)(),y=h||f,v=a.filter(e=>"nano"!==e.infra_compute_size),j=v.length>0,[b]=(0,s.useState)(()=>[...t$.U.sort(()=>Math.random()-.5),{value:"None of the above"}]),w=e=>{m([e])},N=(e=>{let t=t$.U.find(t=>t.value===e);return(null==t?void 0:t.label)||"What can we improve on?"})(u[0]),C=async()=>{if(0===u.length)return R.oR.error("Please select a reason for canceling your subscription");await S()},S=async()=>{if(!i)return console.error("Slug is required");x({slug:i,tier:"tier_free"},{onSuccess:async()=>{try{await g({orgSlug:i,reasons:u.reduce((e,t)=>"".concat(e,"- ").concat(t,"\n"),""),message:o,exitAction:"downgrade"})}catch(e){}finally{R.oR.success(j?"Successfully downgraded organization to the Free Plan. Your projects are currently restarting to update their compute instances.":"Successfully downgraded organization to the Free Plan",{duration:j?8e3:4e3}),l(!0),window.scrollTo({top:0,left:0,behavior:"smooth"})}}})};return(0,n.jsxs)(eX.A,{hideFooter:!0,size:"xlarge",visible:t,onCancel:l,header:"Help us improve","data-sentry-element":"Modal","data-sentry-component":"ExitSurveyModal","data-sentry-source-file":"ExitSurveyModal.tsx",children:[(0,n.jsx)(eX.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"ExitSurveyModal.tsx",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Share with us why you're downgrading your plan."}),(0,n.jsxs)("div",{className:"space-y-8 mt-6",children:[(0,n.jsx)("div",{className:"flex flex-wrap gap-2","data-toggle":"buttons",children:b.map(e=>{let t=u[0]===e.value;return(0,n.jsxs)("label",{className:(0,c.cn)("flex cursor-pointer items-center space-x-2 rounded-md py-1","pl-2 pr-3 text-center text-sm","shadow-sm transition-all duration-100",t?"bg-foreground text-background opacity-100 hover:bg-opacity-75":"bg-border-strong text-foreground opacity-75 hover:opacity-100"),children:[(0,n.jsx)("input",{type:"radio",name:"options",value:e.value,className:"hidden",checked:t,onChange:()=>w(e.value)}),(0,n.jsx)("div",{children:e.value})]},e.value)})}),(0,n.jsxs)("div",{className:"text-area-text-sm flex flex-col gap-y-2",children:[(0,n.jsx)("label",{className:"text-sm whitespace-pre-line break-words",children:N}),(0,n.jsx)(tY.A.TextArea,{id:"message",name:"message",value:o,onChange:e=>d(e.target.value),rows:3,"data-sentry-element":"unknown","data-sentry-source-file":"ExitSurveyModal.tsx"})]})]}),j&&(0,n.jsxs)(eA.F,{withIcon:!0,variant:"warning",title:"".concat(v.length," of your projects will be restarted upon clicking confirm,"),children:["This is due to changes in compute instances from the downgrade. Affected projects include ",v.map(e=>e.name).join(", "),"."]})]})}),(0,n.jsxs)("div",{className:"flex items-center justify-between border-t px-4 py-4",children:[(0,n.jsx)("p",{className:"text-xs text-foreground-lighter",children:"The unused amount for the remaining time of your billing cycle will be refunded as credits"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(Z.$,{type:"default",onClick:()=>l(),"data-sentry-element":"Button","data-sentry-source-file":"ExitSurveyModal.tsx",children:"Cancel"}),(0,n.jsx)(ek.A,{projectUpdateDisabled:p,"data-sentry-element":"ProjectUpdateDisabledTooltip","data-sentry-source-file":"ExitSurveyModal.tsx",children:(0,n.jsx)(Z.$,{type:"danger",className:"pointer-events-auto",loading:y,disabled:p||y,onClick:C,"data-sentry-element":"Button","data-sentry-source-file":"ExitSurveyModal.tsx",children:"Confirm downgrade"})})]})]})]})},tK=e=>{let{visible:t,onClose:a}=e,s=(0,d.a)(),r=null==s?void 0:s.slug,{data:l}=(0,tP.A)({slug:r},{enabled:t});return(0,n.jsxs)(eX.A,{hideFooter:!0,visible:t,size:"medium",header:"Your organization has members who have exceeded their free project limits",onCancel:a,"data-sentry-element":"Modal","data-sentry-component":"MembersExceedLimitModal","data-sentry-source-file":"MembersExceedLimitModal.tsx",children:[(0,n.jsx)(eX.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"MembersExceedLimitModal.tsx",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"The following members have reached their maximum limits for the number of active free plan projects within organizations where they are an administrator or owner:"}),(0,n.jsx)("ul",{className:"pl-5 text-sm list-disc text-foreground-light",children:(l||[]).map((e,t)=>(0,n.jsxs)("li",{children:[e.username||e.primary_email," (Limit: ",e.free_project_limit," free projects)"]},"member-".concat(t)))}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"These members will need to either delete, pause, or upgrade one or more of these projects before you're able to downgrade this project."})]})}),(0,n.jsx)(eX.A.Separator,{"data-sentry-element":"unknown","data-sentry-source-file":"MembersExceedLimitModal.tsx"}),(0,n.jsx)(eX.A.Content,{className:"flex items-center gap-2","data-sentry-element":"unknown","data-sentry-source-file":"MembersExceedLimitModal.tsx",children:(0,n.jsx)(Z.$,{htmlType:"button",type:"default",onClick:a,block:!0,"data-sentry-element":"Button","data-sentry-source-file":"MembersExceedLimitModal.tsx",children:"Understood"})})]})};var tQ=a(33008),tX=a(59084);let tZ=()=>{var e;let[t,a]=(0,s.useState)(!1),[r,l]=(0,s.useState)(!1),{slug:i}=null!=(e=(0,d.a)())?e:{},o=(0,p.SE)(u.aG.BILLING_READ,"stripe.customer"),c=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.customer"),{data:x,error:h,isLoading:g,isSuccess:f}=G({slug:i},{enabled:o}),{data:y,error:v,isLoading:w,isSuccess:N}=Y({slug:i}),C=(0,s.useMemo)(()=>{var e;return{...null==x?void 0:x.address,billing_name:null==x?void 0:x.billing_name,tax_id_type:null==y?void 0:y.type,tax_id_value:null==y?void 0:y.value,tax_id_name:y&&(null==(e=et.X.find(e=>e.type===y.type&&e.countryIso2===y.country))?void 0:e.name)||""}},[x,y]),{mutateAsync:S}=$(),{mutateAsync:_}=K(),{form:A,handleSubmit:k,handleReset:I,isDirty:E}=(0,ea.x)({initialCustomerData:C,onCustomerDataChange:async e=>{l(!0);try{var t;await S({slug:i,address:null!=(t=e.address)?t:void 0,billing_name:e.billing_name}),await _({slug:i,taxId:e.tax_id}),R.oR.success("Successfully updated billing data"),a(!1),l(!1)}catch(e){R.oR.error("Failed updating billing data: ".concat(e.message)),l(!1)}}}),P=!E||!c||r;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(e3.J,{htmlFor:"billing-address-btn",className:"text-foreground-light block mb-0","data-sentry-element":"Label","data-sentry-source-file":"BillingCustomerDataExistingOrgDialog.tsx",children:"Billing Address / Tax Id"}),o?(0,n.jsxs)(n.Fragment,{children:[(g||w)&&(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsx)(b.A,{})}),(h||v)&&(0,n.jsx)(j.A,{subject:"Failed to retrieve organization customer profile",error:h||v}),f&&N&&(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("p",{className:"text-xs text-foreground",children:(()=>{var e,t,a,n,s;return(null==x||null==(e=x.address)?void 0:e.line1)?[null==x?void 0:x.billing_name,null==x||null==(t=x.address)?void 0:t.line1,null==x||null==(a=x.address)?void 0:a.city,null==x||null==(n=x.address)?void 0:n.state,null==x||null==(s=x.address)?void 0:s.country].filter(Boolean).join(", "):"Optionally add a billing address"})()}),(0,n.jsx)(Z.$,{id:"billing-address-btn",onClick:()=>a(!0),type:"text","aria-label":"Edit",size:"tiny",className:"w-8 h-8 p-0 text-foreground-light",disabled:!c,children:(0,n.jsx)(tX.A,{size:14,strokeWidth:1.5})})]})]}):(0,n.jsx)(m.A,{resourceText:"view this organization's billing address"})]}),(0,n.jsx)(eK.lG,{open:t,onOpenChange:e=>{e?a(!0):a(!1)},"data-sentry-element":"Dialog","data-sentry-source-file":"BillingCustomerDataExistingOrgDialog.tsx",children:(0,n.jsxs)(eK.Cf,{size:"large","data-sentry-element":"DialogContent","data-sentry-source-file":"BillingCustomerDataExistingOrgDialog.tsx",children:[(0,n.jsxs)(eK.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"BillingCustomerDataExistingOrgDialog.tsx",children:[(0,n.jsx)(eK.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"BillingCustomerDataExistingOrgDialog.tsx",children:"Billing Address & Tax Id"}),(0,n.jsx)(eK.rr,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"BillingCustomerDataExistingOrgDialog.tsx",children:"This will be reflected in every upcoming invoice, past invoices are not affected"})]}),(0,n.jsx)(eK.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"BillingCustomerDataExistingOrgDialog.tsx"}),(0,n.jsx)(X.lV,{...A,"data-sentry-element":"Form","data-sentry-source-file":"BillingCustomerDataExistingOrgDialog.tsx",children:(0,n.jsxs)("form",{onSubmit:A.handleSubmit(k),children:[(0,n.jsx)(ee.M,{className:"p-5",form:A,disabled:!c,"data-sentry-element":"BillingCustomerDataForm","data-sentry-source-file":"BillingCustomerDataExistingOrgDialog.tsx"}),(0,n.jsxs)(eK.Es,{className:"justify-end","data-sentry-element":"DialogFooter","data-sentry-source-file":"BillingCustomerDataExistingOrgDialog.tsx",children:[!c&&(0,n.jsx)("span",{className:"text-sm text-foreground-lighter",children:"You need additional permissions to manage this organization's billing address"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(Z.$,{type:"default",onClick:()=>{I(),a(!1)},"data-sentry-element":"Button","data-sentry-source-file":"BillingCustomerDataExistingOrgDialog.tsx",children:"Cancel"}),(0,n.jsx)(Z.$,{type:"primary",htmlType:"submit",disabled:P,loading:r,"data-sentry-element":"Button","data-sentry-source-file":"BillingCustomerDataExistingOrgDialog.tsx",children:"Save"})]})]})]})})]})})]})};async function t0(e){let{payment_intent_id:t,slug:a}=e;if(!a)throw Error("Organization slug is required to confirm pending subscription change");let{data:n,error:s}=await (0,C.bE)("/platform/organizations/{slug}/billing/subscription/confirm",{params:{path:{slug:a}},body:{payment_intent_id:t}});return s&&(0,C.H4)(s),n}let t1=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,H.jE)();return(0,q.n)(e=>t0(e),{async onSuccess(t,a,s){let{slug:r}=a;await new Promise(e=>setTimeout(e,2e3)),await Promise.all([n.invalidateQueries(eP.s.orgSubscription(r)),n.invalidateQueries(eP.s.orgPlans(r)),n.invalidateQueries(eE.E.orgUsage(r)),n.invalidateQueries(S.x.orgUpcomingPreview(r)),n.invalidateQueries(O.O.detail(r)),n.invalidateQueries(O.O.list()),n.invalidateQueries(O.O.paymentMethods(r))]),await (null==e?void 0:e(t,a,s))},async onError(e,a,n){void 0===t?R.oR.error(e.message,{dismissible:!0,duration:1e4}):t(e,a,n)},...a})},t2=(0,eH.c)(ew.WS),t4=()=>{let e=tQ.A.filter(e=>e.text.length<180),t=Math.floor(Math.random()*e.length);return e[t]},t3={tier_pro:"the Pro plan to unlock unlimited projects, daily backups, and email support whenever you need it",tier_team:"the Team plan for SOC2, SSO, priority support and greater data and log retention",default:"to a new plan"},t5={tier_free:"the Free plan with limited resources and active projects",tier_pro:"the Pro plan",default:"to a lower plan"},t8=e=>{var t,a,r,l,i,o,c,u,m,p,x,h,g,f;let{selectedTier:y,onClose:w,planMeta:N,subscriptionPreviewError:C,subscriptionPreviewIsLoading:S,subscriptionPreviewInitialized:_,subscriptionPreview:A,subscription:E,currentPlanMeta:M,projects:D}=e,{resolvedTheme:L}=(0,ey.D)(),z=(0,d.a)(),[F,T]=(0,s.useState)(),[B,O]=(0,s.useState)(null),[U,G]=(0,s.useState)(!1),H=(0,s.useRef)(null),q=(null==E?void 0:E.billing_via_partner)===!0,V=null==E?void 0:E.billing_partner,$=(0,s.useMemo)(()=>({clientSecret:B,appearance:(0,e8.D)(L)}),[B,L]),W=(0,s.useMemo)(()=>t4(),[]),Y=(0,s.useMemo)(()=>{var e;return(0,tE.O8)(null==E||null==(e=E.plan)?void 0:e.id,null==N?void 0:N.id)},[N,E]),J=(0,s.useMemo)(()=>tO.vw.find(e=>e.id===y),[y]),K=()=>{R.oR.success("Successfully ".concat("downgrade"===Y?"downgraded":"upgraded"," subscription to ").concat(null==J?void 0:J.name,"!")),w(),window.scrollTo({top:0,left:0,behavior:"smooth"})},{mutate:Q,isLoading:X}=eD({onSuccess:e=>{if(e.pending_payment_intent_secret)return void O(e.pending_payment_intent_secret);K()},onError:e=>{R.oR.error("Unable to update subscription: ".concat(e.message))}}),{mutate:ee,isLoading:et}=t1({onSuccess:()=>{K()},onError:e=>{R.oR.error("Unable to update subscription: ".concat(e.message))}}),ea=async e=>{var t;O(""),(null==(t=e.paymentIntent)?void 0:t.status)==="succeeded"?await ee({slug:null==z?void 0:z.slug,payment_intent_id:e.paymentIntent.id}):(G(!1),R.oR.error("Could not confirm payment. Please try again or use a different card."))},en=async()=>{var e,t;if(!(null==z?void 0:z.slug))return console.error("org slug is required");if(!y)return console.error("Selected plan is required");let a=await (null==(e=H.current)?void 0:e.createPaymentMethod());if(a&&T(a.id),!a&&(null==E?void 0:E.payment_method_type)!=="invoice"&&"upgrade"===Y)return;let n=(null==E||null==(t=E.plan)?void 0:t.id)==="team"&&y===ew.V$.PRO?ew.V$.PAYG:y;Q({slug:null==z?void 0:z.slug,tier:n,paymentMethod:null==a?void 0:a.id})},es=(null==J||null==(a=J.features)||null==(t=a[0])?void 0:t.features)||[],er=(null==M||null==(l=M.features)||null==(r=l[0])?void 0:r.features)||[],el="downgrade"===Y?er.filter(e=>{let t="string"==typeof e?e:e[0];return!es.some(e=>("string"==typeof e?e:e[0])===t)}):[],ei=Math.floor(Date.now()/1e3),eo=(null==E?void 0:E.current_period_end)-ei,ed=(null==E?void 0:E.current_period_end)-(null==E?void 0:E.current_period_start),ec=(null!=(m=null==M?void 0:M.price)?m:0)*(eo/ed),eu=null!=(p=Number(null==J?void 0:J.priceMonthly))?p:0,em=-((null!=(x=null==E?void 0:E.customer_balance)?x:0)/100*1),ep=Math.max(0,eu-ec-em);return(0,n.jsx)(eK.lG,{open:void 0!==y&&"tier_free"!==y,onOpenChange:e=>{X||U||et||e||w()},"data-sentry-element":"Dialog","data-sentry-component":"SubscriptionPlanUpdateDialog","data-sentry-source-file":"SubscriptionPlanUpdateDialog.tsx",children:(0,n.jsxs)(eK.Cf,{onOpenAutoFocus:e=>e.preventDefault(),size:"xlarge",className:"p-0 overflow-y-auto max-h-[1000px]","data-sentry-element":"DialogContent","data-sentry-source-file":"SubscriptionPlanUpdateDialog.tsx",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 h-full items-stretch",children:[(0,n.jsxs)("div",{className:"p-8 pb-8 flex flex-col xl:col-span-3",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("h3",{className:"text-base mb-4",children:["downgrade"===Y?"Downgrade":"Upgrade"," ",(0,n.jsx)("span",{className:"font-bold",children:null==z?void 0:z.name})," to"," ","downgrade"===Y?t5[y||"default"]:t3[y||"default"]]}),S&&(0,n.jsxs)("div",{className:"space-y-2 mb-4 mt-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),_&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"mt-2 mb-4 text-foreground-light text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b border-muted",children:[(0,n.jsxs)("div",{className:"py-2 pl-0 flex items-center gap-1",children:[(0,n.jsxs)("span",{children:[null==J?void 0:J.name," Plan"]}),(0,n.jsx)(tf.E,{variant:"brand",size:"small",className:"ml-1",children:"New"})]}),(0,n.jsx)("div",{className:"py-2 pr-0 text-right",translate:"no",children:(0,k.vv)(eu)})]}),(null==E||null==(i=E.plan)?void 0:i.id)!=="free"&&(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b border-muted",children:[(0,n.jsxs)("div",{className:"py-2 pl-0 flex items-center gap-1",children:[(0,n.jsxs)("span",{children:["Unused Time on ",null==E||null==(o=E.plan)?void 0:o.name," Plan"]}),(0,n.jsx)(P.I,{className:"max-w-sm",children:"Your previous plan was charged upfront, so a plan change will prorate any unused time in credits. If the prorated credits exceed the new plan charge, the excessive credits are added to your organization for future use."})]}),(0,n.jsxs)("div",{className:"py-2 pr-0 text-right",translate:"no",children:["-",(0,k.vv)(ec)]})]}),em>0&&(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b border-muted",children:[(0,n.jsxs)("div",{className:"py-2 pl-0 flex items-center gap-1",children:[(0,n.jsx)("span",{children:"Credits"}),(0,n.jsx)(P.I,{children:"Credits will be used first before charging your card."})]}),(0,n.jsx)("div",{className:"py-2 pr-0 text-right",translate:"no",children:(0,k.vv)(em)})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b border-muted text-foreground",children:[(0,n.jsx)("div",{className:"py-2 pl-0",children:"Charge today"}),(0,n.jsxs)("div",{className:"py-2 pr-0 text-right",translate:"no",children:[(0,k.vv)(ep),(null==E||null==(c=E.plan)?void 0:c.id)!=="free"&&(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(v(),{href:"/org/".concat(null==z?void 0:z.slug,"/billing#breakdown"),className:"text-sm text-brand hover:text-brand-600 transition",target:"_blank",children:"+ current spend"})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 text-foreground-lighter text-xs",children:[(0,n.jsxs)("div",{className:"py-2 pl-0 flex items-center gap-1",children:[(0,n.jsx)("span",{children:"Monthly invoice estimate"}),(0,n.jsx)(P.I,{side:"right",children:(0,n.jsxs)("div",{className:"w-[520px] p-6",children:[(0,n.jsx)("h3",{className:"text-base font-medium mb-2",children:"Your new monthly invoice"}),(0,n.jsxs)("p",{className:"prose text-xs mb-2",children:["Each paid project runs on a dedicated 24/7 server. First project uses Compute Credits; additional ones cost ",(0,n.jsx)("span",{translate:"no",children:"$10+"}),"/month regardless of usage."," ",(0,n.jsx)(v(),{href:"/docs/guides/platform/manage-your-usage/compute",target:"_blank",children:"Learn more"}),"."]}),C&&(0,n.jsx)(j.A,{error:C,subject:"Failed to preview subscription."}),S&&(0,n.jsxs)("div",{className:"space-y-2 p-6",children:[(0,n.jsx)("span",{className:"text-sm",children:"Estimating monthly costs..."}),(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),_&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(I.XI,{className:"[&_tr:last-child]:border-t font-mono text-xs",children:(0,n.jsxs)(I.BF,{children:[(()=>{var e,t,a,s,r,l;let i=(null==A||null==(e=A.breakdown)?void 0:e.filter(e=>{var t;return(null==(t=e.description)?void 0:t.toLowerCase().includes("compute"))&&e.breakdown&&e.breakdown.length>0}))||[],o=null!=(r=null==A||null==(t=A.breakdown)?void 0:t.find(e=>e.description.startsWith("Compute Credits")))?r:null,d=null==A||null==(a=A.breakdown)?void 0:a.find(e=>{var t;return null==(t=e.description)?void 0:t.toLowerCase().includes("plan")}),c=i.flatMap(e=>(e.breakdown||[]).map(t=>({...t,computeType:e.description,computeCosts:Math.round(e.total_price/e.breakdown.length)}))),u=(null==A||null==(s=A.breakdown)?void 0:s.filter(e=>{var t,a;return!(null==(t=e.description)?void 0:t.toLowerCase().includes("compute"))&&!(null==(a=e.description)?void 0:a.toLowerCase().includes("plan"))}))||[];return(0,n.jsxs)(n.Fragment,{children:[c.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(I.Hj,{className:"text-foreground-light",children:[(0,n.jsx)(I.nA,{className:"!py-2 px-0",children:null==d?void 0:d.description}),(0,n.jsx)(I.nA,{className:"text-right py-2 px-0",translate:"no",children:(0,k.vv)(null==d?void 0:d.total_price)})]}),(0,n.jsxs)(I.Hj,{className:"text-foreground-light",children:[(0,n.jsx)(I.nA,{className:"!py-2 px-0 flex items-center gap-1",children:(0,n.jsx)("span",{children:"Compute"})}),(0,n.jsx)(I.nA,{className:"text-right py-2 px-0",translate:"no",children:(0,k.vv)(i.reduce((e,t)=>e+t.total_price,0)+(null!=(l=null==o?void 0:o.total_price)?l:0))})]}),c.map(e=>(0,n.jsx)(I.Hj,{className:"text-foreground-light",children:(0,n.jsxs)(I.nA,{className:"!py-2 px-0 pl-6",translate:"no",children:[e.project_name," (",e.computeType,") |"," ",(0,k.vv)(e.computeCosts)]})},e.project_ref)),o&&(0,n.jsx)(I.Hj,{className:"text-foreground-light",children:(0,n.jsxs)(I.nA,{className:"!py-2 px-0 pl-6",translate:"no",children:["Compute Credits |"," ",(0,k.vv)(o.total_price)]})})]}),u.map(e=>{var t;return(0,n.jsxs)(I.Hj,{className:"text-foreground-light",children:[(0,n.jsx)(I.nA,{className:"text-xs py-2 px-0",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{children:null!=(t=e.description)?t:"Unknown"}),e.breakdown&&e.breakdown.length>0&&(0,n.jsxs)(P.I,{className:"max-w-sm",children:[(0,n.jsxs)("p",{children:["Projects using ",e.description,":"]}),(0,n.jsx)("ul",{className:"ml-6 list-disc",children:e.breakdown.map(t=>(0,n.jsx)("li",{children:t.project_name},"".concat(e.description,"-breakdown-").concat(t.project_ref)))})]})]})}),(0,n.jsx)(I.nA,{className:"text-right text-xs py-2 px-0",translate:"no",children:(0,k.vv)(e.total_price)})]},e.description)})]})})(),(0,n.jsxs)(I.Hj,{children:[(0,n.jsx)(I.nA,{className:"font-medium py-2 px-0",children:"Total per month (excluding other usage)"}),(0,n.jsx)(I.nA,{className:"text-right font-medium py-2 px-0",translate:"no",children:(0,k.vv)(null!=(g=Math.round(null!=(h=null==A||null==(u=A.breakdown)?void 0:u.reduce((e,t)=>e+t.total_price,0))?h:0))?g:0)})]})]})})})]})})]}),(0,n.jsx)("div",{className:"py-2 pr-0 text-right",translate:"no",children:(0,k.vv)(Math.round(null!=(f=null==A?void 0:A.breakdown.reduce((e,t)=>e+t.total_price,0))?f:0))})]})]})})]}),(0,n.jsxs)("div",{className:"pt-4",children:[!q&&null!=A&&"upgrade"===Y&&(0,n.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,n.jsx)(tZ,{}),(0,n.jsx)(to,{ref:H,selectedPaymentMethod:F,onSelectPaymentMethod:e=>T(e),createPaymentMethodInline:!0,readOnly:U||et||X})]}),q&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("p",{className:"text-sm",children:["This organization is billed through our partner"," ",(0,tE.mS)(V),"."," ","aws"===V?(0,n.jsx)(n.Fragment,{children:"The organization's credit balance will be decreased accordingly."}):(0,n.jsx)(n.Fragment,{children:"You will be charged by them directly."})]}),q&&"fly"===V&&(null==A?void 0:A.plan_change_type)==="downgrade"&&(0,n.jsx)("p",{className:"text-sm",children:"Your organization will be downgraded at the end of your current billing cycle."})]}),0===D.filter(e=>e.status===ew.BU.ACTIVE_HEALTHY||e.status===ew.BU.COMING_UP).length&&(null==A?void 0:A.plan_change_type)!=="downgrade"&&(0,n.jsx)("div",{className:"pb-2",children:(0,n.jsx)(tw.Z,{title:"Empty organization",type:"warning",children:"This organization has no active projects. Did you select the correct organization?"})}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(Z.$,{type:"default",size:"medium",onClick:w,className:"flex-1","data-sentry-element":"Button","data-sentry-source-file":"SubscriptionPlanUpdateDialog.tsx",children:"Cancel"}),(0,n.jsxs)(Z.$,{loading:X||U||et,disabled:S,type:"primary",onClick:en,className:"flex-1",size:"medium","data-sentry-element":"Button","data-sentry-source-file":"SubscriptionPlanUpdateDialog.tsx",children:["Confirm ","downgrade"===Y?"downgrade":"upgrade"]})]})]})]}),(0,n.jsxs)("div",{className:"bg-surface-100 p-8 flex flex-col border-l xl:col-span-2",children:["downgrade"===Y?el.length>0&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm mb-1",children:"Features you'll lose"}),(0,n.jsx)("p",{className:"text-xs text-foreground-light mb-4",children:"Please review carefully before downgrading."}),(0,n.jsx)("div",{className:"space-y-2 mb-4 text-foreground-light",children:el.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-4",children:(0,n.jsx)(eV.A,{className:"h-3 w-3 text-amber-900",strokeWidth:3})}),(0,n.jsx)("p",{className:"text-sm",children:"string"==typeof e?e:e[0]})]},"string"==typeof e?e:e[0]))})]}):es.length>0&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm mb-4",children:"Upgrade features"}),(0,n.jsx)("div",{className:"space-y-2 mb-4 text-foreground-light",children:es.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-4",children:(0,n.jsx)(tk.A,{className:"h-3 w-3 text-brand",strokeWidth:3})}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("p",{children:"string"==typeof e?e:e[0]}),Array.isArray(e)&&e.length>1&&(0,n.jsx)("p",{className:"text-foreground-lighter text-xs",children:e[1]})]})]},"string"==typeof e?e:e[0]))})]}),"downgrade"!==Y&&(0,n.jsx)("div",{className:"border-t pt-6",children:(0,n.jsxs)("blockquote",{className:"text-sm text-foreground-light italic",children:[W.text,(0,n.jsxs)("div",{className:"mt-2 text-foreground",children:["— @",W.handle]})]})})]})]}),t2&&B&&(0,n.jsx)(eG.Elements,{stripe:t2,options:$,children:(0,n.jsx)(td.i,{paymentIntentSecret:B,onPaymentIntentConfirm:e=>ea(e),onLoadingChange:e=>G(e)})})]})})};var t6=a(86926),t9=a.n(t6),t7=a(37253),ae=a.n(t7);async function at(e){let{orgSlug:t,prevPlan:a,currentPlan:n,reasons:s,message:r}=e,{data:l,error:i}=await (0,C.bE)("/platform/feedback/upgrade",{body:{...void 0!==t&&{orgSlug:t},...void 0!==a&&{prevPlan:a},...void 0!==n&&{currentPlan:n},reasons:s,...void 0!==r&&{additionalFeedback:r}}});return i&&(0,C.H4)(i),l}let aa=function(){let{onError:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,q.n)(e=>at(e),{async onError(t,a,n){void 0===e?R.oR.error("Failed to submit upgrade survey: ".concat(t.message)):e(t,a,n)},...t})},an=e=>{let{visible:t,originalPlan:a,subscription:l,onClose:i}=e,{slug:o}=(0,r.g)(),[d,c]=(0,s.useState)(""),[u,m]=(0,s.useReducer)(function(e,t){return t9()(e,t.target.value)?ae()(e,t.target.value):[...e,t.target.value]},[]),p=(0,E.bg)(a,null==l?void 0:l.plan.id),{mutate:x,isLoading:h}=aa({onError:e=>{R.oR.error("Failed to submit survey: ".concat(e.message))},onSuccess:()=>{i(!0),window.scrollTo({top:0,left:0,behavior:"smooth"})}}),g=async()=>{var e;if(0===u.length)return R.oR.error("Please select at least one reason for upgrading your subscription");x({orgSlug:o,prevPlan:a,currentPlan:null==l||null==(e=l.plan)?void 0:e.id,reasons:u,message:d.trim()||void 0})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(eX.A,{alignFooter:"right",size:"xlarge",loading:h,visible:t,onCancel:i,onConfirm:g,cancelText:"Skip",header:"We're excited for your upgrade","data-sentry-element":"Modal","data-sentry-source-file":"UpgradeModal.tsx",children:(0,n.jsxs)(eX.A.Content,{className:"space-y-4","data-sentry-element":"unknown","data-sentry-source-file":"UpgradeModal.tsx",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"What reasons motivated your decision to upgrade? Your feedback helps us improve Supabase as much as we can."}),(0,n.jsxs)("div",{className:"space-y-8 mt-6",children:[(0,n.jsx)("div",{className:"flex flex-wrap gap-2","data-toggle":"buttons",children:p.map(e=>{let t=u.find(t=>t===e);return(0,n.jsxs)("label",{className:"\n                      flex cursor-pointer items-center space-x-2 rounded-md py-1 \n                      pl-2 pr-3 text-center text-sm\n                      shadow-sm transition-all duration-100\n                      ".concat(t?" bg-foreground text-background opacity-100 hover:bg-opacity-75":" bg-border-strong text-foreground opacity-25 hover:opacity-50","\n                  "),children:[(0,n.jsx)("input",{type:"checkbox",name:"options",value:e,className:"hidden",onClick:m}),(0,n.jsx)("div",{children:e})]},e)})}),(0,n.jsx)("div",{className:"text-area-text-sm",children:(0,n.jsx)(tY.A.TextArea,{id:"message",name:"message",value:d,onChange:e=>c(e.target.value),label:"Anything else that we can improve on?","data-sentry-element":"unknown","data-sentry-source-file":"UpgradeModal.tsx"})})]})]})})})},as=()=>{var e,t;let a=(0,tI.useRouter)(),r=(0,d.a)(),l=null==r?void 0:r.slug,{mutate:o}=(0,tB.h)(),m=(0,s.useRef)(),[x,h]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),[j,w]=(0,s.useState)(),N=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.subscriptions"),{data:C}=(0,tF.el)(),S=(C||[]).filter(e=>e.organization_id===(null==r?void 0:r.id)),{data:_}=tz({slug:l}),A=!!(null==_?void 0:_.has_oriole_project),I=e_(),E="subscriptionPlan"===I.panelKey,P=()=>{let{panel:e,...t}=a.query;a.push({pathname:a.pathname,query:t},void 0,{shallow:!0}),I.setPanelKey(void 0)},{data:M,isSuccess:D}=(0,i.j5)({orgSlug:l}),{data:L,isLoading:z}=tR({orgSlug:l}),{data:F}=(0,tP.A)({slug:l}),T=null==M?void 0:M.billing_partner,{data:R,error:O,isLoading:U,isSuccess:G}=tD({tier:j,organizationSlug:l}),H=null!=(t=null==L?void 0:L.plans)?t:[],q=(F||[]).length>0&&S.filter(e=>"INACTIVE"!==e.status&&"GOING_DOWN"!==e.status).length>0;(0,s.useEffect)(()=>{if(E){var e;w(void 0);let t=Array.isArray(a.query.source)?a.query.source[0]:a.query.source,n={currentPlan:null==M||null==(e=M.plan)?void 0:e.name};t&&(n.origin=t),o({action:"studio_pricing_side_panel_opened",properties:n,groups:{organization:null!=l?l:"Unknown"}})}},[E]),(0,s.useEffect)(()=>{E&&D&&(m.current=M.plan.id)},[E,D]);let V=j?H.find(e=>e.id===j.split("tier_")[1]):null;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(ez.Ay,{hideFooter:!0,size:"xxlarge",visible:E,onCancel:()=>P(),header:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("h4",{children:["Change subscription plan for ",null==r?void 0:r.name]}),(0,n.jsx)(Z.$,{asChild:!0,type:"default",icon:(0,n.jsx)(ef.A,{}),children:(0,n.jsx)("a",{href:"https://supabase.com/pricing",target:"_blank",rel:"noreferrer",children:"Pricing"})})]}),"data-sentry-element":"SidePanel","data-sentry-source-file":"PlanUpdateSidePanel.tsx",children:[(null==r?void 0:r.managed_by)==="vercel-marketplace"&&(0,n.jsx)(B.A,{partner:null==r?void 0:r.managed_by,resource:"Organization plans",cta:{installationId:null==r?void 0:r.partner_id,path:"/settings",message:"Change Plan on Vercel Marketplace"}}),(0,n.jsx)(ez.Ay.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"PlanUpdateSidePanel.tsx",children:(0,n.jsx)("div",{className:"py-6 grid grid-cols-12 gap-3",children:tO.vw.map(e=>{var t,a,s,i;let d=H.find(t=>t.id===e.id.split("tier_")[1]),u=null!=(i=null==d?void 0:d.price)?i:0,m="downgrade"===(0,tE.O8)(null==M?void 0:M.plan.id,null==e?void 0:e.planId),p=(null==d?void 0:d.id)===(null==M||null==(t=M.plan)?void 0:t.id),x=(0,tO.DW)(e,T),h=(0,tO.Rr)(e,T);return"tier_enterprise"===e.id?(0,n.jsx)(tV,{plan:e,isCurrentPlan:p,billingPartner:T},e.id):(0,n.jsxs)("div",{className:(0,c.cn)("px-4 py-4 flex flex-col items-start justify-between","border rounded-md col-span-12 md:col-span-4 bg-surface-200"),children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("p",{className:"text-brand text-sm uppercase",children:e.name}),p?(0,n.jsx)("div",{className:"text-xs bg-surface-300 text-foreground-light rounded px-2 py-0.5",children:"Current plan"}):e.nameBadge?(0,n.jsx)("div",{className:"text-xs bg-brand-400 text-brand-600 rounded px-2 py-0.5",children:e.nameBadge}):null]}),(0,n.jsxs)("div",{className:"mt-4 flex items-center space-x-1 mb-4",children:[(null!=u?u:0)>0&&(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"From"}),z?(0,n.jsx)("div",{className:"h-[28px] flex items-center justify-center",children:(0,n.jsx)(b.A,{className:"w-[30px] h-[24px]"})}):(0,n.jsx)("p",{className:"text-foreground text-lg",translate:"no",children:(0,k.vv)(u)}),(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:e.costUnit})]}),p?(0,n.jsx)(Z.$,{block:!0,disabled:!0,type:"default",children:"Current plan"}):(0,n.jsxs)(e$.G,{block:!0,type:m?"default":"primary",disabled:(null==M||null==(a=M.plan)?void 0:a.id)==="enterprise"||(null==r?void 0:r.managed_by)!=="supabase"&&"tier_free"!==e.id||A||!N,onClick:()=>{var t;w(e.id),o({action:"studio_pricing_plan_cta_clicked",properties:{selectedPlan:e.name,currentPlan:null==M||null==(t=M.plan)?void 0:t.name},groups:{organization:null!=l?l:"Unknown"}})},tooltip:{content:{side:"bottom",className:A?"w-96 text-center":"",text:(null==M||null==(s=M.plan)?void 0:s.id)==="enterprise"?"Reach out to us via support to update your plan from Enterprise":A?"Your organization has projects that are using the OrioleDB extension which is only available on the Free plan. Remove all OrioleDB projects before changing your plan.":N?void 0:"You do not have permission to change the subscription plan"}},children:[m?"Downgrade":"Upgrade"," to ",e.name]}),(0,n.jsx)("div",{className:"border-t my-4"}),(0,n.jsx)("ul",{role:"list",children:x.map(e=>(0,n.jsxs)("li",{className:"flex py-2",children:[(0,n.jsx)("div",{className:"w-[12px]",children:(0,n.jsx)(tk.A,{className:"h-3 w-3 text-brand translate-y-[2.5px]","aria-hidden":"true",strokeWidth:3})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"ml-3 text-xs text-foreground-light",children:"string"==typeof e?e:e[0]}),tA()(e)&&(0,n.jsx)("p",{className:"ml-3 text-xs text-foreground-lighter",children:e[1]})]})]},"string"==typeof e?e:e[0]))})]}),h&&(0,n.jsx)("div",{className:"border-t pt-4 mt-4",children:(0,n.jsx)("p",{className:"text-foreground-light text-xs",children:h})})]},e.id)})})})]}),(0,n.jsx)(tq,{visible:"tier_free"===j,subscription:M,onClose:()=>w(void 0),onConfirm:()=>{w(void 0),q?v(!0):h(!0)},projects:S,"data-sentry-element":"DowngradeModal","data-sentry-source-file":"PlanUpdateSidePanel.tsx"}),(0,n.jsx)(t8,{selectedTier:j,onClose:()=>w(void 0),planMeta:V,subscriptionPreviewError:O,subscriptionPreviewIsLoading:U,subscriptionPreviewInitialized:G,subscriptionPreview:R,subscription:M,projects:S,currentPlanMeta:{...H.find(e=>{var t;return e.id===(null==M||null==(t=M.plan)?void 0:t.id)}),features:(null==(e=tO.vw.find(e=>{var t;return e.id==="tier_".concat(null==M||null==(t=M.plan)?void 0:t.id)}))?void 0:e.features)||[]},"data-sentry-element":"SubscriptionPlanUpdateDialog","data-sentry-source-file":"PlanUpdateSidePanel.tsx"}),(0,n.jsx)(tK,{visible:y,onClose:()=>v(!1),"data-sentry-element":"MembersExceedLimitModal","data-sentry-source-file":"PlanUpdateSidePanel.tsx"}),(0,n.jsx)(tJ,{visible:x,projects:S,onClose:e=>{h(!1),e&&P()},"data-sentry-element":"ExitSurveyModal","data-sentry-source-file":"PlanUpdateSidePanel.tsx"}),(0,n.jsx)(an,{visible:g,originalPlan:m.current,subscription:M,onClose:e=>{f(!1),e&&P()},"data-sentry-element":"UpgradeSurveyModal","data-sentry-source-file":"PlanUpdateSidePanel.tsx"})]})},ar=()=>{var e,t,a;let{slug:s}=(0,r.g)(),o=e_(),d=(0,eb._)("disableProjectCreationAndUpdate"),{isSuccess:c,can:x}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),{data:h,error:g,isLoading:f,isError:y,isSuccess:w}=(0,i.j5)({orgSlug:s},{enabled:x}),N=null==h?void 0:h.plan,C=null!=(e=null==N?void 0:N.name)?e:"Unknown",S=!d&&!["enterprise"].includes(null!=(t=null==N?void 0:N.id)?t:"");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"Subscription.tsx",children:[(0,n.jsx)("div",{className:"col-span-12 pb-2",children:(0,n.jsx)(tS.R,{"data-sentry-element":"Restriction","data-sentry-source-file":"Subscription.tsx"})}),(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"Subscription.tsx",children:(0,n.jsx)("div",{className:"sticky space-y-6 top-12",children:(0,n.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Subscription Plan"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"Each organization has it's own subscription plan, billing cycle, payment methods and usage quotas."})]})})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"Subscription.tsx",children:c&&!x?(0,n.jsx)(m.A,{resourceText:"view this organization's subscription"}):(0,n.jsxs)(n.Fragment,{children:[f&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),y&&(0,n.jsx)(j.A,{subject:"Failed to retrieve subscription",error:g}),w&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("p",{className:"text-2xl text-brand",children:[null!=(a=null==N?void 0:N.name)?a:"Unknown"," Plan"]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(ek.A,{projectUpdateDisabled:d,children:(0,n.jsx)(Z.$,{type:"default",className:"pointer-events-auto",disabled:!S,onClick:()=>o.setPanelKey("subscriptionPlan"),children:"Change subscription plan"})}),!S&&(d?(0,n.jsx)(eA.F,{className:"mt-2",withIcon:!0,variant:"info",title:"Unable to update plan from ".concat(C),children:"We have temporarily disabled project and subscription changes - our engineers are working on a fix."}):(0,n.jsx)(eA.F,{withIcon:!0,className:"mt-2",variant:"info",title:"Unable to update plan from ".concat(C),actions:[(0,n.jsx)("div",{children:(0,n.jsx)(Z.$,{asChild:!0,type:"default",children:(0,n.jsx)(v(),{href:"/support/new?category=sales&subject=Change%20plan%20away%20from%20".concat(C),children:"Contact support"})})},"contact-support")],children:"Please contact us if you'd like to change your plan."}))]}),!(null==h?void 0:h.usage_billing_enabled)&&(0,n.jsx)(tw.Z,{type:"default",title:"This organization is limited by the included usage",children:(0,n.jsxs)("div",{className:"[&>p]:!leading-normal prose text-sm",children:["Projects may become unresponsive when this organization exceeds its"," ",(0,n.jsx)(v(),{href:"/org/".concat(s,"/usage"),children:"included usage quota"}),". To scale seamlessly,"," ",(null==N?void 0:N.id)==="free"?"upgrade to a paid plan.":"you can disable Spend Cap under the Cost Control settings."]})})]})]})})]}),(0,n.jsx)(as,{"data-sentry-element":"PlanUpdateSidePanel","data-sentry-source-file":"Subscription.tsx"})]})},al=()=>{let{billingAccountData:e,billingPaymentMethods:t,billingCredits:a,billingInvoices:s}=(0,o.x)(["billing:account_data","billing:payment_methods","billing:credits","billing:invoices"]),r=(0,d.a)(),{data:u}=(0,i.j5)({orgSlug:null==r?void 0:r.slug}),m=!(null==u?void 0:u.billing_via_partner),p=e&&m,x=t&&m;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"BillingSettings.tsx",children:(0,n.jsx)(l.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"BillingSettings.tsx",children:"Billing"})}),(0,n.jsx)(l.eh,{id:"subscription",className:(0,c.cn)("[&>div]:!pt-0"),"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"BillingSettings.tsx",children:(0,n.jsx)(ar,{"data-sentry-element":"Subscription","data-sentry-source-file":"BillingSettings.tsx"})}),(0,n.jsx)(l.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"BillingSettings.tsx"}),(0,n.jsx)(l.eh,{id:"cost-control","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"BillingSettings.tsx",children:(0,n.jsx)(eO,{"data-sentry-element":"CostControl","data-sentry-source-file":"BillingSettings.tsx"})}),(0,n.jsx)(l.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"BillingSettings.tsx"}),(null==r?void 0:r.plan.id)!=="free"&&(0,n.jsx)(l.eh,{id:"breakdown",children:(0,n.jsx)(T,{})}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"invoices",children:(0,n.jsx)(h,{})})]}),x&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"payment-methods",children:(0,n.jsx)(tC,{})})]}),a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"credits-balance",children:(0,n.jsx)(tp,{})})]}),p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"email",children:(0,n.jsx)(eg,{})}),(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"address",children:(0,n.jsx)(en,{})})]})]})};var ai=a(1053),ao=a(93931),ad=a(99187);let ac=()=>{let{panel:e}=(0,r.g)(),t=e_();return(0,s.useEffect)(()=>{if(e&&"string"==typeof e&&["subscriptionPlan","costControl"].includes(e)){var a;t.setPanelKey(e),null==(a=document.getElementById("billing-page-top"))||a.scrollIntoView({behavior:"smooth"})}},[e]),(0,n.jsx)(al,{"data-sentry-element":"BillingSettings","data-sentry-component":"OrgBillingSettings","data-sentry-source-file":"billing.tsx"})};ac.getLayout=e=>(0,n.jsx)(ai.A,{children:(0,n.jsx)(ao.A,{children:(0,n.jsx)(ad.A,{children:e})})});let au=ac},33548:(e,t,a)=>{var n=a(91272),s=Math.max;e.exports=function(e,t,a){return t=s(void 0===t?e.length-1:t,0),function(){for(var r=arguments,l=-1,i=s(r.length-t,0),o=Array(i);++l<i;)o[l]=r[t+l];l=-1;for(var d=Array(t+1);++l<t;)d[l]=r[l];return d[t]=a(o),n(e,this,d)}}},33999:e=>{e.exports=function(e){return function(){return e}}},34962:(e,t,a)=>{"use strict";a.d(t,{xf:()=>g,sD:()=>j,Oe:()=>w,DG:()=>b,hw:()=>f});var n=a(80263),s=a(62763),r=a(27452),l=a(44679),i=a(53239),o=a(79279),d=a(21514),c=a(51859),u=a(65863),m=a(36141);let p=i.createContext(null),x=(0,c.cn)("relative text-foreground-lighter text-left px-2 py-1.5 rounded","hover:text-foreground hover:!bg-overlay-hover w-full flex items-center space-x-2","peer-data-[value=true]:bg-overlay-hover peer-data-[value=true]:text-strong");function h(){let e=i.useContext(p);if(!e)throw Error("useMultiSelect must be used within a MultiSelectProvider");return e}function g(e){var t;let{values:a=[],onValuesChange:s,disabled:r,dir:l,size:o,className:d,children:u,...x}=e,h=i.useRef(null),[g,f]=i.useState(!1),[y,v]=i.useState(""),[j,b]=i.useState(-1),w=i.useCallback(e=>{a.includes(e)?s(a.filter(t=>t!==e)||[]):s([...a,e])},[a]);t=()=>{g&&f(!g)},(0,i.useEffect)(()=>{let e=e=>{!h.current||h.current.contains(e.target)||t(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[h,t]);let N=i.useCallback(e=>{switch(e.key){case"Backspace":case"Delete":a.length>0&&0===y.length&&(-1!==j&&j<a.length?(s(a.filter(e=>e!==a[j])),b(j-1<0?0:j-1)):s(a.filter(e=>e!==a[a.length-1])));break;case"Escape":if(-1!==j?b(-1):f(!1),h.current){let e=h.current.querySelector('button[role="combobox"]');e&&e.focus()}break;case"Enter":f(!0)}},[a,y,j]);return(0,n.jsx)(p.Provider,{value:{values:a,toggleValue:w,onValuesChange:s,open:g,setOpen:f,inputValue:y,setInputValue:v,activeIndex:j,setActiveIndex:b,size:o||"small",disabled:r},"data-sentry-element":"unknown","data-sentry-component":"MultiSelector","data-sentry-source-file":"multi-select.tsx",children:(0,n.jsx)(m.uB,{ref:h,onKeyDown:N,className:(0,c.cn)("relative w-auto overflow-visible bg-transparent flex flex-col",d),dir:l,...x,"data-sentry-element":"Command","data-sentry-source-file":"multi-select.tsx",children:u})})}(0,o.F)("",{variants:{size:{...d.vs}},defaultVariants:{size:d.FE}});let f=i.forwardRef((e,t)=>{let{label:a,persistLabel:l=!1,className:o,deletableBadge:d=!0,badgeLimit:m=9999,showIcon:p=!0,mode:x="combobox",children:g,...f}=e,{activeIndex:y,values:j,setInputValue:b,toggleValue:w,disabled:N,setOpen:C}=h(),S=i.useRef(null);i.useImperativeHandle(t,()=>S.current);let _=i.useRef(null),A=i.useRef(null),[k,I]=i.useState([]),[E,P]=i.useState(0),[M,D]=i.useState(!1),L="wrap"===m,z="number"==typeof m,F="inline-combobox"===x;i.useEffect(()=>{(null==S?void 0:S.current)&&A.current&&(L?(I(j),P(0)):(I(j.slice(0,m)),P(Math.max(0,j.length-m))))},[j,m]);let T="rounded shrink-0 px-1.5",R=i.useCallback(e=>{C(!0),b(""),F&&(e.stopPropagation(),e.preventDefault(),setTimeout(()=>{var e;null==(e=_.current)||e.focus()},100))},[]);return(0,n.jsxs)("button",{ref:S,onClick:e=>!M&&R(e),disabled:N,type:"button",role:"combobox",className:(0,c.cn)("flex w-full min-w-[200px] min-h-[40px] items-center justify-between rounded-md border","border-alternative bg-foreground/[.026] px-3 py-2 text-sm","ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","hover:border-primary transition-colors duration-200",o),...f,children:[(0,n.jsxs)("div",{ref:A,className:(0,c.cn)("flex gap-1 -ml-1 overflow-hidden flex-1",L&&"flex-wrap",!L&&"overflow-x-auto scrollbar-thin scrollbar-track-transparent transition-colors scrollbar-thumb-muted-foreground dark:scrollbar-thumb-muted scrollbar-thumb-rounded-lg"),children:[k.map(e=>(0,n.jsxs)(u.E,{className:T,children:[e,d&&(0,n.jsx)("div",{onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),onClick:t=>{t.stopPropagation(),w(e),D(!1)},className:"ml-1 text-foreground-lighter hover:text-foreground-light transition-colors pointer-events-auto",children:(0,n.jsx)(s.A,{size:12})})]},e)),E>0&&(0,n.jsx)(u.E,{className:T,children:z&&m<1?"".concat(E," item").concat(E>1?"s":""," selected"):"+".concat(E)}),(0,n.jsx)("span",{className:(0,c.cn)("text-foreground-muted whitespace-nowrap leading-[1.375rem] ml-1 opacity-0 transition-opacity hidden",!F&&(l||0===j.length)&&"opacity-100 visible inline"),children:a}),F&&(0,n.jsx)(v,{ref:_,showSearchIcon:!1,onValueChange:-1===y?b:void 0,placeholder:a,autoFocus:!1,wrapperClassName:(0,c.cn)("px-0 flex-1 border-none truncate",L&&"min-w-[85px]"),className:"py-0 px-1 truncate"})]}),p&&(0,n.jsx)(r.A,{size:16,strokeWidth:2,className:"text-foreground-lighter shrink-0 ml-1.5"})]})});f.displayName="MultiSelectorTrigger",g.Trigger=f;let y=(0,o.F)("bg-control border",{variants:{size:{...d.vs}},defaultVariants:{size:d.FE}}),v=i.forwardRef((e,t)=>{let{className:a,wrapperClassName:s,showResetIcon:r,showSearchIcon:l,...o}=e,{open:d,setOpen:u,inputValue:p,setInputValue:x,activeIndex:g,setActiveIndex:f,size:v,disabled:j}=h(),b=i.useRef(null);i.useImperativeHandle(t,()=>b.current);let w=()=>{setTimeout(()=>{(null==b?void 0:b.current)&&d&&b.current.focus()},100)};return(0,i.useEffect)(()=>{if(w(),!d){var e;null==(e=b.current)||e.blur()}},[d]),(0,n.jsx)(m.G7,{ref:b,value:p,onValueChange:-1===g?x:void 0,onFocus:()=>u(!0),onClick:()=>f(-1),tabIndex:d?0:-1,disabled:j,showSearchIcon:l,showResetIcon:r,handleReset:()=>{x(""),w()},wrapperClassName:s,className:(0,c.cn)(y({size:v}),"text-sm bg-transparent h-full flex-grow border-none outline-none placeholder:text-foreground-muted flex-1",-1!==g&&"caret-transparent",a),...o})});v.displayName="MultiSelectorInput",g.Input=v;let j=i.forwardRef((e,t)=>{let{className:a,children:s}=e,{open:r}=h();return(0,n.jsx)("div",{ref:t,className:(0,c.cn)("absolute w-full bg-overlay shadow-md z-10 border border-overlay top-[calc(100%+0.25rem)] rounded-md transition-all -translate-y-3",r?"opacity-100 translate-y-0 visible duration-150 ease-[.76,0,.23,1]":"opacity-0 -translate-y-3 invisible duration-0",a),children:r&&s})});j.displayName="MultiSelectorContent",g.Content=j;let b=i.forwardRef((e,t)=>{let{className:a,children:s,creatable:r=!1}=e,{open:l,inputValue:i,setInputValue:o,toggleValue:d}=h(),u=s?Array.isArray(s)?s:"object"==typeof s&&"props"in s?s.props.children:[]:[],p=u.filter(e=>!!e.props.value).map(e=>e.props.value.toLowerCase()).some(e=>e===i.toLowerCase());return(0,n.jsxs)(m.oI,{ref:t,className:(0,c.cn)("p-2 flex flex-col gap-2 scrollbar-thin scrollbar-track-transparent transition-colors","scrollbar-thumb-muted-foreground dark:scrollbar-thumb-muted","scrollbar-thumb-rounded-lg w-full max-h-[300px] overflow-y-auto",a),children:[s,r&&i.length>0&&!p?(0,n.jsxs)(m.h_,{role:"option",onSelect:()=>{l&&d(i),o("")},className:x,children:['Create "',i,'"']}):r&&0===u.length?(0,n.jsx)("div",{className:"p-2 py-1.5 text-xs text-foreground-lighter font-italic",children:"Type to add a value"}):(0,n.jsx)(m.xL,{children:(0,n.jsx)("span",{className:"text-foreground-muted",children:"No results found"})})]})});b.displayName="MultiSelectorList",g.List=b;let w=i.forwardRef((e,t)=>{let{className:a,value:s,children:r,...i}=e,{values:o,setInputValue:d,toggleValue:u,open:p}=h(),g=o.includes(s);return(0,n.jsxs)(m.h_,{ref:t,tabIndex:p?0:-1,role:"option",onSelect:()=>{p&&u(s),d("")},className:(0,c.cn)(x,a),...i,children:[(0,n.jsx)("div",{className:(0,c.cn)("flex items-center justify-center","peer h-4 w-4 shrink-0 rounded border border-control bg-control/25 ring-offset-background","transition-colors duration-150 ease-in-out","hover:border-strong","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-foreground data-[state=checked]:text-background",g?"bg-foreground text-background":"[&_svg]:invisible"),children:(0,n.jsx)(l.A,{className:"h-3 w-3",strokeWidth:4})}),(0,n.jsx)("div",{className:"text-xs flex-grow leading-none pointer-events-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:pointer-events-none peer-disabled:opacity-50",children:r})]})});w.displayName="MultiSelectorItem",g.Item=w},35212:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>d});var n=a(80263),s=a(39383);a(53239);var r=a(71126),l=a(16632),i=a(16865);let o=e=>{let{id:t,disabled:a,className:o,children:d,header:c,visible:u,open:m,size:p="medium",loading:x,align:h="right",hideFooter:g=!1,customFooter:f,onConfirm:y,onCancel:v,confirmText:j="Confirm",cancelText:b="Cancel",triggerElement:w,defaultOpen:N,tooltip:C,...S}=e,_=(0,i.A)("sidepanel"),A=f||(0,n.jsxs)("div",{className:_.footer,children:[(0,n.jsx)("div",{children:(0,n.jsx)(r.$,{disabled:x,type:"default",onClick:()=>v?v():null,children:b})}),void 0!==y&&(0,n.jsxs)(l.m_,{children:[(0,n.jsx)(l.k$,{asChild:!0,children:(0,n.jsx)("span",{className:"inline-block",children:(0,n.jsx)(r.$,{htmlType:"submit",disabled:a||x,loading:x,onClick:()=>y?y():null,children:j})})}),void 0!==C&&(0,n.jsx)(l.ZI,{side:"bottom",children:C})]})]});return m=m||u,(0,n.jsxs)(s.bL,{open:m,onOpenChange:function(e){void 0!==u&&!e&&v&&v()},defaultOpen:N,"data-sentry-element":"unknown","data-sentry-component":"SidePanel","data-sentry-source-file":"SidePanel.tsx",children:[w&&(0,n.jsx)(s.l9,{asChild:!0,className:_.trigger,children:w}),(0,n.jsxs)(s.ZL,{"data-sentry-element":"unknown","data-sentry-source-file":"SidePanel.tsx",children:[(0,n.jsx)(s.hJ,{className:_.overlay,"data-sentry-element":"unknown","data-sentry-source-file":"SidePanel.tsx"}),(0,n.jsxs)(s.UC,{className:[_.base,_.size[p],_.align[h],o&&o].join(" "),onOpenAutoFocus:S.onOpenAutoFocus,onCloseAutoFocus:S.onCloseAutoFocus,onEscapeKeyDown:S.onEscapeKeyDown,onPointerDownOutside:S.onPointerDownOutside,onInteractOutside:e=>{var t;(null==(t=e.target)?void 0:t.closest("#toast"))&&e.preventDefault(),S.onInteractOutside&&S.onInteractOutside(e)},"data-sentry-element":"unknown","data-sentry-source-file":"SidePanel.tsx",children:[c&&(0,n.jsx)("header",{className:_.header,children:c}),(0,n.jsx)("div",{className:_.contents,children:d}),!g&&A]})]})]})};o.Content=function(e){let{children:t,className:a}=e,s=(0,i.A)("sidepanel");return(0,n.jsx)("div",{className:[s.content,a].join(" ").trim(),"data-sentry-component":"Content","data-sentry-source-file":"SidePanel.tsx",children:t})},o.Separator=function(){let e=(0,i.A)("sidepanel");return(0,n.jsx)("div",{className:e.separator,"data-sentry-component":"Separator","data-sentry-source-file":"SidePanel.tsx"})};let d=o},37253:(e,t,a)=>{var n=a(48550),s=a(92479),r=a(50084);e.exports=s(function(e,t){return r(e)?n(e,t):[]})},38230:(e,t,a)=>{var n=a(92855);e.exports=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},38627:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(23983).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},40293:(e,t,a)=>{var n=a(3733),s=a(64190);e.exports=function e(t,a,r,l,i){var o=-1,d=t.length;for(r||(r=s),i||(i=[]);++o<d;){var c=t[o];a>0&&r(c)?a>1?e(c,a-1,r,l,i):n(i,c):l||(i[i.length]=c)}return i}},40402:(e,t,a)=>{"use strict";a.d(t,{BS:()=>i,Dm:()=>c,HJ:()=>v,Rf:()=>f,Uw:()=>d,Vw:()=>w,Xr:()=>b,aw:()=>h,bV:()=>l,cJ:()=>p,dX:()=>u,eh:()=>o,fh:()=>j,gu:()=>m,sZ:()=>x,tn:()=>y,xp:()=>g});var n=a(80263),s=a(53239),r=a(51859);let l="mx-auto w-full max-w-[1200px]",i="px-4 @lg:px-6 @xl:px-12 @2xl:px-20 @3xl:px-24",o=(0,s.forwardRef)((e,t)=>{let{className:a,bottomPadding:s,size:l="default",...o}=e;return(0,n.jsx)("div",{ref:t,...o,className:(0,r.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[l],i,s&&"pb-16",a)})}),d=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("header",{...s,ref:t,className:(0,r.cn)("w-full","flex-col gap-3 py-6",a)})}),c=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("h1",{ref:t,...s,className:(0,r.cn)("text-2xl",a)})}),u=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("p",{ref:t,...s,className:(0,r.cn)("text-sm text-foreground-light",a)})}),m=(0,s.forwardRef)((e,t)=>{let{className:a,isFullWidth:s,topPadding:l,...i}=e;return(0,n.jsx)("div",{ref:t,...i,className:(0,r.cn)("flex flex-col first:pt-12 py-6",s?"w-full":"gap-3 lg:grid md:grid-cols-12",a)})}),p=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("w-full h-px bg-border",a)})}),x=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("h3",{ref:t,...s,className:(0,r.cn)("text-foreground text-xl",a)})}),h=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("p",{ref:t,...s,className:(0,r.cn)("text-sm text-foreground-light",a)})}),g=(0,s.forwardRef)((e,t)=>{let{className:a,children:s,title:l,...i}=e;return(0,n.jsxs)("div",{ref:t,...i,className:(0,r.cn)("col-span-4 xl:col-span-5 prose text-sm",a),children:[l&&(0,n.jsx)("h2",{children:l}),s]})}),f=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",a)})}),y=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-col gap-3 items-center",a)})}),v=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex w-full items-center",a)})}),j=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-row gap-3",a)})}),b=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-col gap-3","min-w-[420px]",a)})}),w=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)(l,i,"my-8 flex flex-col gap-8",a)})});d.displayName="ScaffoldHeader",c.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",o.displayName="ScaffoldContainer",p.displayName="ScaffoldDivider",m.displayName="ScaffoldSection",b.displayName="ScaffoldColumn",g.displayName="ScaffoldSectionDetail",f.displayName="ScaffoldSectionContent",y.displayName="ScaffoldFilterAndContent",v.displayName="ScaffoldActionsContainer",j.displayName="ScaffoldActionsGroup",w.displayName="ScaffoldContainerLegacy",x.displayName="ScaffoldSectionTitle",h.displayName="ScaffoldSectionDescription"},42889:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=a(80263);a(53239);var s=a(16865),r=a(51859);function l(e){let{icon:t,className:a,size:l}=e,i=(0,s.A)("inputIconContainer");return(0,n.jsx)("div",{className:(0,r.cn)(i.base,i.size[l],a),"data-sentry-component":"InputIconContainer","data-sentry-source-file":"InputIconContainer.tsx",children:t})}},48550:(e,t,a)=>{var n=a(45558),s=a(10116),r=a(59568),l=a(71057),i=a(10876),o=a(99582);e.exports=function(e,t,a,d){var c=-1,u=s,m=!0,p=e.length,x=[],h=t.length;if(!p)return x;a&&(t=l(t,i(a))),d?(u=r,m=!1):t.length>=200&&(u=o,m=!1,t=new n(t));e:for(;++c<p;){var g=e[c],f=null==a?g:a(g);if(g=d||0!==g?g:0,m&&f==f){for(var y=h;y--;)if(t[y]===f)continue e;x.push(g)}else u(t,f,d)||x.push(g)}return x}},49655:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,y:()=>l});var n=a(80263),s=a(51859);let r=e=>{let{className:t,delayIndex:a=0,animationDelay:r=150}=e;return(0,n.jsx)("div",{className:(0,s.cn)("shimmering-loader rounded py-3",t),style:{animationFillMode:"backwards",animationDelay:"".concat(a*r,"ms")},"data-sentry-component":"ShimmeringLoader","data-sentry-source-file":"index.tsx"})},l=e=>{let{className:t}=e;return(0,n.jsxs)("div",{className:(0,s.cn)(t,"space-y-2"),"data-sentry-component":"GenericSkeletonLoader","data-sentry-source-file":"index.tsx",children:[(0,n.jsx)(r,{"data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"index.tsx"}),(0,n.jsx)(r,{className:"w-3/4","data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"index.tsx"}),(0,n.jsx)(r,{className:"w-1/2","data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"index.tsx"})]})},i=r},50084:(e,t,a)=>{var n=a(89527),s=a(22363);e.exports=function(e){return s(e)&&n(e)}},53182:(e,t,a)=>{"use strict";a.d(t,{O:()=>i,h:()=>l});var n=a(80263),s=a(53239),r=a(51859);let l=(0,s.forwardRef)((e,t)=>(0,n.jsx)("nav",{ref:t,dir:"ltr",...e,className:(0,r.cn)("border-b",e.className),children:(0,n.jsx)("ul",{role:"menu",className:"flex gap-5",children:e.children})})),i=(0,s.forwardRef)((e,t)=>{let{children:a,className:s,active:l,...i}=e;return(0,n.jsx)("li",{ref:t,"aria-selected":l?"true":"false","data-state":l?"active":"inactive",className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap text-sm ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-foreground text-foreground-lighter hover:text-foreground data-[state=active]:border-foreground border-b-2 border-transparent *:py-1.5",s),...i,children:a})})},55315:(e,t,a)=>{var n=a(71057);e.exports=function(e,t){return n(t,function(t){return e[t]})}},55345:(e,t,a)=>{"use strict";a.d(t,{cC:()=>c,j5:()=>d});var n=a(60045),s=a(56947),r=a(40807),l=a(77227),i=a(59156);async function o(e,t){let{orgSlug:a}=e;if(!a)throw Error("orgSlug is required");let{error:n,data:s}=await (0,r.Jt)("/platform/organizations/{slug}/billing/subscription",{params:{path:{slug:a}},signal:t});return n&&(0,r.H4)(n),s}let d=function(e){let{orgSlug:t}=e,{enabled:a=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,l.SE)(n.aG.BILLING_READ,"stripe.subscriptions");return(0,s.I)(i.s.orgSubscription(t),e=>{let{signal:a}=e;return o({orgSlug:t},a)},{enabled:a&&d&&void 0!==t,staleTime:36e5,...r})},c=e=>{let{data:t}=d({orgSlug:e});return(null==t?void 0:t.plan.id)==="enterprise"||(null==t?void 0:t.plan.id)==="team"}},55685:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(80263),s=a(16632);let r=e=>{let{projectUpdateDisabled:t,projectNotActive:a=!1,children:r,tooltip:l}=e;return(0,n.jsxs)(s.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"ProjectUpdateDisabledTooltip","data-sentry-source-file":"ProjectUpdateDisabledTooltip.tsx",children:[(0,n.jsx)(s.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"ProjectUpdateDisabledTooltip.tsx",children:r}),(t||a)&&(0,n.jsx)(s.ZI,{side:"bottom",className:"w-72 text-center",children:t?l||"Subscription changes are currently disabled. Our engineers are working on a fix.":a?"Unable to update subscription as project is currently not active":""})]})}},57953:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(23983).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},57980:(e,t,a)=>{"use strict";a.d(t,{C5:()=>j,MJ:()=>y,Rr:()=>v,eI:()=>g,lR:()=>f,lV:()=>u,zB:()=>p});var n=a(80263),s=a(38694),r=a(53239),l=a(87494),i=a(51859),o=a(97380),d=a(88712),c=a(37055);let u=l.Op,m=r.createContext({}),p=e=>{let{...t}=e;return(0,n.jsx)(m.Provider,{value:{name:t.name},"data-sentry-element":"unknown","data-sentry-component":"FormField","data-sentry-source-file":"form.tsx",children:(0,n.jsx)(l.xI,{...t,"data-sentry-element":"Controller","data-sentry-source-file":"form.tsx"})})},x=()=>{let e=r.useContext(m),t=r.useContext(h),{getFieldState:a,formState:n}=(0,l.xW)(),s=a(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...s}},h=r.createContext({}),g=r.forwardRef((e,t)=>{let{asChild:a,...l}=e,i=r.useId(),o=a?s.DX:"div";return(0,n.jsx)(h.Provider,{value:{id:i},children:(0,n.jsx)(o,{ref:t,...l})})});g.displayName="FormItem";let f=r.forwardRef((e,t)=>{let{className:a,...s}=e,{error:r,formItemId:l}=x();return(0,n.jsx)(o.J,{ref:t,className:(0,i.cn)("text-foreground-light","transition-colors",r&&"!text-destructive",a,"leading-normal"),htmlFor:l,...s})});f.displayName="FormLabel";let y=r.forwardRef((e,t)=>{let{...a}=e,{error:r,formItemId:l,formDescriptionId:i,formMessageId:o}=x();return(0,n.jsx)(s.DX,{ref:t,id:l,"aria-describedby":r?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!r,...a})});y.displayName="FormControl";let v=r.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:r}=x();return(0,n.jsx)("div",{ref:t,id:r,className:(0,i.cn)("text-sm text-foreground-light",a),...s})});v.displayName="FormDescription";let j=r.forwardRef((e,t)=>{let{className:a,children:s,...r}=e,{error:l,formMessageId:o}=x(),u=l?String(null==l?void 0:l.message):s;return(0,n.jsx)(d.N,{initial:!1,children:u?(0,n.jsx)(c.P.div,{initial:{opacity:0,y:-5,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-5,height:0},transition:{duration:.15,ease:"easeInOut"},children:(0,n.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-sm text-destructive",a),...r,children:u})},o):null})});j.displayName="FormMessage"},61062:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(23983).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},61741:(e,t,a)=>{var n=a(55315),s=a(24967);e.exports=function(e){return null==e?[]:n(e,s(e))}},64190:(e,t,a)=>{var n=a(77488),s=a(5689),r=a(33312),l=n?n.isConcatSpreadable:void 0;e.exports=function(e){return r(e)||s(e)||!!(l&&e&&e[l])}},66644:(e,t,a)=>{"use strict";a.d(t,{F:()=>m});var n=a(80263),s=a(53239),r=a(16865),l=a(92287),i=a(38627),o=a(74438),d=a(3073),c=a(62763);let u={danger:(0,n.jsx)(l.A,{strokeWidth:1.5,size:18}),success:(0,n.jsx)(i.A,{strokeWidth:1.5,size:18}),warning:(0,n.jsx)(o.A,{strokeWidth:1.5,size:18}),info:(0,n.jsx)(d.A,{strokeWidth:1.5,size:18}),neutral:(0,n.jsx)(n.Fragment,{})};function m(e){let{variant:t="neutral",className:a,title:l,withIcon:i,closable:o,children:d,icon:m,actions:p}=e,x=(0,r.A)("alert"),[h,g]=(0,s.useState)(!0),f=[x.base];f.push(x.variant[t].base),a&&f.push(a);let y=[x.description,x.variant[t].description],v=[x.close];return(0,n.jsx)(n.Fragment,{children:h&&(0,n.jsxs)("div",{className:f.join(" "),children:[i?(0,n.jsx)("div",{className:x.variant[t].icon,children:i&&u[t]}):null,m&&m,(0,n.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:[x.variant[t].header,x.header].join(" "),children:l}),(0,n.jsx)("div",{className:y.join(" "),children:d})]}),p]}),o&&(0,n.jsx)("button",{"aria-label":"Close alert",onClick:()=>g(!1),className:v.join(" "),children:(0,n.jsx)(c.A,{strokeWidth:2,size:16})})]})})}},72486:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(23983).A)("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]])},74723:(e,t,a)=>{var n=a(33999),s=a(38230),r=a(84837);e.exports=s?function(e,t){return s(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:r},75588:(e,t,a)=>{"use strict";a.d(t,{U:()=>s,x:()=>n});let n=.8,s=[{value:"I was just exploring, or it was a hobby/student project."},{value:"I was not satisfied with the customer support I received.",label:"Could you tell us more about your experience with our support team?"},{value:"Supabase is missing a specific feature I need.",label:"What specific feature(s) are we missing?"},{value:"I found it difficult to use or build with.",label:"What specific parts of Supabase did you find difficult or frustrating?"},{value:"Performance or reliability insufficient.",label:"Could you tell us more about the specific issues you encountered (e.g., UI bugs, API latency, downtime)?"},{value:"My project was cancelled or put on hold."},{value:"Too expensive",label:"We appreciate your perspective on our pricing, what aspects of the cost felt too high?"},{value:"The pricing is unpredictable and hard to budget for.",label:"Which aspects of our pricing model made it difficult for you to predict your monthly costs?"},{value:"My company went out of business or was acquired."},{value:"I lost trust in the company or its future direction.",label:"Building and maintaining your trust is our highest priority, could you please share the specific event or reason that led to this loss of trust?"}]},78819:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/org/[slug]/billing",function(){return a(30816)}])},80125:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(80263);function s(e){let{body:t,head:a,className:s,containerClassName:r,borderless:l,headTrClasses:i,bodyClassName:o,style:d}=e,c=["table-container"];r&&c.push(r),l&&c.push("table-container--borderless");let u=["table"];return s&&u.push(s),(0,n.jsx)("div",{className:c.join(" "),"data-sentry-component":"Table","data-sentry-source-file":"Table.tsx",children:(0,n.jsxs)("table",{className:u.join(" "),style:d,children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{className:i,children:a})}),(0,n.jsx)("tbody",{className:o,children:t})]})})}s.th=e=>{let{children:t,className:a,style:s}=e,r=["p-3 px-4 text-left"];return a&&r.push(a),(0,n.jsx)("th",{className:r.join(" "),style:s,"data-sentry-component":"Th","data-sentry-source-file":"Table.tsx",children:t})},s.td=e=>{let{children:t,colSpan:a,className:s,style:r,...l}=e;return(0,n.jsx)("td",{className:s,colSpan:a,style:r,...l,"data-sentry-component":"Td","data-sentry-source-file":"Table.tsx",children:t})},s.tr=e=>{let{children:t,className:a,onClick:s,style:r,hoverable:l}=e,i=[a];return(s||l)&&i.push("tr--link"),(0,n.jsx)("tr",{className:i.join(" "),onClick:s,style:r,"data-sentry-component":"Tr","data-sentry-source-file":"Table.tsx",children:t})};let r=s},82951:(e,t,a)=>{"use strict";a.d(t,{N:()=>d});var n=a(32144),s=a(80251),r=a(73969),l=a(40807),i=a(79918);async function o(e){let{slug:t,name:a,billing_email:n,opt_in_tags:s,additional_billing_emails:r}=e,i={};a&&(i.name=a),n&&(i.billing_email=n),s&&(i.opt_in_tags=s),r&&(i.additional_billing_emails=r);let{data:o,error:d}=await (0,l.F6)("/platform/organizations/{slug}",{params:{path:{slug:t}},body:i});return d&&(0,l.H4)(d),o}let d=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,n.jE)();return(0,s.n)(e=>o(e),{async onSuccess(t,a,n){l.setQueriesData({queryKey:i.O.list(),exact:!0},e=>e?e.map(e=>e.slug!==a.slug?e:{...e,name:a.name||e.name,billing_email:a.billing_email||e.billing_email,opt_in_tags:a.opt_in_tags||e.opt_in_tags}):e),l.setQueriesData({queryKey:i.O.customerProfile(t.slug),exact:!0},e=>e?{...e,additional_emails:a.additional_billing_emails||e.additional_emails}:e),l.setQueriesData({queryKey:i.O.detail(t.slug),exact:!0},e=>e?{...e,name:a.name||e.name,billing_email:a.billing_email||e.billing_email,opt_in_tags:a.opt_in_tags||e.opt_in_tags}:e),await (null==e?void 0:e(t,a,n))},async onError(e,a,n){void 0===t?r.oR.error("Failed to update organization: ".concat(e.message)):t(e,a,n)},...a})}},84377:(e,t,a)=>{"use strict";a.d(t,{M:()=>b});var n=a(80263),s=a(53239),r=a(57980),l=a(79279),i=a(37055),o=a(51859),d=a(97380),c=a(21514);let u=(0,l.F)("relative grid gap-10",{variants:{size:{tiny:"text-xs",small:"text-sm leading-4",medium:"text-sm",large:"text-base",xlarge:"text-base"},align:{left:"",right:""},responsive:{true:"",false:""},layout:{horizontal:"flex flex-col gap-2 md:grid md:grid-cols-12",vertical:"flex flex-col gap-2",flex:"flex flex-row gap-3","flex-row-reverse":"flex flex-row gap-6 flex-row-reverse justify-between"},flex:{true:"",false:""}},compoundVariants:[{layout:"flex",align:"right",className:"justify-between"},{layout:"flex-row-reverse",align:"right",className:"justify-between"}],defaultVariants:{}}),m=(0,l.F)("transition-all duration-500 ease-in-out",{variants:{flex:{true:"",false:""},align:{left:"",right:""},layout:{horizontal:"flex flex-col gap-2 col-span-4",vertical:"flex flex-row gap-2 justify-between",flex:"flex flex-col gap-0","flex-row-reverse":"flex flex-col"},labelLayout:{horizontal:"",vertical:"","":""}},compoundVariants:[{flex:!0,align:"left",className:"order-2"},{flex:!0,align:"right",className:"order-1"},{layout:["vertical","flex"],labelLayout:void 0,flex:!1,className:"flex flex-row gap-2 justify-between"},{layout:"horizontal",className:"flex flex-col gap-2"}],defaultVariants:{}}),p=(0,l.F)("transition-all duration-500 ease-in-out",{variants:{flex:{true:"",false:""},align:{left:"order-1",right:"order-2"},layout:{horizontal:"",vertical:"",flex:"","flex-row-reverse":""}},compoundVariants:[{flex:!0,align:"left",className:"order-1"},{flex:!0,align:"right",className:"order-2"},{layout:["vertical","flex"],className:"col-span-12"},{layout:"horizontal",align:"left",className:"col-span-8"},{layout:"horizontal",align:"right",className:"text-right"}],defaultVariants:{}}),x=(0,l.F)("text-foreground-lighter leading-normal",{variants:{size:{...c.SK.text},layout:{vertical:"mt-2",horizontal:"mt-2",flex:"","flex-row-reverse":""}},defaultVariants:{}}),h=(0,l.F)("text-foreground-muted",{variants:{size:{...c.SK.text}},defaultVariants:{}}),g=(0,l.F)("text-foreground-muted",{variants:{size:{...c.SK.text}},defaultVariants:{}}),f=(0,l.F)("text-foreground-muted",{variants:{size:{...c.SK.text}},defaultVariants:{}}),y=(0,l.F)("",{variants:{flex:{true:"",false:""},align:{left:"",right:""},layout:{horizontal:"",vertical:"",flex:"","flex-row-reverse":""}},compoundVariants:[{flex:!0,align:"left",className:""},{flex:!0,align:"right",className:"order-last"},{layout:"flex-row-reverse",className:"flex flex-col justify-center items-end shrink-0"}]}),v=(0,l.F)("",{variants:{nonBoxInput:{true:"",false:""},label:{true:"",false:""},layout:{vertical:"",horizontal:"","flex-row-reverse":""}},compoundVariants:[{nonBoxInput:!0,label:!0,layout:"vertical",className:"my-3"},{nonBoxInput:!0,label:!0,layout:"horizontal",className:"my-3 md:mt-0 mb-3"}],defaultVariants:{}}),j=s.forwardRef((e,t)=>{let{align:a="left",className:s,description:l,id:c,label:j,labelOptional:b,layout:w="vertical",style:N,labelLayout:C,size:S="medium",beforeLabel:_,afterLabel:A,nonBoxInput:k=!j,hideMessage:I=!1,isReactForm:E,...P}=e,M="flex"===w||"flex-row-reverse"===w,D=!!(j||_||A),L=E&&!I&&(0,n.jsx)(i.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeInOut"},className:(0,o.cn)("flex-row-reverse"===w?"mt-0":"mt-2"),children:(0,n.jsx)(r.C5,{className:(0,o.cn)("mt-2 transition-opacity duration-300 ease-in-out","flex-row-reverse"===w&&"mt-0"),"data-formlayout-id":"message"})}),z=l&&E?(0,n.jsx)(r.Rr,{className:(0,o.cn)(x({size:S,layout:w})),"data-formlayout-id":"description",id:"".concat(c,"-description"),children:l}):l?(0,n.jsx)("p",{className:(0,o.cn)(x({size:S,layout:w}),"text-sm text-foreground-light"),"data-formlayout-id":"description",children:l}):null,F=()=>(0,n.jsxs)(n.Fragment,{children:[_&&(0,n.jsx)("span",{className:(0,o.cn)(h({size:S})),id:c+"-before","data-formlayout-id":"beforeLabel",children:(0,n.jsx)("span",{children:_})}),(0,n.jsx)("span",{children:j}),A&&(0,n.jsx)("span",{className:(0,o.cn)(g({size:S})),id:c+"-after","data-formlayout-id":"afterLabel",children:A})]});return(0,n.jsxs)("div",{ref:t,...P,className:(0,o.cn)(u({size:S,flex:M,align:a,layout:w}),s),children:[M&&(0,n.jsxs)("div",{className:(0,o.cn)(y({flex:M,align:a,layout:w})),children:[P.children,"flex-row-reverse"===w&&L]}),D||b||"horizontal"===w?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:(0,o.cn)(m({align:a,labelLayout:C,flex:M,layout:w})),"data-formlayout-id":"labelContainer",children:[D&&E?(0,n.jsx)(r.lR,{className:"text-foreground flex gap-2 items-center break-all","data-formlayout-id":"formLabel",htmlFor:P.name||c,children:(0,n.jsx)(F,{})}):(0,n.jsx)(d.J,{className:"text-foreground flex gap-2 items-center break-all leading-normal","data-formlayout-id":"label",htmlFor:P.name||c,children:(0,n.jsx)(F,{})}),b&&(0,n.jsx)("span",{className:(0,o.cn)(f({size:S})),id:c+"-optional","data-formlayout-id":"labelOptional",children:b}),M&&(0,n.jsxs)(n.Fragment,{children:[z,"flex-row-reverse"!==w&&L]})]})}):null,!M&&(0,n.jsx)("div",{className:(0,o.cn)(p({align:a,layout:w})),style:N,"data-formlayout-id":"dataContainer",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:(0,o.cn)(v({nonBoxInput:k,label:j,layout:w})),"data-formlayout-id":"nonBoxInputContainer",children:P.children}),L,z]})})]})}),b=(0,s.forwardRef)((e,t)=>{let{...a}=e;return(0,n.jsx)(r.eI,{children:(0,n.jsx)(j,{ref:t,isReactForm:!0,...a,children:a.children})})});b.displayName="FormItemLayout"},86926:(e,t,a)=>{var n=a(35902),s=a(89527),r=a(22442),l=a(80544),i=a(61741),o=Math.max;e.exports=function(e,t,a,d){e=s(e)?e:i(e),a=a&&!d?l(a):0;var c=e.length;return a<0&&(a=o(c+a,0)),r(e)?a<=c&&e.indexOf(t,a)>-1:!!c&&n(e,t,a)>-1}},91272:e=>{e.exports=function(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}},92230:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(56947),s=a(40807),r=a(79918);async function l(e,t){let{slug:a}=e;if(!a)throw Error("slug is required");let{data:n,error:r}=await (0,s.Jt)("/platform/organizations/{slug}/members/reached-free-project-limit",{params:{path:{slug:a}},signal:t});return r&&(0,s.H4)(r),n}let i=function(e){let{slug:t}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.I)(r.O.freeProjectLimitCheck(t),e=>{let{signal:a}=e;return l({slug:t},a)},{enabled:a&&void 0!==t,...s})}},92287:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(23983).A)("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]])},92479:(e,t,a)=>{var n=a(84837),s=a(33548),r=a(22704);e.exports=function(e,t){return r(s(e,t,n),e+"")}},93511:(e,t,a)=>{"use strict";a.d(t,{x:()=>o});var n=a(80263),s=a(53239),r=a(16632),l=a(74115),i=a(51859);let o=(0,s.forwardRef)((e,t)=>{let{...a}=e;return(0,n.jsxs)(r.m_,{children:[(0,n.jsx)(r.k$,{asChild:!0,children:(0,n.jsx)(l._2,{ref:t,...a,className:(0,i.cn)(a.className,"!pointer-events-auto"),onClick:e=>{!a.disabled&&a.onClick&&a.onClick(e)},children:a.children})}),a.disabled&&void 0!==a.tooltip.content.text&&(0,n.jsx)(r.ZI,{...a.tooltip.content,children:a.tooltip.content.text})]})});o.displayName="DropdownMenuItemTooltip"},93931:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var n=a(80263),s=a(77877),r=a(12050),l=a(66352),i=a(33408),o=a(34969),d=a(80207),c=a(51859),u=a(70324),m=a(71126);let p=e=>{let{children:t}=e,a=(0,o.a)(),{data:d,isSuccess:p}=(0,i.X)({installationId:null==a?void 0:a.partner_id});return(0,n.jsxs)("div",{className:(0,c.cn)("w-full flex flex-col overflow-hidden"),"data-sentry-component":"OrganizationLayoutContent","data-sentry-source-file":"OrganizationLayout.tsx",children:[a&&(null==a?void 0:a.managed_by)!=="supabase"&&(0,n.jsxs)(u.Fc,{variant:"default",className:"flex items-center gap-4 border-t-0 border-x-0 rounded-none",children:[(0,n.jsx)(r.A,{organization:a,showTooltip:!1,size:"medium"}),(0,n.jsxs)(u.XL,{className:"flex-1",children:["This organization is managed by ",l.N[a.managed_by],"."]}),(0,n.jsx)(m.$,{asChild:!0,type:"default",iconRight:(0,n.jsx)(s.A,{}),disabled:!p,children:(0,n.jsx)("a",{href:null==d?void 0:d.url,target:"_blank",rel:"noopener noreferrer",children:"Manage"})})]}),(0,n.jsx)("main",{className:"h-full w-full overflow-y-auto",children:t})]})},x=(0,d.r)(e=>{let{children:t}=e;return(0,n.jsx)(p,{"data-sentry-element":"OrganizationLayoutContent","data-sentry-component":"OrganizationLayout","data-sentry-source-file":"OrganizationLayout.tsx",children:t})})},95268:(e,t,a)=>{"use strict";a.d(t,{I:()=>r});var n=a(80263),s=a(71126);let r=e=>{let{form:t,hasChanges:a,handleReset:r,helper:l,disabled:i=!1,isSubmitting:o,submitText:d="Save"}=e,c=o||i||!a&&void 0!==a;return(0,n.jsxs)("div",{className:["flex w-full items-center gap-2",l?"justify-between":"justify-end"].join(" "),"data-sentry-component":"FormActions","data-sentry-source-file":"FormActions.tsx",children:[l&&(0,n.jsx)("span",{className:"text-sm text-foreground-lighter",children:l}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(s.$,{disabled:c,type:"default",htmlType:"reset",onClick:()=>r(),"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:"Cancel"}),(0,n.jsx)(s.$,{form:t,type:"primary",htmlType:"submit",disabled:c,loading:o,"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:d})]})]})}},99187:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var n=a(80263),s=a(59153),r=a.n(s),l=a(19898),i=a(47504);let o=()=>{let e=(0,i.useRouter)();return e.isReady?e.asPath.split("?")[0]:""};var d=a(74725),c=a(53182),u=a(40402);let m=function(e){let{children:t}=e,{slug:a}=(0,l.g)(),[s]=o().split("#"),i=(0,d._)("showOrganizationSecuritySettings");return s==="/org/".concat(a,"/team")||s==="/org/".concat(a,"/integrations")||s==="/org/".concat(a,"/usage")||s==="/org/".concat(a,"/billing")?t:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.Vw,{className:"mb-0","data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"OrganizationSettingsLayout.tsx",children:[(0,n.jsx)(u.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"OrganizationSettingsLayout.tsx",children:"Organization Settings"}),(0,n.jsx)(c.h,{className:"overflow-x-auto","aria-label":"Organization menu navigation","data-sentry-element":"NavMenu","data-sentry-source-file":"OrganizationSettingsLayout.tsx",children:[{label:"General",href:"/org/".concat(a,"/general")},i&&{label:"Security",href:"/org/".concat(a,"/security")},{label:"OAuth Apps",href:"/org/".concat(a,"/apps")},{label:"Audit Logs",href:"/org/".concat(a,"/audit")},{label:"Legal Documents",href:"/org/".concat(a,"/documents")}].filter(Boolean).map(e=>(0,n.jsx)(c.O,{active:s===e.href,children:(0,n.jsx)(r(),{href:e.href,children:e.label})},e.label))})]}),(0,n.jsx)("main",{className:"h-full w-full overflow-y-auto",children:t})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2180,2147,726,735,9353,7176,3730,2056,6110,9844,9025,1501,8316,5297,4387,4100,445,2981,2803,7872,5874,49,2174,971,4207,6593,636,8792],()=>t(78819)),_N_E=e.O()}]);