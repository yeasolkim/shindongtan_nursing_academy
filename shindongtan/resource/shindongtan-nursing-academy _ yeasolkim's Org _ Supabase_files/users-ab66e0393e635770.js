!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="dc798287-0892-41b8-825e-cbc300d08418",e._sentryDebugIdIdentifier="sentry-dbid-dc798287-0892-41b8-825e-cbc300d08418")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8426,8819],{5637:(e,t,s)=>{"use strict";s.d(t,{m:()=>n});var r=s(59686),a=s(53239);let n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.useMemo)(()=>{var e;let[s,a]=t;if(!(null==(e=s[0])?void 0:e[a]))return{data:s,error:void 0,isError:!1};try{return{data:(0,r.mu)(...t).sort((e,s)=>new Date(e[t[1]])-new Date(s[t[1]])),error:void 0,isError:!1}}catch(e){return{data:[],error:e,isError:!0}}},[JSON.stringify(t[0]),...t])}},7560:(e,t,s)=>{"use strict";s.d(t,{B:()=>i});var r=s(12056);let a={search:"",timestampStart:"",timestampEnd:"",filters:{}},n=e=>(0,r.Cp)({parse:t=>null!=t?t:e,serialize:e=>e||""}),l=e=>(0,r.Cp)({parse:t=>{if(!t)return e;try{return JSON.parse(t)}catch(t){return e}},serialize:e=>{if(!e)return"";try{return JSON.stringify(e)}catch(e){return""}}});function i(){let[e,t]=(0,r.ZA)("s",n(a.search)),[s,i]=(0,r.ZA)("its",n(a.timestampStart)),[o,d]=(0,r.ZA)("ite",n(a.timestampEnd)),[c,u]=(0,r.ZA)("log",n("")),[m,x]=(0,r.ZA)("f",l(a.filters)),h=e||a.search,p=s||a.timestampStart,f=o||a.timestampEnd,y=m||a.filters,v=e=>{t(e||a.search)},g=e=>{x(e||a.filters)};return{search:h,timestampStart:p,timestampEnd:f,selectedLogId:c||null,filters:y,setSearch:v,setTimeRange:(e,t)=>{i(e||a.timestampStart),d(t||a.timestampEnd)},setSelectedLogId:e=>{u(e||"")},setFilters:g,updateFilter:(e,t)=>{g({...y,[e]:t})},reset:()=>{v(a.search),i(a.timestampStart),d(a.timestampEnd),u(""),x(a.filters)}}}},12484:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var r=s(80263),a=s(59153),n=s.n(a),l=s(38220),i=s(65863),o=s(71126);let d=e=>{let{name:t="",isActive:s,isExternal:a,icon:d,rightIcon:c,url:u="",target:m="_self",onClick:x,textClassName:h="",hoverText:p="",label:f}=e,y=(0,r.jsx)(l.Ay.Item,{icon:d,rounded:!0,active:s,onClick:x,children:(0,r.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,r.jsxs)("div",{title:p||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+h,children:[(0,r.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==f&&(0,r.jsx)(i.E,{variant:"warning",className:"py-0 px-1.5 capitalize",children:f})]}),c&&(0,r.jsx)("div",{children:c})]})});return u?a?(0,r.jsx)(o.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:d,children:(0,r.jsx)(n(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,r.jsx)(n(),{href:u,className:"block",target:m,children:y}):y}},21089:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/users",function(){return s(47929)}])},37632:(e,t,s)=>{"use strict";s.d(t,{aq:()=>d});var r=s(17702),a=s(96557),n=s(68875),l=s(64036),i=s(69830);let o=e=>{let{page:t=0,verified:s,keywords:r,providers:a,sort:n,order:l}=e,i=[];if(r&&""!==r){let e=r.replaceAll("'","''");i.push("id::text like '%".concat(e,"%' or email like '%").concat(e,"%' or phone like '%").concat(e,"%' or raw_user_meta_data->>'full_name' ilike '%").concat(e,"%' or raw_user_meta_data->>'first_name' ilike '%").concat(e,"%' or raw_user_meta_data->>'last_name' ilike '%").concat(e,"%' or raw_user_meta_data->>'display_name' ilike '%").concat(e,"%'"))}"verified"===s?i.push("email_confirmed_at IS NOT NULL or phone_confirmed_at IS NOT NULL"):"anonymous"===s?i.push("is_anonymous is true"):"unverified"===s&&i.push("email_confirmed_at IS NULL AND phone_confirmed_at IS NULL"),a&&a.length>0&&(a.includes("saml 2.0")?i.push("(select jsonb_agg(case when value ~ '^sso' then 'sso' else value end) from jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[".concat(a.map(e=>"saml 2.0"===e?"'sso'":"'".concat(e,"'")).join(", "),"]").trim()):i.push("(raw_app_meta_data->>'providers')::jsonb ?| array[".concat(a.map(e=>"'".concat(e,"'")).join(", "),"]")));let o=i.map(e=>"(".concat(e,")")).join(" and ");return"".concat("\n  select *, coalesce((select array_agg(distinct i.provider) from auth.identities i where i.user_id = auth.users.id), '{}'::text[]) as providers from auth.users\n  ".trim()).concat(i.length>0?" where ".concat(o):"",' order by "').concat(null!=n?n:"created_at",'" ').concat(null!=l?l:"desc"," nulls last limit ").concat(50," offset ").concat(50*t,";")},d=function(e){let{projectRef:t,connectionString:s,keywords:d,filter:c,providers:u,sort:m,order:x}=e,{enabled:h=!0,...p}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=(0,n.KT)(),y=(null==f?void 0:f.status)===l.BU.ACTIVE_HEALTHY;return(0,r.q)(i.Z.usersInfinite(t,{keywords:d,filter:c,providers:u,sort:m,order:x}),e=>{let{signal:r,pageParam:n}=e;return(0,a.E)({projectRef:t,connectionString:s,sql:o({page:n,verified:c,keywords:d,providers:u,sort:null!=m?m:"created_at",order:null!=x?x:"desc"}),queryKey:i.Z.usersInfinite(t)},r)},{enabled:h&&void 0!==t&&y,getNextPageParam(e,t){let s=t.length;if(e.result.length>=50)return s},...p})}},38220:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>m});var r=s(80263),a=s(53239),n=s(16865),l=s(51859);function i(e){let{children:t,className:s,tag:a="div",style:n}=e;return(0,r.jsx)("".concat(a),{style:n,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}i.Title=function(e){let{className:t,level:s=1,children:a,style:n}=e;return(0,r.jsx)("h".concat(s),{style:n,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:a})},i.Text=function(e){let{className:t,children:s,style:a,type:n,disabled:l,mark:i,code:o,keyboard:d,underline:c,strikethrough:u,strong:m,small:x}=e;return o?(0,r.jsx)("code",{style:a,children:s}):i?(0,r.jsx)("mark",{style:a,children:s}):d?(0,r.jsx)("kbd",{style:a,children:s}):m?(0,r.jsx)("strong",{style:a,children:s}):(0,r.jsx)("span",{style:a,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:s})},i.Link=function(e){let{children:t,target:s="_blank",href:a,className:n,onClick:l,style:i}=e;return(0,r.jsx)("a",{onClick:l,href:a,target:s,rel:"noopener noreferrer",style:i,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let o=(0,a.createContext)({type:"text"}),d=e=>{let{type:t}=e;return(0,r.jsx)(o.Provider,{value:{type:t},"data-sentry-element":"unknown","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},c=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:s,ulClassName:a,style:n,type:l="text"}=e;return(0,r.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:s,style:n,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(d,{type:l,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("ul",{className:a,children:t})})})}u.Item=function(e){let{children:t,icon:s,active:a,rounded:i,onClick:o,doNotCloseOverlay:d=!1,showActiveBar:u=!1,style:m}=e,x=(0,n.A)("menu"),{type:h}=c(),p=[x.item.base];p.push(x.item.variants[h].base),a?p.push(x.item.variants[h].active):p.push(x.item.variants[h].normal);let f=[x.item.content.base];a?f.push(x.item.content.active):f.push(x.item.content.normal);let y=[x.item.icon.base];return a?y.push(x.item.icon.active):y.push(x.item.icon.normal),(0,r.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",p),style:m,onClick:o,"aria-current":a?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[s&&(0,r.jsx)("div",{className:"".concat(y.join(" ")," min-w-fit"),children:s}),(0,r.jsx)("span",{className:f.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:s,title:a}=e,l=(0,n.A)("menu"),{type:i}=c();return(0,r.jsxs)("div",{className:[l.group.base,l.group.variants[i]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[s&&(0,r.jsx)("span",{className:l.group.icon,children:s}),(0,r.jsx)("span",{className:l.group.content,children:a}),t]})},u.Misc=function(e){let{children:t}=e;return(0,r.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(i.Text,{"data-sentry-element":"unknown","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("span",{children:t})})})};let m=u},39071:(e,t,s)=>{"use strict";s.d(t,{l:()=>i});var r=s(80263),a=s(38220),n=s(65863),l=s(12484);let i=e=>{let{page:t,menu:s}=e;return(0,r.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,r.jsx)(a.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:s.map((e,i)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"my-6 space-y-8",children:(0,r.jsxs)("div",{className:"mx-3",children:[(0,r.jsx)(a.Ay.Group,{title:e.title?(0,r.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,r.jsx)("span",{children:e.title}),e.isPreview&&(0,r.jsx)(n.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,r.jsx)("div",{children:e.items.map(e=>{let s=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,r.jsx)(l.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:s,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),i!==s.length-1&&(0,r.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},47929:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eO});var r=s(80263),a=s(32144),n=s(2827),l=s(28097),i=s(62763),o=s(95285),d=s(14885),c=s(82892),u=s(653),m=s(17379),x=s(8945),h=s(53239),p=s(24560),f=s(73969),y=s(19898),v=s(90915),g=s(97872),j=s(48153),w=s(62930),b=s(41370),N=s(91494),_=s(76448),C=s(69830),S=s(76473),A=s(56947),U=s(96557);let k=e=>{let{filter:t,keywords:s,providers:r}=e,a=[];if(s&&""!==s){let e=s.replaceAll("'","''");a.push("id::text ilike '%".concat(e,"%' or email ilike '%").concat(e,"%' or phone ilike '%").concat(e,"%'"))}"verified"===t?a.push("email_confirmed_at IS NOT NULL or phone_confirmed_at IS NOT NULL"):"anonymous"===t?a.push("is_anonymous is true"):"unverified"===t&&a.push("email_confirmed_at IS NULL AND phone_confirmed_at IS NULL"),r&&r.length>0&&(r.includes("saml 2.0")?a.push("(select jsonb_agg(case when value ~ '^sso' then 'sso' else value end) from jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[".concat(r.map(e=>"saml 2.0"===e?"'sso'":"'".concat(e,"'")).join(", "),"]").trim()):a.push("(raw_app_meta_data->>'providers')::jsonb ?| array[".concat(r.map(e=>"'".concat(e,"'")).join(", "),"]")));let n=a.map(e=>"(".concat(e,")")).join(" and ");return"".concat("select count(*) from auth.users").concat(a.length>0?" where ".concat(n):"",";")};async function T(e,t){var s;let{projectRef:r,connectionString:a,keywords:n,filter:l,providers:i}=e,o=k({filter:l,keywords:n,providers:i}),{result:d}=await (0,U.E)({projectRef:r,connectionString:a,sql:o,queryKey:["users-count"]},t),c=null==d||null==(s=d[0])?void 0:s.count;if("number"!=typeof c)throw Error("Error fetching users count");return c}let M=function(e){let{projectRef:t,connectionString:s,keywords:r,filter:a,providers:n}=e,{enabled:l=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,A.I)(C.Z.usersCount(t,{keywords:r,filter:a,providers:n}),e=>{let{signal:l}=e;return T({projectRef:t,connectionString:s,keywords:r,filter:a,providers:n},l)},{enabled:l&&void 0!==t,...i})};var I=s(37632),E=s(95319),D=s(71126),L=s(20894),z=s(51859),P=s(74115),F=s(16580),R=s(20401),O=s(64459),H=s(64540),V=s(49655),q=s(60045),B=s(62659),$=s(92662);let Z=(0,s(23983).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var G=s(77227),J=s(16632),K=s(32981),W=s(26470),X=s(87494),Q=s(39353),Y=s(80251),ee=s(40807);async function et(e){let{projectRef:t,user:s}=e,{data:r,error:a}=await (0,ee.bE)("/platform/auth/{ref}/users",{params:{path:{ref:t}},body:{email:s.email,password:s.password,email_confirm:s.autoConfirmUser}});return a&&(0,ee.H4)(a),r}let es=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,a.jE)();return(0,Y.n)(e=>et(e),{async onSuccess(t,s,a){let{projectRef:n}=s;await Promise.all([r.invalidateQueries(C.Z.usersInfinite(n)),r.invalidateQueries(C.Z.usersCount(n))]),await (null==e?void 0:e(t,s,a))},async onError(e,s,r){void 0===t?f.oR.error("Failed to create user: ".concat(e.message)):t(e,s,r)},...s})};var er=s(82758),ea=s(57980),en=s(24794),el=s(9093);let ei=Q.Ik({email:Q.Yj().min(1,"Email is required").email("Must be a valid email address"),password:Q.Yj().min(1,"Password is required"),autoConfirmUser:Q.zM()}),eo=e=>{let{visible:t,setVisible:s}=e,{ref:a}=(0,y.g)(),n=(0,G.SE)(q.aG.AUTH_EXECUTE,"create_user"),{mutate:l,isLoading:i}=es({onSuccess(e){f.oR.success("Successfully created user: ".concat(e.email)),d.reset({email:"",password:"",autoConfirmUser:!0}),s(!1)}}),o=async e=>{if(!a)return console.error("Project ref is required");l({projectRef:a,user:e})},d=(0,X.mN)({resolver:(0,K.u)(ei),defaultValues:{email:"",password:"",autoConfirmUser:!0}});return(0,r.jsx)(er.lG,{open:t,onOpenChange:s,"data-sentry-element":"Dialog","data-sentry-component":"CreateUserModal","data-sentry-source-file":"CreateUserModal.tsx",children:(0,r.jsxs)(er.Cf,{size:"small","data-sentry-element":"DialogContent","data-sentry-source-file":"CreateUserModal.tsx",children:[(0,r.jsx)(er.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"CreateUserModal.tsx",children:(0,r.jsx)(er.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"CreateUserModal.tsx",children:"Create a new user"})}),(0,r.jsx)(er.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"CreateUserModal.tsx"}),(0,r.jsx)(ea.lV,{...d,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx",children:(0,r.jsxs)("form",{id:"create-user",className:"flex flex-col gap-y-4 p-6",onSubmit:d.handleSubmit(o),children:[(0,r.jsx)(ea.zB,{name:"email",control:d.control,render:e=>{let{field:t}=e;return(0,r.jsxs)(ea.eI,{className:"flex flex-col gap-1",children:[(0,r.jsx)(ea.lR,{children:"Email address"}),(0,r.jsx)(ea.MJ,{children:(0,r.jsxs)("div",{className:"items-center relative",children:[(0,r.jsx)($.A,{size:18,className:"absolute left-2 top-1/2 transform -translate-y-1/2",strokeWidth:1.5}),(0,r.jsx)(en.p,{autoFocus:!0,...t,autoComplete:"off",type:"email",name:"email",placeholder:"user@example.com",disabled:i,className:"pl-8"})]})}),(0,r.jsx)(ea.C5,{})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,r.jsx)(ea.zB,{name:"password",control:d.control,render:e=>{let{field:t}=e;return(0,r.jsxs)(ea.eI,{className:"flex flex-col gap-1",children:[(0,r.jsx)(ea.lR,{children:"User Password"}),(0,r.jsx)(ea.MJ,{children:(0,r.jsxs)("div",{className:"items-center relative",children:[(0,r.jsx)(W.A,{size:18,className:"absolute left-2 top-1/2 transform -translate-y-1/2",strokeWidth:1.5}),(0,r.jsx)(en.p,{...t,autoComplete:"new-password",type:"password",name:"password",placeholder:"••••••••",disabled:i,className:"pl-8"})]})}),(0,r.jsx)(ea.C5,{})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,r.jsx)(ea.zB,{name:"autoConfirmUser",control:d.control,render:e=>{let{field:t}=e;return(0,r.jsxs)(ea.eI,{className:"flex items-center gap-x-2",children:[(0,r.jsx)(ea.MJ,{children:(0,r.jsx)(el.S,{checked:t.value,onCheckedChange:e=>t.onChange(e)})}),(0,r.jsx)(ea.lR,{children:"Auto Confirm User?"})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,r.jsx)(ea.lR,{"data-sentry-element":"FormLabel_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx",children:(0,r.jsx)("p",{className:"text-sm text-foreground-lighter",children:"A confirmation email will not be sent when creating a user via this form."})}),(0,r.jsx)(D.$,{block:!0,size:"small",htmlType:"submit",loading:i,disabled:!n||i,"data-sentry-element":"Button","data-sentry-source-file":"CreateUserModal.tsx",children:"Create user"})]})})]})})};async function ed(e){let{projectRef:t,email:s}=e,{data:r,error:a}=await (0,ee.bE)("/platform/auth/{ref}/invite",{params:{path:{ref:t}},body:{email:s}});return a&&(0,ee.H4)(a),r}let ec=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,a.jE)();return(0,Y.n)(e=>ed(e),{async onSuccess(t,s,a){let{projectRef:n}=s;await Promise.all([r.invalidateQueries(C.Z.usersInfinite(n)),r.invalidateQueries(C.Z.usersCount(n))]),await (null==e?void 0:e(t,s,a))},async onError(e,s,r){void 0===t?f.oR.error("Failed to invite user: ".concat(e.message)):t(e,s,r)},...s})};var eu=s(67920),em=s(66586),ex=s(16988);let eh=e=>{let{visible:t,setVisible:s}=e,{ref:a}=(0,y.g)(),{mutate:n,isLoading:l}=ec({onSuccess:(e,t)=>{f.oR.success("Sent invite email to ".concat(t.email)),s(!1)}}),i=(0,G.SE)(q.aG.AUTH_EXECUTE,"invite_user"),o=async e=>{if(!a)return console.error("Project ref is required");n({projectRef:a,email:e.email})};return(0,r.jsx)(eu.A,{hideFooter:!0,size:"small",visible:t,header:"Invite a new user",onCancel:()=>s(!t),"data-sentry-element":"Modal","data-sentry-component":"InviteUserModal","data-sentry-source-file":"InviteUserModal.tsx",children:(0,r.jsx)(em.A,{validateOnBlur:!1,initialValues:{email:""},validate:e=>{let t={};return 0===e.email.length?t.email="Please enter a valid email":/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)||(t.email="".concat(e.email," is an invalid email")),t},onSubmit:o,"data-sentry-element":"Form","data-sentry-source-file":"InviteUserModal.tsx",children:()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eu.A.Content,{children:(0,r.jsx)(ex.A,{id:"email",className:"w-full",label:"User email",icon:(0,r.jsx)($.A,{}),type:"email",name:"email",placeholder:"User email"})}),(0,r.jsx)(eu.A.Content,{children:(0,r.jsx)(D.$,{block:!0,size:"small",htmlType:"submit",loading:l,disabled:!i||l,children:"Invite user"})})]})})},"invite-user-modal")},ep=()=>{let e=(0,G.SE)(q.aG.AUTH_EXECUTE,"invite_user"),t=(0,G.SE)(q.aG.AUTH_EXECUTE,"create_user"),[s,a]=(0,h.useState)(!1),[n,l]=(0,h.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(P.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,r.jsx)(P.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"AddUserDropdown.tsx",children:(0,r.jsx)(D.$,{type:"primary",iconRight:(0,r.jsx)(B.A,{size:14,strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"AddUserDropdown.tsx",children:"Add user"})}),(0,r.jsxs)(P.SQ,{side:"bottom",align:"end",className:"w-40","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,r.jsxs)(J.m_,{"data-sentry-element":"Tooltip","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,r.jsx)(J.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"AddUserDropdown.tsx",children:(0,r.jsxs)(P._2,{className:"space-x-2 !pointer-events-auto",disabled:!e,onClick:()=>{e&&a(!0)},"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,r.jsx)($.A,{size:14,"data-sentry-element":"Mail","data-sentry-source-file":"AddUserDropdown.tsx"}),(0,r.jsx)("p",{children:"Send invitation"})]})}),!e&&(0,r.jsx)(J.ZI,{side:"left",children:"You need additional permissions to invite users"})]}),(0,r.jsxs)(J.m_,{"data-sentry-element":"Tooltip","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,r.jsx)(J.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"AddUserDropdown.tsx",children:(0,r.jsxs)(P._2,{className:"space-x-2 !pointer-events-auto",disabled:!t,onClick:()=>{t&&l(!0)},"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,r.jsx)(Z,{size:14,"data-sentry-element":"UserPlus","data-sentry-source-file":"AddUserDropdown.tsx"}),(0,r.jsx)("p",{children:"Create new user"})]})}),!t&&(0,r.jsx)(J.ZI,{side:"left",children:"You need additional permissions to create users"})]})]})]}),(0,r.jsx)(eh,{visible:s,setVisible:a,"data-sentry-element":"InviteUserModal","data-sentry-source-file":"AddUserDropdown.tsx"}),(0,r.jsx)(eo,{visible:n,setVisible:l,"data-sentry-element":"CreateUserModal","data-sentry-source-file":"AddUserDropdown.tsx"})]})};var ef=s(15862),ey=s(84746),ev=s(83364),eg=s(77877),ej=s(59153),ew=s.n(ej),eb=s(54402),eN=s(96457),e_=s(98042),eC=s(7560),eS=s(22979),eA=s(83086),eU=s(10406),ek=s(68557),eT=s(97893),eM=s(21541);let eI=e=>{let{user:t}=e,{ref:s}=(0,y.g)(),{filters:a,setFilters:n}=(0,eC.B)(),{logData:l,isSuccess:i,isLoading:o,refresh:d}=(0,e_.A)({projectRef:s,table:eb.eV.auth,filterOverride:{search_query:t.id},limit:5});return(0,h.useEffect)(()=>{t.id&&n({...a,search_query:t.id})},[t.id]),(0,r.jsxs)("div",{"data-sentry-component":"UserLogs","data-sentry-source-file":"UserLogs.tsx",children:[(0,r.jsx)(eT.x,{user:t,"data-sentry-element":"UserHeader","data-sentry-source-file":"UserLogs.tsx"}),(0,r.jsx)(eS.w,{"data-sentry-element":"Separator","data-sentry-source-file":"UserLogs.tsx"}),(0,r.jsxs)("div",{className:(0,z.cn)("flex flex-col gap-y-3",eM.jU),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Authentication logs"}),(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"Latest logs from authentication for this user in the past hour"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(D.$,{type:"status_code"in a?"default":"secondary",className:"rounded-r-none border-r-0",disabled:o,onClick:()=>n({search_query:t.id}),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Show all"}),(0,r.jsx)("div",{className:"border-button border border-l-0 py-3"}),(0,r.jsx)(D.$,{type:"status_code"in a?"secondary":"default",className:"rounded-l-none border-l-0",disabled:o,onClick:()=>n({search_query:t.id,status_code:{client_error:!0,server_error:!0}}),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Error only"})]}),(0,r.jsx)(D.$,{type:"default",loading:o,disabled:o,icon:(0,r.jsx)(u.A,{}),onClick:()=>d(),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Refresh"})]}),o&&!i?(0,r.jsx)(eN.y,{}):0===l.length?(0,r.jsx)(eU.Z,{type:"note",title:"No authentication logs available for this user",description:"Auth events such as logging in will be shown here"}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"border border-b-0 rounded-t-md divide-y overflow-hidden",children:l.map(e=>{var t;let a=(null!=(t=e.status)?t:"-").toString(),n=a.startsWith("4"),l=a.startsWith("5");return(0,r.jsxs)("div",{className:"flex items-center transition font-mono px-2 py-1.5 bg-surface-100 divide-x",children:[(0,r.jsx)("p",{className:"text-xs text-foreground-light min-w-[125px] w-[125px] px-1",children:(0,r.jsx)(ek.T,{utcTimestamp:e.timestamp/1e3})}),(0,r.jsx)("div",{className:"flex items-center text-xs text-foreground-light h-[22px] min-w-[70px] w-[70px] px-2",children:(0,r.jsxs)("div",{className:(0,z.cn)("flex items-center justify-center gap-x-1",!!e.status&&"border px-1 py-0.5 rounded",n?"text-warning border-warning bg-warning-300":l?"text-destructive border-destructive bg-destructive-300":""),children:[(n||l)&&(0,r.jsx)(eA.HV,{hideBackground:!0,className:(0,z.cn)(n&&"text-warning-600")}),a]})}),(0,r.jsxs)("p",{className:"group relative flex items-center py-1.5 text-xs text-foreground-light px-2 truncate w-full",children:["".concat(e.path," | ").concat(e.msg),(0,r.jsx)(b.G,{type:"outline",asChild:!0,tooltip:{content:{text:"Open in logs"}},className:"px-1.5 absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition bg-background focus-visible:opacity-100",children:(0,r.jsx)(ew(),{href:"/project/".concat(s,"/logs/auth-logs?log=").concat(e.id),children:(0,r.jsx)(eg.A,{size:"12",className:"text-foreground-light"})})})]})]},e.id)})}),(0,r.jsx)(D.$,{block:!0,asChild:!0,type:"outline",className:"transition rounded-t-none text-foreground-light hover:text-foreground",children:(0,r.jsx)(ew(),{href:"/project/".concat(s,"/logs/auth-logs?s=").concat(t.id),children:"See more logs"})})]})]})]})};var eE=s(23354);let eD=e=>{let{selectedUser:t,onClose:s}=e,[a,n]=(0,h.useState)("overview"),[l,o]=(0,h.useState)(""),d=t?Object.entries(t).filter(e=>{let[t,s]=e;return t.toLowerCase().includes(l.toLowerCase())||"string"==typeof s&&s.toLowerCase().includes(l.toLowerCase())}).reduce((e,t)=>{let[s,r]=t;return void 0!==r&&(e[s]=r),e},{}):{};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R.WM,{withHandle:!0,"data-sentry-element":"ResizableHandle","data-sentry-source-file":"UserPanel.tsx"}),(0,r.jsxs)(R.wV,{defaultSize:30,maxSize:45,minSize:30,className:"bg-studio border-t","data-sentry-element":"ResizablePanel","data-sentry-source-file":"UserPanel.tsx",children:[(0,r.jsx)(D.$,{type:"text",className:"absolute top-3 right-3 px-1",icon:(0,r.jsx)(i.A,{}),onClick:()=>s(),"data-sentry-element":"Button","data-sentry-source-file":"UserPanel.tsx"}),(0,r.jsxs)(ey.tU,{value:a,className:"flex flex-col h-full",onValueChange:e=>n(e),"data-sentry-element":"Tabs_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,r.jsxs)(ey.j7,{className:"px-5 flex gap-x-4 min-h-[46px]","data-sentry-element":"TabsList_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,r.jsx)(ey.Xi,{value:"overview",className:"px-0 pb-0 h-full text-xs  data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Overview"}),(0,r.jsx)(ey.Xi,{value:"logs",className:"px-0 pb-0 h-full text-xs data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Logs"}),(0,r.jsx)(ey.Xi,{value:"raw",className:"px-0 pb-0 h-full text-xs data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Raw JSON"})]}),(0,r.jsx)(ey.av,{value:"overview",className:(0,z.cn)("mt-0 flex-grow min-h-0 overflow-y-auto"),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:t&&(0,r.jsx)(eE.nz,{user:t,onDeleteSuccess:s})}),(0,r.jsx)(ey.av,{value:"logs",className:(0,z.cn)("mt-0 flex-grow min-h-0 overflow-y-auto"),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:t&&(0,r.jsx)(eI,{user:t})}),(0,r.jsxs)(ey.av,{value:"raw",className:(0,z.cn)("mt-0 flex-grow min-h-0 overflow-y-auto",eM.jU),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(en.p,{autoFocus:!0,type:"text",placeholder:"Filter...",value:l,onChange:e=>o(e.target.value),className:"mr-2","data-sentry-element":"Input_Shadcn_","data-sentry-source-file":"UserPanel.tsx"}),(0,r.jsx)(D.$,{type:"text",disabled:!l,onClick:()=>o(""),className:"text-xs","data-sentry-element":"Button","data-sentry-source-file":"UserPanel.tsx",children:"Clear"})]}),(0,r.jsx)(ev.X,{className:"javascript","data-sentry-element":"SimpleCodeBlock","data-sentry-source-file":"UserPanel.tsx",children:JSON.stringify(d,null,2)})]})]})]})]})};var eL=s(6263);let ez=()=>{var e,t;let s=(0,a.jE)(),{ref:A}=(0,y.g)(),{project:U}=(0,g.Om)(),k=(0,h.useRef)(null),T=(0,h.useRef)(0),q=(0,v.hx)(),[B,$]=(0,h.useState)([]),[Z,G]=(0,h.useState)(""),[J,K]=(0,h.useState)("all"),[W,X]=(0,h.useState)(""),[Q,Y]=(0,h.useState)([]),[ee,et]=(0,h.useState)([]),[es,er]=(0,h.useState)("created_at:desc"),[ea,en]=(0,h.useState)(),[el,ei]=(0,h.useState)(new Set([])),[eo,ed]=(0,h.useState)(),[ec,eu]=(0,h.useState)(!1),[em,ex]=(0,h.useState)(!1),[eh,ey,{isSuccess:ev,isError:eg,error:ej}]=(0,E.U)(y.rS.AUTH_USERS_COLUMNS_CONFIGURATION(null!=A?A:""),null),[ew,eb]=es.split(":"),{data:eN,error:e_,isSuccess:eC,isLoading:eS,isRefetching:eA,isError:eU,isFetchingNextPage:ek,refetch:eT,hasNextPage:eI,fetchNextPage:eE}=(0,I.aq)({projectRef:A,connectionString:null==U?void 0:U.connectionString,keywords:W,filter:"all"===J?void 0:J,providers:ee,sort:ew,order:eb},{keepPreviousData:!!W,staleTime:1/0}),{data:ez,refetch:eP}=M({projectRef:A,connectionString:null==U?void 0:U.connectionString,keywords:W,filter:"all"===J?void 0:J,providers:ee}),{mutateAsync:eF}=(0,S.X)(),eR=(0,h.useMemo)(()=>{var e;return null!=(e=null==eN?void 0:eN.pages.flatMap(e=>e.result))?e:[]},[null==eN?void 0:eN.pages]),eO=eR.find(e=>e.id===[...el][0]),eH=()=>{G(""),X("")},eV=(e,t,s)=>{let r=e.slice(),[a]=r.splice(t,1);return r.splice(s,0,a),r},eq=(0,n.A)((e,t)=>{"toggle"===e?ey(t.columns.map(e=>({id:e.key,width:e.width}))):"resize"===e?ey(B.map((e,s)=>({id:e.key,width:s===t.idx?t.width:e.width}))):"reorder"===e&&ey(t.columns.map(e=>({id:e.key,width:e.width})))},500),eB=async()=>{if(!A)return console.error("Project ref is required");let e=[...el];ex(!0);try{await Promise.all(e.map(e=>eF({projectRef:A,userId:e,skipInvalidation:!0}))),await Promise.all([s.invalidateQueries(C.Z.usersInfinite(A)),s.invalidateQueries(C.Z.usersCount(A))]),f.oR.success("Successfully deleted the selected ".concat(el.size," user").concat(el.size>1?"s":"")),eu(!1),ei(new Set([])),e.includes(ea)&&en(void 0)}catch(e){f.oR.error("Failed to delete selected users: ".concat(e.message))}finally{ex(!1)}};return(0,h.useEffect)(()=>{if(!eA&&(ev||eg&&ej.message.includes("data is undefined"))){let e=(0,eL.yA)({config:null!=eh?eh:[],users:null!=eR?eR:[],visibleColumns:Q,setSortByValue:er,onSelectDeleteUser:ed});$(e),e.length<eM.AF.length&&Y(e.filter(e=>"img"!==e.key).map(e=>e.key))}},[eC,eA,ev,eg,ej,eR,el]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsx)(_.M,{className:"py-4 px-6 !mb-0",title:"Users","data-sentry-element":"FormHeader","data-sentry-source-file":"UsersV2.tsx"}),(0,r.jsx)("div",{className:"bg-surface-200 py-3 px-4 md:px-6 flex flex-col lg:flex-row lg:items-center justify-between gap-2 border-t",children:el.size>0?(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsxs)(D.$,{type:"default",icon:(0,r.jsx)(l.A,{}),onClick:()=>eu(!0),children:["Delete ",el.size," users"]}),(0,r.jsx)(b.G,{type:"default",icon:(0,r.jsx)(i.A,{}),className:"px-1.5",onClick:()=>ei(new Set([])),tooltip:{content:{side:"bottom",text:"Cancel selection"}}})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsx)(O.p,{size:"tiny",className:"w-52 pl-7 bg-transparent",iconContainerClassName:"pl-2",icon:(0,r.jsx)(o.A,{size:14,className:"text-foreground-lighter"}),placeholder:"Search email, phone or UID",value:Z,onChange:e=>G(e.target.value),onKeyDown:e=>{"Enter"===e.code&&(G(Z.trim()),X(Z.trim().toLocaleLowerCase()))},actions:[Z&&(0,r.jsx)(D.$,{size:"tiny",type:"text",icon:(0,r.jsx)(i.A,{}),onClick:()=>eH(),className:"p-0 h-5 w-5"})]}),(0,r.jsxs)(L.l6,{value:J,onValueChange:e=>K(e),children:[(0,r.jsx)(L.bq,{size:"tiny",className:(0,z.cn)("w-[140px] !bg-transparent","all"===J&&"border-dashed"),children:(0,r.jsx)(L.yv,{})}),(0,r.jsx)(L.gC,{children:(0,r.jsxs)(L.s3,{children:[(0,r.jsx)(L.eb,{value:"all",className:"text-xs",children:"All users"}),(0,r.jsx)(L.eb,{value:"verified",className:"text-xs",children:"Verified users"}),(0,r.jsx)(L.eb,{value:"unverified",className:"text-xs",children:"Unverified users"}),(0,r.jsx)(L.eb,{value:"anonymous",className:"text-xs",children:"Anonymous users"})]})})]}),(0,r.jsx)(N.I,{name:"Provider",options:eM.UC,labelKey:"name",valueKey:"value",iconKey:"icon",activeOptions:ee,labelClass:"text-xs",maxHeightClass:"h-[190px]",onSaveFilters:et}),(0,r.jsx)("div",{className:"border-r border-strong h-6"}),(0,r.jsx)(N.I,{name:0===Q.length?"All columns":"Columns",title:"Select columns to show",buttonType:0===Q.length?"dashed":"default",options:eM.AF.slice(1),labelKey:"name",valueKey:"id",labelClass:"text-xs",maxHeightClass:"h-[190px]",clearButtonText:"Reset",activeOptions:Q,onSaveFilters:e=>{let t=(null!=eh?eh:[]).slice();0===e.length?t=eM.AF.map(e=>({id:e.id,width:e.width})):e.forEach(e=>{var s;t.find(t=>t.id===e)||t.push({id:e,width:null==(s=eM.AF.find(t=>t.id===e))?void 0:s.width})});let s=(0,eL.yA)({config:t,users:null!=eR?eR:[],visibleColumns:e,setSortByValue:er,onSelectDeleteUser:ed});Y(e),$(s),eq("toggle",{columns:s})}}),(0,r.jsxs)(P.rI,{children:[(0,r.jsx)(P.ty,{asChild:!0,children:(0,r.jsxs)(D.$,{icon:"desc"===eb?(0,r.jsx)(d.A,{}):(0,r.jsx)(c.A,{}),children:["Sorted by ",ew.replaceAll("_"," ")]})}),(0,r.jsx)(P.SQ,{className:"w-44",align:"start",children:(0,r.jsxs)(P.Hr,{value:es,onValueChange:er,children:[(0,r.jsxs)(P.lv,{children:[(0,r.jsx)(P.nV,{children:"Sort by created at"}),(0,r.jsxs)(P.M5,{children:[(0,r.jsx)(P.Ht,{value:"created_at:asc",children:"Ascending"}),(0,r.jsx)(P.Ht,{value:"created_at:desc",children:"Descending"})]})]}),(0,r.jsxs)(P.lv,{children:[(0,r.jsx)(P.nV,{children:"Sort by last sign in at"}),(0,r.jsxs)(P.M5,{children:[(0,r.jsx)(P.Ht,{value:"last_sign_in_at:asc",children:"Ascending"}),(0,r.jsx)(P.Ht,{value:"last_sign_in_at:desc",children:"Descending"})]})]}),(0,r.jsxs)(P.lv,{children:[(0,r.jsx)(P.nV,{children:"Sort by email"}),(0,r.jsxs)(P.M5,{children:[(0,r.jsx)(P.Ht,{value:"email:asc",children:"Ascending"}),(0,r.jsx)(P.Ht,{value:"email:desc",children:"Descending"})]})]}),(0,r.jsxs)(P.lv,{children:[(0,r.jsx)(P.nV,{children:"Sort by phone"}),(0,r.jsxs)(P.M5,{children:[(0,r.jsx)(P.Ht,{value:"phone:asc",children:"Ascending"}),(0,r.jsx)(P.Ht,{value:"phone:desc",children:"Descending"})]})]})]})})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[q&&(0,r.jsx)(w.A,{section:["user-management"]}),(0,r.jsx)(D.$,{size:"tiny",icon:(0,r.jsx)(u.A,{}),type:"default",loading:eA&&!ek,onClick:()=>{eT(),eP()},children:"Refresh"}),(0,r.jsx)(ep,{})]})]})}),(0,r.jsx)(F.$,{loading:eS||eA||ek,"data-sentry-element":"LoadingLine","data-sentry-source-file":"UsersV2.tsx"}),(0,r.jsxs)(R.HK,{direction:"horizontal",className:"relative flex flex-grow bg-alternative min-h-0",autoSaveId:"query-performance-layout-v1","data-sentry-element":"ResizablePanelGroup","data-sentry-source-file":"UsersV2.tsx",children:[(0,r.jsx)(R.wV,{defaultSize:1,"data-sentry-element":"ResizablePanel","data-sentry-source-file":"UsersV2.tsx",children:(0,r.jsx)("div",{className:"flex flex-col w-full h-full",children:(0,r.jsx)(p.Ay,{ref:k,className:"flex-grow border-t-0",rowHeight:44,headerRowHeight:36,columns:B,rows:(0,eL.uJ)(null!=eR?eR:[]),rowClass:e=>{let t=e.id===ea;return["".concat(t?"bg-surface-300 dark:bg-surface-300":"bg-200"," cursor-pointer"),"[&>.rdg-cell]:border-box [&>.rdg-cell]:outline-none [&>.rdg-cell]:shadow-none","[&>.rdg-cell:first-child>div]:ml-4"].join(" ")},rowKeyGetter:e=>e.id,selectedRows:el,onScroll:e=>{let t=T.current!==e.currentTarget.scrollLeft;T.current=e.currentTarget.scrollLeft,!eS&&!ek&&!t&&(0,eL.vY)(e)&&eI&&eE()},onSelectedRowsChange:e=>{e.size>eM.GS?(0,f.oR)("Only up to ".concat(eM.GS," users can be selected at a time")):ei(e)},onColumnResize:(e,t)=>eq("resize",{idx:e,width:t}),onColumnsReorder:(e,t)=>{let s=B.findIndex(t=>t.key===e),r=B.findIndex(e=>e.key===t),a=eV(B,s,r);$(a),eq("reorder",{columns:a})},renderers:{renderRow:(e,t)=>(0,r.jsx)(p.fI,{...t,onClick:()=>{let s=eR.find(t=>t.id===e);if(s){let e=eR.indexOf(s);if(t.row.id){var r;en(t.row.id),null==(r=k.current)||r.scrollToCell({idx:0,rowIdx:e})}}}}),noRowsFallback:eS?(0,r.jsx)("div",{className:"absolute top-14 px-6 w-full",children:(0,r.jsx)(V.y,{})}):eU?(0,r.jsx)("div",{className:"absolute top-14 px-6 flex flex-col items-center justify-center w-full",children:(0,r.jsx)(j.A,{subject:"Failed to retrieve users",error:e_})}):(0,r.jsxs)("div",{className:"absolute top-20 px-6 flex flex-col items-center justify-center w-full gap-y-2",children:[(0,r.jsx)(m.A,{className:"text-foreground-lighter",strokeWidth:1}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-foreground",children:"all"!==J||W.length>0?"No users found":"No users in your project"}),(0,r.jsx)("p",{className:"text-foreground-light",children:"all"!==J||W.length>0?"There are currently no users based on the filters applied":"There are currently no users who signed up to your project"})]})]})},"data-sentry-element":"DataGrid","data-sentry-source-file":"UsersV2.tsx"})})}),void 0!==ea&&(0,r.jsx)(eD,{selectedUser:eR.find(e=>e.id===ea),onClose:()=>en(void 0)})]}),(0,r.jsxs)("div",{className:"flex justify-between min-h-9 h-9 overflow-hidden items-center px-6 w-full border-t text-xs text-foreground-light",children:[eS||eA?"Loading users...":"Total: ".concat(null!=ez?ez:0," users"),(eS||eA||ek)&&(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)(x.A,{size:14,className:"animate-spin"})," Loading..."]})]})]}),(0,r.jsx)(H.A,{visible:ec,variant:"destructive",title:"Confirm to delete ".concat(el.size," user").concat(el.size>1?"s":""),loading:em,confirmLabel:"Delete",onCancel:()=>eu(!1),onConfirm:()=>eB(),alert:{title:"Deleting ".concat(1===el.size?"a user":"users"," is irreversible"),description:"This will remove the selected ".concat(1===el.size?"":"".concat(el.size," "),"user").concat(el.size>1?"s":""," from the project and all associated data.")},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"UsersV2.tsx",children:(0,r.jsxs)("p",{className:"text-sm text-foreground-light",children:["This is permanent! Are you sure you want to delete the"," ",1===el.size?"":"selected ".concat(el.size," "),"user",el.size>1?"s":"",1===el.size?(0,r.jsxs)("span",{className:"text-foreground",children:[" ",null!=(t=null!=(e=null==eO?void 0:eO.email)?e:null==eO?void 0:eO.phone)?t:"this user"]}):null,"?"]})}),(0,r.jsx)(ef.i,{visible:!!eo,selectedUser:eo,onClose:()=>ed(void 0),onDeleteSuccess:()=>ed(void 0),"data-sentry-element":"DeleteUserModal","data-sentry-source-file":"UsersV2.tsx"})]})};var eP=s(76579),eF=s(1053);let eR=()=>(0,r.jsx)(ez,{"data-sentry-element":"UsersV2","data-sentry-component":"UsersPage","data-sentry-source-file":"users.tsx"});eR.getLayout=e=>(0,r.jsx)(eF.A,{children:(0,r.jsx)(eP.A,{children:e})});let eO=eR},62930:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(80263),a=s(58324),n=s(22787),l=s(71126);let i=e=>{let{section:t}=e,s=(0,n.qM)();return(0,r.jsx)(l.$,{size:"tiny",type:"default",onClick:()=>{t&&s.setActiveDocsSection(t),s.setShowProjectApiDocs(!0)},icon:(0,r.jsx)(a.A,{strokeWidth:1.5,className:"text-foreground-muted"}),"data-sentry-element":"Button","data-sentry-component":"APIDocsButton","data-sentry-source-file":"APIDocsButton.tsx",children:"API Docs"})}},64459:(e,t,s)=>{"use strict";s.d(t,{p:()=>m});var r=s(80263),a=s(14484),n=s(53239),l=s(51527),i=s(51859),o=s(24794),d=s(71126),c=s(16865);function u(e){let{icon:t,className:s}=e;return(0,r.jsx)("div",{className:(0,i.cn)("absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-foreground-light",s),"data-sentry-component":"InputIconContainer","data-sentry-source-file":"InputIconContainer.tsx",children:t})}let m=(0,n.forwardRef)((e,t)=>{let{copy:s,showCopyOnHover:m=!1,icon:x,reveal:h=!1,actions:p,onCopy:f,iconContainerClassName:y,containerClassName:v,...g}=e,[j,w]=(0,n.useState)("Copy"),[b,N]=(0,n.useState)(!0),_=(0,c.A)("input"),C=[];return x&&C.push(_.with_icon),(0,r.jsxs)("div",{className:(0,i.cn)("relative group",v),children:[(0,r.jsx)(o.p,{ref:t,...g,onCopy:f,value:h&&b?"**** **** **** ****":g.value,className:(0,i.cn)(...C,g.className)}),x&&(0,r.jsx)(u,{icon:x,className:y}),s||p?(0,r.jsxs)("div",{className:_.actions_container,children:[s&&!(h&&b)?(0,r.jsx)(d.$,{size:"tiny",type:"default",className:(0,i.cn)(m&&"opacity-0 group-hover:opacity-100 transition"),icon:(0,r.jsx)(a.A,{size:16,className:"text-foreground-muted"}),onClick:()=>{var e;return e=g.value,void(0,l.l)(e,()=>{w("Copied"),setTimeout(function(){w("Copy")},3e3),null==f||f()})},children:j}):null,h&&b?(0,r.jsx)(d.$,{size:"tiny",type:"default",onClick:function(){N(!1)},children:"Reveal"}):null,p&&p]}):null]})})},66586:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(80263),a=s(53239),n=s(64938),l=s(3891);function i(e,t){if(!t.error)return delete e[t.key],e;if(t)return{...e,[t.key]:t.error};throw Error()}function o(e){let{validate:t,...s}=e,[o,d]=(0,a.useReducer)(i,null),c=(0,n.Wx)({validateOnBlur:!0,...s,validationSchema:s.validationSchema,initialValues:s.initialValues,onSubmit:s.onSubmit,validate:t||function(){return o}});return(0,r.jsx)("form",{id:s.id,name:s.name,onSubmit:c.handleSubmit,className:s.className,style:s.style,method:"POST","data-sentry-component":"Form","data-sentry-source-file":"Form.tsx",children:(0,r.jsx)(l.h,{values:c.values,errors:c.errors,formContextOnChange:c.handleChange,handleBlur:c.handleBlur,touched:c.touched,fieldLevelValidation:function(e,t){d({key:e,error:t})},"data-sentry-element":"FormContextProvider","data-sentry-source-file":"Form.tsx",children:s.children({errors:c.errors,touched:c.touched,isSubmitting:c.isSubmitting,isValidating:c.isValidating,submitCount:c.submitCount,initialValues:c.initialValues,values:c.values,handleReset:c.handleReset,resetForm:c.resetForm,setFieldValue:c.setFieldValue})})})}},68557:(e,t,s)=>{"use strict";s.d(t,{K:()=>f,T:()=>g});var r=s(80263),a=s(53239),n=s(51527),l=s(51859),i=s(16632),o=s(53434),d=s.n(o),c=s(27344),u=s.n(c),m=s(37361),x=s.n(m);d().extend(u()),d().extend(x());let h=e=>d().unix(Number(e)/1e3/1e3).toISOString(),p=e=>{let t=16===String(e).length;return!Number.isNaN(Number(e))&&t},f=e=>{let{utcTimestamp:t,format:s}=e,r=p(t)?h(t):t;return d().utc(r).local().format(s)},y=e=>{let{utcTimestamp:t,format:s}=e,r=p(t)?h(t):t;return d().utc(r).format(s)},v=e=>{let{utcTimestamp:t}=e,s=p(t)?h(t):t;return d().utc(s).fromNow()},g=e=>{let{utcTimestamp:t,className:s,displayAs:o="local",format:d="DD MMM  HH:mm:ss",labelFormat:c="DD MMM HH:mm:ss"}=e,u=f({utcTimestamp:t,format:d}),m=y({utcTimestamp:t,format:d}),x=v({utcTimestamp:t}),[h,p]=(0,a.useState)("start"),g=(0,a.useRef)(null),j=Intl.DateTimeFormat().resolvedOptions().timeZone;(0,a.useEffect)(()=>{let e=()=>{if(g.current){let e=g.current.getBoundingClientRect(),t=window.innerHeight;p(e.top<t/2?"start":"end")}};return e(),window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]);let w=e=>{let{label:t,value:s}=e,[i,o]=(0,a.useState)(!1);return(0,r.jsxs)("div",{onPointerDown:e=>{e.stopPropagation()},onMouseDown:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),e.preventDefault(),(0,n.l)(s,()=>{o(!0),setTimeout(()=>{o(!1)},1e3)})},className:(0,l.cn)("relative cursor-pointer flex gap-y-2 gap-x-0.5 hover:bg-surface-100 px-2 py-1 group",{"bg-surface-100":i}),"data-sentry-component":"TooltipRow","data-sentry-source-file":"index.tsx",children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2 text-left truncate",children:[(0,r.jsx)("p",{children:t}),(0,r.jsx)("div",{className:"border-t w-full border-dashed"})]}),(0,r.jsxs)("div",{className:"relative flex items-center gap-x-2 flex-grow",children:[(0,r.jsx)("div",{className:"border-t w-full border-dashed z-10"}),i&&(0,r.jsx)("span",{className:"flex items-center justify-end w-full absolute inset-0 flex items-right text-brand-600 bg-surface-100",children:"Copied!"}),(0,r.jsx)("span",{className:"flex items-center gap-x-2 justify-end whitespace-nowrap",children:s})]})]})};return(0,r.jsxs)(i.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"TimestampInfo","data-sentry-source-file":"index.tsx",children:[(0,r.jsx)(i.k$,{asChild:!0,ref:g,className:"text-xs ".concat(s," border-b border-transparent hover:border-dashed hover:border-foreground-light"),"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"index.tsx",children:(0,r.jsx)("span",{children:"local"===o?f({utcTimestamp:t,format:c}):y({utcTimestamp:t,format:c})})}),(0,r.jsxs)(i.ZI,{align:h,side:"right",className:"font-mono p-0 py-1 min-w-80","data-sentry-element":"TooltipContent","data-sentry-source-file":"index.tsx",children:[(0,r.jsx)(w,{label:"UTC",value:m,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,r.jsx)(w,{label:j,value:u,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,r.jsx)(w,{label:"Relative",value:x,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,r.jsx)(w,{label:"Timestamp",value:String(t),"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"})]})]})}},76448:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var r=s(80263),a=s(51859),n=s(23992);let l=e=>{let{title:t,description:s,docsUrl:l,actions:i,className:o}=e;return(0,r.jsxs)("div",{className:(0,a.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(o)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h3",{className:"text-foreground text-xl prose",children:t}),s&&(0,r.jsx)("div",{className:"prose text-sm max-w-2xl",children:s})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==l&&(0,r.jsx)(n.A,{href:l}),i]})]})}},76579:(e,t,s)=>{"use strict";s.d(t,{A:()=>y});var r=s(80263),a=s(59153),n=s.n(a),l=s(47504),i=s(19898),o=s(90915),d=s(39071),c=s(25400),u=s(80207),m=s(70324),x=s(71126),h=s(30651),p=s(93035);let f=()=>{let e=(0,l.useRouter)(),{ref:t="default"}=(0,i.g)(),s=(0,o.p4)();(0,c.$E)({projectRef:t});let a=e.pathname.split("/")[4];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.l,{page:a,menu:(0,p.B)(t),"data-sentry-element":"ProductMenu","data-sentry-source-file":"AuthLayout.tsx"}),s&&(0,r.jsx)("div",{className:"px-3",children:(0,r.jsxs)(m.Fc,{children:[(0,r.jsx)(m.XL,{className:"text-sm",children:"Column Privileges has been shifted"}),(0,r.jsxs)(m.TN,{className:"text-xs",children:[(0,r.jsx)("p",{className:"mb-2",children:"It can now be found in the menu under the database section."}),(0,r.jsx)(x.$,{asChild:!0,type:"default",size:"tiny",children:(0,r.jsx)(n(),{href:"/project/".concat(t,"/database/column-privileges"),children:"Head over to Database"})})]})]})})]})},y=(0,u.r)(e=>{let{children:t}=e;return(0,r.jsx)(h.A,{title:"Authentication",product:"Authentication",productMenu:(0,r.jsx)(f,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"AuthLayout","data-sentry-source-file":"AuthLayout.tsx",children:t})})},82892:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(23983).A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},98042:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var r=s(17702),a=s(56947),n=s(53434),l=s.n(n),i=s(53239),o=s(54402),d=s(59686),c=s(40807),u=s(5637),m=s(7560);let x=(e,t)=>(0,i.useMemo)(()=>0!==e.length&&(0,d.l8)(e[0][t])?null==e?void 0:e.map(e=>(e[t]=(0,d.RT)(e[t]),e)):e,[JSON.stringify(e)]),h=function(e){var t,s,n,h,p;let{projectRef:f,table:y,filterOverride:v,limit:g}=e,j=(0,o.Et)(o.Z8),[w,b]=(0,i.useState)(new Date().toISOString()),{timestampStart:N,timestampEnd:_,filters:C,search:S}=(0,m.B)(),A=(0,i.useMemo)(()=>N||j.calcFrom(),[N,j]),U=(0,i.useMemo)(()=>_||j.calcTo(),[_,j]),k=(0,i.useMemo)(()=>({...C,...v,...S?{search_query:S}:{}}),[JSON.stringify(C),JSON.stringify(v),S]),T=(0,i.useMemo)(()=>({iso_timestamp_start:A,iso_timestamp_end:U,sql:(0,d.qr)(y,k,g)}),[A,U,y,k,g]),M=(0,i.useMemo)(()=>["projects",f,"logs",T],[f,T]),{data:I,isSuccess:E,isLoading:D,isRefetching:L,error:z,fetchNextPage:P,isFetchingNextPage:F,refetch:R}=(0,r.q)(M,async e=>{let{signal:t,pageParam:s}=e,{data:r,error:a}=await (0,c.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:f},query:{...T,iso_timestamp_end:s||T.iso_timestamp_end}},signal:t});if(a)throw a;return r},{refetchOnWindowFocus:!1,getNextPageParam(e){var t,s;if((null!=(s=null==(t=e.result)?void 0:t.length)?s:0)===0)return;let r=e.result.length,{timestamp:a}=e.result[r-1];return l().utc(Number(a/1e3)).toISOString()}}),{logData:O,error:H,oldestTimestamp:V}=(0,i.useMemo)(()=>{var e,t;let s=[],r=z?z.message:null;null==I||null==(e=I.pages)||e.forEach(e=>{(null==e?void 0:e.result)&&(s=[...s,...e.result]),!r&&(null==e?void 0:e.error)&&(r=e.error)});let a=s.length>0?null==(t=s[s.length-1])?void 0:t.timestamp:void 0;return{logData:s,error:r,oldestTimestamp:a}},[null==I?void 0:I.pages]),q=(0,i.useMemo)(()=>(0,d.oZ)(y,k),[y,k]),B=(0,i.useMemo)(()=>["projects",f,"logs-count",{projectRef:f,sql:q,iso_timestamp_start:w,iso_timestamp_end:U,table:y,mergedFilters:k}],[f,q,w,U,y,k]),{data:$}=(0,a.I)(B,async e=>{let{signal:t}=e,{data:s,error:r}=await (0,c.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:f},query:{sql:q,iso_timestamp_start:w,iso_timestamp_end:U}},signal:t});if(r)throw r;return s},{refetchOnWindowFocus:!1,refetchInterval:6e4,enabled:!H&&!!I&&(null==I||null==(t=I.pages)?void 0:t.length)>0}),Z=null!=(h=null==$||null==(n=$.result)||null==(s=n[0])?void 0:s.count)?h:0,G=(0,i.useMemo)(()=>(0,d.tS)(y,T,k),[y,T,k]),J=(0,i.useMemo)(()=>["projects",f,"logs-chart",{projectRef:f,sql:G,iso_timestamp_start:A,iso_timestamp_end:U}],[f,G,A,U]),{data:K,refetch:W}=(0,a.I)(J,async e=>{let{signal:t}=e,{data:s,error:r}=await (0,c.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:f},query:{iso_timestamp_start:A,iso_timestamp_end:U,sql:G}},signal:t});if(r)throw r;return s},{refetchOnWindowFocus:!1}),X=(0,i.useCallback)(async()=>{b(new Date().toISOString()),W(),R()},[R,W]),Q=x(null!=(p=null==K?void 0:K.result)?p:[],"timestamp"),{data:Y,error:ee}=(0,u.m)(Q,"timestamp","count",0,A,U||new Date().toISOString());return{newCount:Z,logData:O,isSuccess:E,isLoading:D||L,isLoadingOlder:F,error:H||ee,filters:k,params:T,oldestTimestamp:V?String(V):void 0,eventChartData:Y,refresh:X,loadOlder:()=>P()}}}},e=>{var t=t=>e(e.s=t);e.O(0,[89,2180,2147,726,735,9353,7176,3730,2056,6110,9844,9025,1501,8316,5297,4387,4100,445,2981,4181,556,4560,7795,698,6538,4938,6692,7872,5874,49,2174,971,9063,9124,651,4452,6691,6593,636,8792],()=>t(21089)),_N_E=e.O()}]);