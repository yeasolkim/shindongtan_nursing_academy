<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>커뮤니티 - Q&A - 신동탄간호학원</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="common-pages.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&family=Pretendard:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    /* Q&A 페이지 전용 스타일 - Quick Contact Sidebar만 유지 */
    
    /* Quick Contact Sidebar */
    .quick-contact-sidebar {
      position: fixed;
      top: 50%;
      right: 40px;
      width: 240px;
      z-index: 100;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      background: #fff;
      transform: translateY(-50%);
    }
    .contact-box { 
      margin-bottom: 1rem; 
      text-align: center; 
      padding: 1.5rem 1rem; 
    }
    .contact-box h3 { 
      font-size: 1.1rem; 
      font-weight: 600; 
      margin: 0 0 1rem; 
      color: #1a365d; 
    }
    .contact-box .phone-number { 
      font-size: 1.3rem; 
      font-weight: 700; 
      color: #333; 
    }
    .contact-box .kakao-link { 
      display: block; 
      background-color: #ffeb00; 
      padding: 1rem; 
      text-decoration: none; 
      color: #3c1e1e; 
      font-weight: 600; 
      transition: background-color 0.3s;
    }
    .contact-box .kakao-link:hover {
      background-color: #fdd835;
    }
    @media (max-width: 1200px) {
      .quick-contact-sidebar { display: none; }
    }
  </style>
</head>
<body>
  <header class="header"></header>
  <div id="page-hero-container"></div>

  <!-- 메인 콘텐츠 -->
  <main>
    <section class="page-section">
      <div class="container">
        <div class="content-card">
          <div class="section-title">
            <h2>자주 묻는 질문</h2>
            <p>수강생들이 가장 궁금해하는 질문들을 모았습니다.</p>
          </div>
          <div class="card-content">
            <div class="accordion-container">
              <!-- FAQ 데이터는 Supabase에서 동적으로 로드됩니다 -->
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <aside class="quick-contact-sidebar">
    <div class="contact-box">
      <h3>문의 전화</h3>
      <p class="phone-number"><i class="fas fa-phone-alt"></i> 031) 8003-2456</p>
    </div>
    <div class="contact-box" style="padding: 0;">
      <a href="https://pf.kakao.com/_ExlqgC" target="_blank" class="kakao-link"><strong>KakaoTalk</strong> <span>플러스 친구</span></a>
    </div>
  </aside>

  <!-- COMP-FOOTER-01: 글로벌 푸터 -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <p>상호명: 신동탄간호학원</p>
          <p>사업자등록번호: 602-91-03887</p>
          <p>대표자: 김예람</p>
          <br/>
          <p>전화번호: 031-8003-2456</p>
          <p>팩스번호: 050-4062-2456</p>
          <p>이메일: nurse8003@naver.com</p>
          <br/>
          <p>주소: 경기도 화성시 메타폴리스로38, 천년프라자 401호</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 신동탄간호학원. All rights reserved.</p>
      </div>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="supabase-config.js"></script>
  
  <!-- FAQ 데이터 로드 스크립트 -->
  <script>
    // FAQ 데이터를 Supabase에서 불러와서 화면에 표시
    async function loadFAQData() {
      try {
        console.log('FAQ 데이터 로딩 중...');
        if (!window.supabaseClient) {
          console.error('Supabase 클라이언트가 초기화되지 않았습니다!');
          return;
        }
        const { data, error } = await window.supabaseClient
          .from('qa')
          .select('*')
          .order('created_at', { ascending: true });

        if (error) {
          console.error('FAQ 데이터 로드 실패:', error);
          return;
        }
        console.log('FAQ 데이터 로드 완료:', data);

        const accordionContainer = document.querySelector('.accordion-container');
        if (!accordionContainer) {
          console.error('아코디언 컨테이너를 찾을 수 없습니다!');
          return;
        }

        // 기존 FAQ(테스트용)는 유지, Supabase 데이터만 추가
        data.forEach((faq, index) => {
          const item = document.createElement('div');
          item.className = 'accordion-item animate-on-scroll';
          item.innerHTML = `
            <div class="accordion-header">
              <span class="q-icon">Q</span>
              <h3>${faq.question}</h3>
              <i class="fas fa-chevron-down toggle-icon"></i>
            </div>
            <div class="accordion-content">
              <div class="answer-wrapper">
                <span class="a-icon">A</span>
                <div class="answer-content">${faq.answer.replace(/\n/g, '<br>')}</div>
              </div>
            </div>
          `;
          accordionContainer.appendChild(item);
        });

        initializeAccordion();
      } catch (error) {
        console.error('FAQ 데이터 로드 중 오류 발생:', error);
      }
    }
    
    // 아코디언 기능 초기화
    function initializeAccordion() {
      console.log('아코디언 초기화 시작');
      const accordionHeaders = document.querySelectorAll('.accordion-header');
      console.log('찾은 아코디언 헤더 수:', accordionHeaders.length);
      
      accordionHeaders.forEach((header, index) => {
        console.log(`아코디언 ${index + 1} 이벤트 리스너 추가`);
        header.addEventListener('click', function() {
          console.log('아코디언 클릭됨');
          const accordionItem = this.parentElement;
          const content = accordionItem.querySelector('.accordion-content');
          const isActive = accordionItem.classList.contains('active');
          
          // 모든 아코디언 닫기
          document.querySelectorAll('.accordion-item').forEach(item => {
            item.classList.remove('active');
            const itemContent = item.querySelector('.accordion-content');
            itemContent.style.maxHeight = '0';
            itemContent.style.padding = '0';
          });
          
          // 클릭된 아코디언이 닫혀있었다면 열기
          if (!isActive) {
            accordionItem.classList.add('active');
            content.style.maxHeight = content.scrollHeight + 'px';
            content.style.padding = '1.5rem';
            console.log('아코디언 열림');
          }
        });
      });
      console.log('아코디언 초기화 완료');
    }
    
    // 페이지 로드 시 FAQ 데이터 로드
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM 로드 완료, FAQ 데이터 로드 시작');
      console.log('Supabase 클라이언트 상태:', window.supabaseClient);
      
      // 약간의 지연을 두어 테스트용 FAQ가 먼저 렌더링되도록 함
      setTimeout(() => {
        loadFAQData();
      }, 500); // 지연 시간을 늘림
    });
  </script>
  <script src="script.js"></script>
</body>
</html> 