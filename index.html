<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>신동탄간호학원 - 간호조무사 병원코디네이터 전문 교육기관</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&family=Pretendard:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  <!-- Supabase CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <header class="header"></header>

  <main>
    <!-- Hero Section -->
    <section class="hero-v2 animate-on-scroll">
      <div class="container">
        <h1 class="hero-v2-title">우수훈련기관, 실력으로 입증합니다</h1>
        <p class="hero-v2-subtitle">24년도 취업률 96.7% 검증된 선택</p>
        <div class="feature-cards-grid">
          <div class="feature-card">
            <div class="feature-icon"><i class="fas fa-user-tie"></i></div>
            <h3>원장직강, 실습중심 교육</h3>
            <p>20년 경력의 원장이 직접 지도하며<br>실무 중심의 실습 교육</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon"><i class="fas fa-rocket"></i></div>
            <h3>기회의 땅, 취업의 길로 가는<br>가장 빠른 길</h3>
            <p>국비지원으로 부담없이<br>빠른 취업을 위한 최적의 과정</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon"><i class="fas fa-heart"></i></div>
             <h3>간호의 꿈을 이루는 의미있는 도전</h3>
            <p>개인별 맞춤 상담과<br>체계적인 취업 지원 시스템</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Info Links Section -->
    <section class="info-links-section animate-on-scroll">
      <div class="container">
        <div class="info-links-grid">
          <a href="academy_location.html" class="info-link-card">
            <div class="info-link-icon"><i class="fas fa-map-marker-alt"></i></div>
            <div class="info-link-text">
              <h4>오시는 길</h4>
              <p>학원 위치 및 교통편 안내</p>
            </div>
          </a>
          <a href="recruitment_funding-info.html" class="info-link-card">
            <div class="info-link-icon"><i class="fas fa-graduation-cap"></i></div>
            <div class="info-link-text">
              <h4>국비과정 모집</h4>
              <p>국민내일배움카드 지원 과정</p>
            </div>
          </a>
        </div>
      </div>
    </section>

    <!-- Social Links Section -->
    <section class="social-links-section animate-on-scroll">
      <div class="container">
        <h2 class="section-title">더 많은 정보를 원하시나요?</h2>
        <p class="section-subtitle">다양한 채널에서 최신 소식과 유용한 정보를 받아보세요</p>
        <div class="social-links-grid">
          <a href="https://pf.kakao.com/_ExlqgC" class="social-link-card kakao" target="_blank" rel="noopener noreferrer">
            <span class="social-link-inner"><i class="fas fa-comment"></i><span>카카오톡</span></span>
          </a>
          <a href="https://www.instagram.com/shindongtan_nursing/" class="social-link-card instagram" target="_blank" rel="noopener noreferrer">
            <span class="social-link-inner"><i class="fab fa-instagram"></i><span>인스타그램</span></span>
          </a>
          <a href="https://cafe.naver.com/shindongtannrs" class="social-link-card cafe" target="_blank" rel="noopener noreferrer">
            <span class="social-link-inner"><i class="fas fa-coffee"></i><span>네이버카페</span></span>
          </a>
          <a href="https://blog.naver.com/nurse8003" class="social-link-card blog" target="_blank" rel="noopener noreferrer">
            <span class="social-link-inner"><i class="fas fa-blog"></i><span>네이버블로그</span></span>
          </a>
        </div>
      </div>
    </section>

    <!-- Community Preview Section -->
    <section class="community-preview-section animate-on-scroll">
      <div class="container">
        <div class="preview-grid">
          <!-- Notices Column -->
          <div class="preview-card"m>
            <div class="preview-header">
              <div class="preview-title">
                <h3><i class="fas fa-bullhorn"></i> 공지사항</h3>
                <p>학원의 주요 소식과 안내사항</p>
              </div>
              <a href="community_notice.html" class="preview-more-btn">더보기 <i class="fas fa-arrow-right"></i></a>
            </div>
            <div class="preview-list" id="latest-notices">
              <div class="loading-message" style="text-align: center; padding: 2rem; color: #777;">
                <i class="fas fa-spinner fa-spin"></i> 로딩 중...
              </div>
            </div>
          </div>
          <!-- QA Column -->
          <div class="preview-card">
            <div class="preview-header">
              <div class="preview-title">
                <h3><i class="fas fa-question-circle"></i> 자주 묻는 질문</h3>
                <p>수강생들이 궁금해하는 질문들</p>
              </div>
              <a href="community_qa.html" class="preview-more-btn">더보기 <i class="fas fa-arrow-right"></i></a>
            </div>
            <div class="preview-list" id="latest-qa">
              <div class="loading-message" style="text-align: center; padding: 2rem; color: #777;">
                <i class="fas fa-spinner fa-spin"></i> 로딩 중...
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer"></footer>

  <!-- Supabase 설정 파일 -->
  <script src="supabase-config.js"></script>
  <script src="script.js"></script>
  <script>
    // Supabase 기반 다중 팝업 동적 렌더링
    async function loadPopupsFromSupabase() {
      try {
        if (!window.supabaseClient) {
          console.warn('supabaseClient가 없습니다.');
          return;
        }
        // 한국 시간 기준 오늘 날짜(YYYY-MM-DD)
        const today = new Date();
        const todayStr = today.getFullYear() + '-' +
          String(today.getMonth() + 1).padStart(2, '0') + '-' +
          String(today.getDate()).padStart(2, '0');
        const { data: popups, error } = await window.supabaseClient
          .from('popups')
          .select('*')
          .eq('is_active', true);
        if (error) {
          console.error('Supabase 팝업 데이터 조회 오류:', error);
          return;
        }
        if (!popups || popups.length === 0) {
          console.warn('팝업 데이터가 없습니다.');
          return;
        }
        let shown = 0;
        popups.forEach(popup => {
          // 기간 체크
          if (popup.start_date && todayStr < popup.start_date) return;
          if (popup.end_date && todayStr > popup.end_date) return;
          // 오늘 하루 보지 않기 체크 (팝업별로 구분)
          const dontShowKey = 'popupDontShowToday_' + popup.id;
          if (localStorage.getItem(dontShowKey) === todayStr) return;
          try {
            renderPopup(popup);
            shown++;
          } catch (e) {
            console.error('renderPopup 오류:', e, popup);
          }
        });
        if (shown === 0) {
          console.warn('조건에 맞는 팝업이 없습니다.');
        }
      } catch (e) {
        console.error('loadPopupsFromSupabase 전체 오류:', e);
      }
    }
    function renderPopup(popup) {
      try {
        // 팝업 컨테이너 생성
        const popupDiv = document.createElement('div');
        popupDiv.className = 'supabase-popup';
        // 팝업 컨테이너 스타일 개선
        popupDiv.style.display = 'flex';
        popupDiv.style.flexDirection = 'column';
        popupDiv.style.alignItems = 'center';
        popupDiv.style.background = 'rgba(255,255,255,0.97)';
        popupDiv.style.borderRadius = '12px';
        popupDiv.style.boxShadow = '0 4px 16px rgba(51,74,108,0.10)';
        popupDiv.style.padding = '0';
        popupDiv.style.width = 'fit-content';
        popupDiv.style.maxHeight = '90vh';
        popupDiv.style.overflow = 'visible';
        popupDiv.style.position = 'fixed';
        // 항상 중앙에, 최상위 z-index로 보이게
        // popup.position_x, position_y(%)에 따라 위치 지정
        setTimeout(() => {
          const winW = window.innerWidth;
          const winH = window.innerHeight;
          const popW = popupDiv.offsetWidth;
          const popH = popupDiv.offsetHeight;
          // 퍼센트 → px 변환, 기본값 50%
          let left = ((popup.position_x !== undefined ? popup.position_x : 50) / 100) * winW;
          let top = ((popup.position_y !== undefined ? popup.position_y : 50) / 100) * winH;
          // 화면 밖으로 나가지 않게 보정
          left = Math.max(popW / 2 + 8, Math.min(left, winW - popW / 2 - 8));
          top = Math.max(popH / 2 + 8, Math.min(top, winH - popH / 2 - 8));
          popupDiv.style.left = left + 'px';
          popupDiv.style.top = top + 'px';
          popupDiv.style.transform = 'translate(-50%, -50%)';
          popupDiv.style.zIndex = '99999';
        }, 0);
        // 닫기 버튼
        const closeBtn = document.createElement('button');
        closeBtn.className = 'close-btn';
        closeBtn.innerHTML = '&times;';
        closeBtn.style.alignSelf = 'flex-end';
        closeBtn.style.marginBottom = '2px';
        closeBtn.style.marginTop = '6px';
        closeBtn.style.marginRight = '8px';
        closeBtn.style.width = '24px';
        closeBtn.style.height = '24px';
        closeBtn.style.background = '#334a6c';
        closeBtn.style.color = 'white';
        closeBtn.style.border = 'none';
        closeBtn.style.borderRadius = '50%';
        closeBtn.style.cursor = 'pointer';
        closeBtn.style.fontSize = '16px';
        closeBtn.style.fontWeight = 'bold';
        closeBtn.style.display = 'flex';
        closeBtn.style.alignItems = 'center';
        closeBtn.style.justifyContent = 'center';
        closeBtn.style.transition = 'all 0.2s';
        closeBtn.onclick = () => popupDiv.remove();
        // 오늘 하루 보지 않기 체크박스
        const checkboxDiv = document.createElement('div');
        checkboxDiv.className = 'checkbox-container';
        checkboxDiv.style.marginTop = '2px';
        checkboxDiv.style.alignSelf = 'center';
        checkboxDiv.style.background = 'rgba(51,74,108,0.08)';
        checkboxDiv.style.padding = '4px 10px';
        checkboxDiv.style.borderRadius = '22px';
        checkboxDiv.style.backdropFilter = 'blur(5px)';
        checkboxDiv.style.fontSize = '13px';
        checkboxDiv.style.color = '#334a6c';
        checkboxDiv.style.boxShadow = '0 1.5px 6px rgba(51,74,108,0.08)';
        checkboxDiv.style.display = 'flex';
        checkboxDiv.style.alignItems = 'center';
        checkboxDiv.style.gap = '10px';
        const dontShowCheckbox = document.createElement('input');
        dontShowCheckbox.type = 'checkbox';
        dontShowCheckbox.id = 'dontShowToday_' + popup.id;
        dontShowCheckbox.style.width = '15px';
        dontShowCheckbox.style.height = '15px';
        dontShowCheckbox.style.cursor = 'pointer';
        dontShowCheckbox.style.accentColor = '#334a6c';
        dontShowCheckbox.style.margin = '0 2px 0 0';
        const dontShowLabel = document.createElement('label');
        dontShowLabel.htmlFor = dontShowCheckbox.id;
        dontShowLabel.textContent = '오늘 하루 보지 않기';
        dontShowLabel.style.cursor = 'pointer';
        dontShowLabel.style.userSelect = 'none';
        dontShowLabel.style.fontWeight = '500';
        dontShowLabel.style.fontSize = '13px';
        dontShowCheckbox.onchange = function() {
          if (this.checked) {
            const todayStr = new Date().toISOString().slice(0, 10);
            localStorage.setItem('popupDontShowToday_' + popup.id, todayStr);
            popupDiv.remove();
          }
        };
        checkboxDiv.appendChild(dontShowCheckbox);
        checkboxDiv.appendChild(dontShowLabel);
        // 이미지
        const img = document.createElement('img');
        img.src = popup.image_url;
        img.alt = popup.title || '팝업';
        img.style.display = 'block';
        img.style.maxHeight = '90vh';
        img.style.borderRadius = '8px';
        img.style.boxShadow = '0 2px 12px rgba(51,74,108,0.10)';
        img.style.background = '#f7f9fb';
        img.style.margin = '0';
        // 이미지 로드 후 팝업 크기 조정
        img.onload = function() {
          const w = popup.width ? popup.width : img.naturalWidth;
          const h = popup.height ? Math.min(popup.height, window.innerHeight * 0.9) : Math.min(img.naturalHeight, window.innerHeight * 0.9);
          img.style.width = w + 'px';
          img.style.height = h + 'px';
          popupDiv.style.width = w + 'px';
          popupDiv.style.height = 'auto';
        };
        // 팝업 내부에 요소 추가
        popupDiv.appendChild(closeBtn);
        if (popup.link) {
          const a = document.createElement('a');
          a.href = popup.link;
          a.target = '_blank';
          a.appendChild(img);
          popupDiv.appendChild(a);
        } else {
          popupDiv.appendChild(img);
        }
        popupDiv.appendChild(checkboxDiv);
        document.body.appendChild(popupDiv);
        console.log('팝업 append 완료:', popup);
      } catch (e) {
        console.error('renderPopup 함수 내부 오류:', e, popup);
      }
    }
    window.addEventListener('DOMContentLoaded', loadPopupsFromSupabase);
  </script>
  <style>
    .supabase-popup {
      display: flex !important;
      flex-direction: column !important;
      align-items: center !important;
      background: rgba(255,255,255,0.97) !important;
      border-radius: 12px !important;
      box-shadow: 0 4px 16px rgba(51,74,108,0.10) !important;
      padding: 0 !important;
      width: fit-content !important;
      max-height: 90vh !important;
      box-sizing: border-box !important;
      overflow: visible !important;
    }
    .supabase-popup img {
      margin: 0 !important;
      display: block !important;
      border-radius: 8px !important;
      box-shadow: 0 2px 12px rgba(51,74,108,0.10) !important;
      background: #f7f9fb !important;
      max-height: 90vh !important;
      object-fit: contain !important;
    }
    .supabase-popup .close-btn {
      align-self: flex-end !important;
      margin-bottom: 2px !important;
      margin-top: 6px !important;
      margin-right: 8px !important;
      width: 24px !important;
      height: 24px !important;
      font-size: 16px !important;
      min-width: 0 !important;
      min-height: 0 !important;
      padding: 0 !important;
    }
    @media (max-width: 600px) {
      .supabase-popup .close-btn {
        width: 18px !important;
        height: 18px !important;
        font-size: 13px !important;
        margin-top: 4px !important;
        margin-right: 4px !important;
      }
      .supabase-popup .checkbox-container {
        padding: 2px 6px !important;
        font-size: 11px !important;
      }
      .supabase-popup .checkbox-container input[type="checkbox"] {
        width: 12px !important;
        height: 12px !important;
      }
      .supabase-popup .checkbox-container label {
        font-size: 11px !important;
      }
    }
    .supabase-popup .checkbox-container {
      margin-top: 2px !important;
      align-self: center !important;
      background: rgba(51,74,108,0.08) !important;
      padding: 4px 10px !important;
      border-radius: 22px !important;
      font-size: 13px !important;
      color: #334a6c !important;
      box-shadow: 0 1.5px 6px rgba(51,74,108,0.08) !important;
      display: flex !important;
      align-items: center !important;
      gap: 10px !important;
      backdrop-filter: blur(5px) !important;
    }
    .supabase-popup .checkbox-container input[type="checkbox"] {
      width: 15px !important;
      height: 15px !important;
    }
    .supabase-popup .checkbox-container label {
      font-size: 13px !important;
    }
    .footer-container {
      min-height: 180px !important;
      padding: 2.5rem 0 1.5rem 0 !important;
    }
    .footer-main {
      display: flex !important;
      flex-wrap: wrap !important;
      justify-content: space-between !important;
      gap: 2rem !important;
    }
    .footer-section {
      min-width: 220px !important;
      margin-bottom: 1.2rem !important;
    }
    .footer-bottom {
      padding: 0.7rem 0 0.3rem 0 !important;
      display: flex !important;
      justify-content: space-between !important;
      align-items: center !important;
      flex-wrap: wrap !important;
    }
  </style>
</body>
</html> 