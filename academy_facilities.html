<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>시설 둘러보기 - 신동탄간호학원</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="common-pages.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&family=Pretendard:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    .subsection-title {
        font-size: 1.8rem;
        color: #1a365d;
        margin-bottom: 2rem;
        text-align: center;
        position: relative;
        padding-bottom: 1rem;
    }
    .subsection-title::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 4px;
        background-color: #0052cc;
        border-radius: 2px;
    }

    .slider-wrapper {
        max-width: 900px;
        margin: 0 auto;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
    }
    .slider-wrapper.loaded {
        opacity: 1;
    }
    .slider-main {
        position: relative;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        background-color: #fff;
    }
    .slider-main-image {
        display: block;
        width: 100%;
        height: auto;
        aspect-ratio: 16 / 10;
        object-fit: cover;
    }
    .slider-nav {
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        transform: translateY(-50%);
        display: flex;
        justify-content: space-between;
        padding: 0 1.5rem;
        box-sizing: border-box;
        pointer-events: none;
    }
    .slider-nav button {
        background: rgba(26, 54, 93, 0.7);
        border: 1px solid rgba(255,255,255,0.2);
        color: white;
        font-size: 1.2rem;
        width: 44px;
        height: 44px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        pointer-events: all;
        transition: all 0.3s ease;
        text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }
    .slider-nav button:hover {
        background: #1a365d;
        transform: scale(1.1);
    }
    .slider-thumbnails {
        display: flex;
        justify-content: center;
        margin-top: 1.5rem;
        gap: 12px;
        flex-wrap: wrap;
        padding: 0 1rem;
    }
    .thumbnail {
        width: 120px;
        height: 80px;
        object-fit: cover;
        cursor: pointer;
        border-radius: 8px;
        border: 3px solid transparent;
        transition: all 0.3s ease;
        opacity: 0.6;
        filter: grayscale(50%);
    }
    .thumbnail:hover {
        transform: scale(1.05);
        opacity: 1;
        filter: grayscale(0);
    }
    .thumbnail.active {
        border-color: #1a365d;
        opacity: 1;
        filter: grayscale(0);
        box-shadow: 0 0 15px rgba(26, 54, 93, 0.4);
    }

    @media (max-width: 768px) {
        .subsection-title {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
        }
        .slider-main-image {
            aspect-ratio: 4 / 3;
        }
        .slider-nav button {
            width: 40px;
            height: 40px;
            font-size: 1rem;
        }
        .slider-nav {
            padding: 0 1rem;
        }
        .thumbnail {
            width: 90px;
            height: 60px;
        }
        .slider-thumbnails {
            gap: 10px;
        }
    }

    @media (max-width: 480px) {
        .content-card {
            padding: 1.5rem 0.5rem;
        }
        .subsection-title {
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }
        .slider-main-image {
            aspect-ratio: 1 / 1;
            border-radius: 8px;
        }
        .slider-nav button {
            width: 36px;
            height: 36px;
        }
        .slider-thumbnails {
            margin-top: 1rem;
            gap: 8px;
            padding: 0 0.5rem;
        }
        .thumbnail {
            width: 75px;
            height: 50px;
            border-radius: 6px;
        }
    }
   
  </style>
</head>
<body>
  <header class="header"></header>
  <div id="page-hero-container"></div>

  <!-- 메인 콘텐츠 -->
  <main>
    <section class="page-section">
      <div class="container">
        <div class="content-card">
          <div class="section-title">
            <h2>시설 둘러보기</h2>
            <p>신동탄간호학원의 쾌적하고 전문적인 교육 환경을 만나보세요.</p>
          </div>
          <div class="card-content">
           
            <div class="slider-wrapper" id="facilities-slider">
              <div class="slider-main">
                <img src="" alt="학원 시설" class="slider-main-image" id="slider-main-image">
                <div class="slider-nav">
                  <button id="slider-prev-btn">&lt;</button>
                  <button id="slider-next-btn">&gt;</button>
                </div>
              </div>
              <div class="slider-thumbnails" id="slider-thumbnails">
                <!-- Thumbnails go here -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
 
  <!-- COMP-FOOTER-01: 글로벌 푸터 -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <p>상호명: 신동탄간호학원</p>
          <p>사업자등록번호: 602-91-03887</p>
          <p>대표자: 김예람</p>
          <br/>
          <p>전화번호: 031-8003-2456</p>
          <p>팩스번호: 050-4062-2456</p>
          <p>이메일: nurse8003@naver.com</p>
          <br/>
          <p>주소: 경기도 화성시 메타폴리스로38, 천년프라자 401호</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 신동탄간호학원. All rights reserved.</p>
      </div>
    </div>
  </footer>
  <!-- Supabase 스크립트 추가 -->

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>
  <script src="supabase-config.js"></script>
  <script>
  // 헤더/푸터/히어로 비동기 로드
  document.addEventListener('DOMContentLoaded', function() {
    // 헤더
    fetch('header.html')
      .then(res => res.text())
      .then(html => {
        document.querySelector('header.header').outerHTML = html;
      });
  
    // 페이지 히어로
    fetch('page-hero.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('page-hero-container').innerHTML = html;
        // 히어로 텍스트 동적 설정
        if (document.getElementById('page-title'))
          document.getElementById('page-title').textContent = '시설안내';
        if (document.getElementById('page-description'))
          document.getElementById('page-description').textContent = '최신 시설을 갖춘 교육 환경';
        if (document.getElementById('breadcrumb-path'))
          document.getElementById('breadcrumb-path').textContent = '학원소개 > 시설안내';
        const badge = document.querySelector('.badge-text');
        if (badge) badge.textContent = '학원소개';
      });
  });
  // Supabase에서 시설 이미지 목록 불러오기 및 슬라이더 렌더링
  async function loadFacilityImages() {
    if (!window.supabaseClient) return;
    const { data: facilities, error } = await window.supabaseClient
      .from('facilities')
      .select('*')
      .order('order', { ascending: true });
    if (error || !facilities) return;
    renderFacilitySlider(facilities);
  }

  function renderFacilitySlider(facilities) {
    const mainImg = document.getElementById('slider-main-image');
    const thumbnails = document.getElementById('slider-thumbnails');
    let current = 0;
    if (!facilities.length) return;
    function show(idx) {
      current = idx;
      mainImg.src = facilities[idx].image_url;
      mainImg.alt = facilities[idx].alt || '';
      Array.from(thumbnails.children).forEach((thumb, i) => {
        thumb.classList.toggle('active', i === idx);
      });
    }
    thumbnails.innerHTML = '';
    facilities.forEach((item, idx) => {
      const thumb = document.createElement('img');
      thumb.src = item.image_url;
      thumb.alt = item.alt || '';
      thumb.className = 'thumbnail' + (idx === 0 ? ' active' : '');
      thumb.onclick = () => show(idx);
      thumbnails.appendChild(thumb);
    });
    show(0);
    document.getElementById('slider-prev-btn').onclick = () => show((current - 1 + facilities.length) % facilities.length);
    document.getElementById('slider-next-btn').onclick = () => show((current + 1) % facilities.length);
    document.getElementById('facilities-slider').classList.add('loaded');
  }

  // 페이지 로드시 시설 이미지 불러오기
  document.addEventListener('DOMContentLoaded', loadFacilityImages);
  </script>

  <script src="script.js"></script>
</body>
</html>
